<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Bedtime Checklist - Bilingual</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&display=swap');
  :root {
    --bg-light: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    --bg-dark: #1a202c;
    --text-light: #2d3748;
    --text-dark: #f7fafc;
    --card-light: white;
    --card-dark: #2d3748;
  }
  body {
    font-family: 'Inter', sans-serif;
    margin: 0; padding: 20px;
    background: var(--bg-light);
    color: var(--text-light);
    transition: 0.3s;
    min-height: 100vh;
  }
  body.dark {
    background: var(--bg-dark);
    color: var(--text-dark);
  }
  .container {
    max-width: 600px;
    margin: 0 auto;
    background: var(--card-light);
    border-radius: 16px;
    overflow: hidden;
    box-shadow: 0 20px 40px rgba(0,0,0,0.1);
    transition: 0.3s;
  }
  body.dark .container {
    background: var(--card-dark);
  }
  .header {
    text-align: center;
    padding: 30px 20px;
    background: linear-gradient(135deg, #4a5568 0%, #2d3748 100%);
    color: white;
  }
  .controls {
    margin-top: 15px;
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 8px;
  }
  .controls button,
  .controls select {
    background: #667eea;
    color: white;
    border: none;
    padding: 8px 12px;
    border-radius: 6px;
    cursor: pointer;
    font-size: 0.9em;
  }
  .controls button:hover,
  .controls select:hover {
    background: #5a67d8;
  }
  .controls select {
    appearance: none;
  }
  .content {
    padding: 30px;
  }
  .quote-box {
    font-style: italic;
    text-align: center;
    margin: 20px 0;
    min-height: 50px;
  }
  .section {
    margin-bottom: 40px;
  }
  .section-title {
    font-size: 1.3em;
    font-weight: 600;
    margin-bottom: 20px;
    padding-bottom: 8px;
    border-bottom: 2px solid #e2e8f0;
  }
  .checklist {
    list-style: none;
    padding: 0;
  }
  .checklist li {
    display: flex;
    align-items: center;
    margin-bottom: 12px;
  }
  .checklist input[type="checkbox"] {
    margin-right: 12px;
    width: 18px;
    height: 18px;
    cursor: pointer;
  }
  .reflection-item {
    margin-bottom: 25px;
  }
  .reflection-label {
    font-weight: 500;
    display: block;
    margin-bottom: 8px;
  }
  .reflection-lines {
    width: 100%;
    min-height: 60px;
    border: none;
    border-bottom: 1px solid #e2e8f0;
    padding: 8px 0;
    font-family: inherit;
    background: transparent;
    color: inherit;
    font-size: 1em;
    resize: vertical;
    outline-offset: 2px;
  }
  .reflection-lines:focus {
    border-bottom-color: #667eea;
  }
  .divider {
    border: none;
    height: 2px;
    background: linear-gradient(90deg, transparent, #e2e8f0, transparent);
    margin: 30px 0;
  }
  .wind-down,
  .your-turn,
  .reminder {
    background: #f7fafc;
    padding: 20px;
    border-radius: 12px;
    margin: 20px 0;
    transition: background 0.3s;
  }
  body.dark .wind-down,
  body.dark .your-turn,
  body.dark .reminder {
    background: #2c2f36;
  }
  body.dark .divider {
    background: linear-gradient(90deg, transparent, #4a5568, transparent);
  }
  .reminder h3 {
    margin-top: 0;
  }
  .hashtag {
    margin-top: 15px;
    font-weight: 600;
    color: #667eea;
    font-size: 0.9em;
  }
  @media print {
    body {
      margin: 0.5in;
      font-size: 12pt;
      line-height: 1.4;
      background: white !important;
      color: black !important;
    }
    .no-print {
      display: none !important;
    }
    .page-break {
      page-break-before: always;
    }
  }
</style>
</head>
<body>
<div class="container">
  <div class="header">
    <h1 id="title">üõèÔ∏è Get Ready for Bed</h1>
    <p id="subtitle">Take a moment to slow down and care for yourself.</p>
    <div class="controls">
      <select id="langSelect" onchange="updateLanguage()">
        <option value="en">English</option>
        <option value="fr">Fran√ßais</option>
      </select>
      <select id="moodSelect" onchange="updateMood()">
        <option value="" id="moodSelEn">üåô Select Mood</option>
        <option value="peaceful" id="peacefulEn">Peaceful</option>
        <option value="anxious" id="anxiousEn">Anxious</option>
        <option value="hopeful" id="hopefulEn">Hopeful</option>
        <option value="tired" id="tiredEn">Tired</option>
      </select>
      <button onclick="toggleNightMode()">üåì <span id="nightBtn">Night Mode</span></button>
      <button onclick="window.print()">üñ®Ô∏è <span id="printBtn">Print</span></button>
      <button onclick="downloadPDF()">üì• <span id="downloadBtn">Download</span></button>
    </div>
  </div>

  <div class="content">
    <div class="quote-box" id="moodQuote"></div>

    <div class="section">
      <h2 class="section-title" id="section1">Self-Care Check</h2>
      <ul class="checklist">
        <li><input type="checkbox" id="chk1" /> <label for="chk1" id="check1">Washed your face or taken a shower</label></li>
        <li><input type="checkbox" id="chk2" /> <label for="chk2" id="check2">Changed into something cozy</label></li>
        <li><input type="checkbox" id="chk3" /> <label for="chk3" id="check3">Brushed your teeth or did your routine</label></li>
      </ul>
    </div>

    <hr class="divider" />

    <div class="section">
      <h2 class="section-title" id="section2">Mind Reset</h2>
      <ul class="checklist">
        <li><input type="checkbox" id="chk4" /> <label for="chk4" id="check4">Put your phone away for 10 minutes</label></li>
        <li><input type="checkbox" id="chk5" /> <label for="chk5" id="check5">Took 3 deep grounding breaths</label></li>
        <li><input type="checkbox" id="chk6" /> <label for="chk6" id="check6">Let go of what you can't control</label></li>
      </ul>
    </div>

    <hr class="divider" />
        <div class="section">
      <h2 class="section-title" id="section3">Reflect and Release</h2>

      <div class="reflection-item">
        <label class="reflection-label" id="refLabel1">‚Ä¢ Something that went well today:</label>
        <textarea class="reflection-lines" id="ref1" rows="3"></textarea>
      </div>

      <div class="reflection-item">
        <label class="reflection-label" id="refLabel2">‚Ä¢ Something I'm letting go of:</label>
        <textarea class="reflection-lines" id="ref2" rows="3"></textarea>
      </div>

      <div class="reflection-item">
        <label class="reflection-label" id="refLabel3">‚Ä¢ Something I'm grateful for:</label>
        <textarea class="reflection-lines" id="ref3" rows="3"></textarea>
      </div>
    </div>

    <hr class="divider" />

    <div class="section">
      <h2 class="section-title" id="section4">Optional Wind-Down Tools</h2>
      <div class="wind-down">
        <ul class="checklist">
          <li><input type="checkbox" id="chk7" /> <label for="chk7" id="check7">Played calming music or nature sounds</label></li>
          <li><input type="checkbox" id="chk8" /> <label for="chk8" id="check8">Did a gentle stretch or movement</label></li>
          <li><input type="checkbox" id="chk9" /> <label for="chk9" id="check9">Sipped a warm tea or glass of water</label></li>
        </ul>
      </div>
    </div>

    <div class="section">
      <div class="your-turn">
        <h2 class="section-title" id="section5">Your Turn</h2>

        <div class="reflection-item">
          <label class="reflection-label" id="refLabel4">‚ú® What's one kind thing you'll say to yourself before sleep?</label>
          <textarea class="reflection-lines" id="ref4" rows="3"></textarea>
        </div>

        <div class="reflection-item">
          <label class="reflection-label" id="refLabel5">‚ú® How are you feeling right now?</label>
          <textarea class="reflection-lines" id="ref5" rows="3"></textarea>
        </div>
      </div>
    </div>

    <div class="reminder">
      <h3 id="reminderTitle">üåô Reminder:</h3>
      <p class="reminder-text" id="reminderText">
        You are safe.<br />
        You are enough.<br />
        You are not alone.
      </p>
      <div class="hashtag">#SpeakLouderLoveHarder</div>
    </div>
  </div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script>
  const moods = {
    peaceful: {
      colorLight: '#a8dadc',
      colorDark: '#457b9d',
      quote: {
        en: '‚ÄúPeace comes from within. Do not seek it without.‚Äù ‚Äì Buddha',
        fr: '¬´ La paix vient de l‚Äôint√©rieur. Ne la cherche pas √† l‚Äôext√©rieur. ¬ª ‚Äì Bouddha'
      }
    },
    anxious: {
      colorLight: '#f4a261',
      colorDark: '#e76f51',
      quote: {
        en: '‚ÄúThis too shall pass.‚Äù',
        fr: '¬´ Cela aussi passera. ¬ª'
      }
    },
    hopeful: {
      colorLight: '#90be6d',
      colorDark: '#43aa8b',
      quote: {
        en: '‚ÄúHope is the thing with feathers that perches in the soul.‚Äù ‚Äì Emily Dickinson',
        fr: '¬´ L‚Äôespoir est la chose avec des plumes qui se perche dans l‚Äô√¢me. ¬ª ‚Äì Emily Dickinson'
      }
    },
    tired: {
      colorLight: '#b0a8b9',
      colorDark: '#6b5b7c',
      quote: {
        en: '‚ÄúRest and self-care are so important.‚Äù',
        fr: '¬´ Le repos et le soin de soi sont si importants. ¬ª'
      }
    }
  };

  const defaultLang = 'en';
  const defaultMood = '';
  const defaultNight = false;

  // Elements
  const langSelect = document.getElementById('langSelect');
  const moodSelect = document.getElementById('moodSelect');
  const body = document.body;
  const quoteBox = document.getElementById('moodQuote');

  // Load saved data from localStorage
  function loadSettings() {
    const lang = localStorage.getItem('bedtimeLang') || defaultLang;
    const mood = localStorage.getItem('bedtimeMood') || defaultMood;
    const night = localStorage.getItem('bedtimeNight') === 'true';

    langSelect.value = lang;
    moodSelect.value = mood;
    if (night) {
      body.classList.add('dark');
    } else {
      body.classList.remove('dark');
    }
  }

  // Save language selection
  function saveLanguage(lang) {
    localStorage.setItem('bedtimeLang', lang);
  }

  // Save mood selection
  function saveMood(mood) {
    localStorage.setItem('bedtimeMood', mood);
  }

  // Save night mode
  function saveNightMode(isNight) {
    localStorage.setItem('bedtimeNight', isNight);
  }

  // Update language texts
  function updateLanguage() {
    const lang = langSelect.value;
    saveLanguage(lang);

    // Text mappings
    const texts = {
      title: { en: 'üõèÔ∏è Get Ready for Bed', fr: 'üõèÔ∏è Pr√©pare-toi pour le lit' },
      subtitle: {
        en: 'Take a moment to slow down and care for yourself.',
        fr: 'Prends un moment pour ralentir et prendre soin de toi.'
      },
      nightBtn: { en: 'Night Mode', fr: 'Mode Nuit' },
      printBtn: { en: 'Print', fr: 'Imprimer' },
      downloadBtn: { en: 'Download', fr: 'T√©l√©charger' },
      moodSel: { en: 'üåô Select Mood', fr: 'üåô Choisir une humeur' },
      peaceful: { en: 'Peaceful', fr: 'Paisible' },
      anxious: { en: 'Anxious', fr: 'Anxieux¬∑se' },
      hopeful: { en: 'Hopeful', fr: 'Plein¬∑e d‚Äôespoir' },
      tired: { en: 'Tired', fr: 'Fatigu√©¬∑e' },
      section1: { en: 'Self-Care Check', fr: 'V√©rification des soins personnels' },
      check1: { en: 'Washed your face or taken a shower', fr: 'Lav√© ton visage ou pris une douche' },
      check2: { en: 'Changed into something cozy', fr: 'Mis quelque chose de confortable' },
      check3: { en: 'Brushed your teeth or did your routine', fr: 'Bross√© tes dents ou fait ta routine' },
      section2: { en: 'Mind Reset', fr: 'R√©initialisation de l‚Äôesprit' },
      check4: { en: 'Put your phone away for 10 minutes', fr: 'Mis ton t√©l√©phone de c√¥t√© pendant 10 minutes' },
      check5: { en: 'Took 3 deep grounding breaths', fr: 'Pris 3 grandes respirations apaisantes' },
      check6: { en: "Let go of what you can't control", fr: "L√¢ch√© prise sur ce que tu ne peux pas contr√¥ler" },
      section3: { en: 'Reflect and Release', fr: 'R√©fl√©chir et l√¢cher prise' },
      refLabel1: { en: '‚Ä¢ Something that went well today:', fr: '‚Ä¢ Quelque chose qui a bien march√© aujourd‚Äôhui :' },
      refLabel2: { en: "‚Ä¢ Something I'm letting go of:", fr: "‚Ä¢ Quelque chose que je l√¢che prise :" },
      refLabel3: { en: "‚Ä¢ Something I'm grateful for:", fr: "‚Ä¢ Quelque chose pour laquelle je suis reconnaissant¬∑e :" },
      section4: { en: 'Optional Wind-Down Tools', fr: 'Outils facultatifs pour se d√©tendre' },
      check7: { en: 'Played calming music or nature sounds', fr: '√âcout√© de la musique apaisante ou des sons de la nature' },
      check8: { en: 'Did a gentle stretch or movement', fr: 'Fait un √©tirement doux ou un mouvement' },
      check9: { en: 'Sipped a warm tea or glass of water', fr: 'Bu une tisane chaude ou un verre d‚Äôeau' },
      section5: { en: 'Your Turn', fr: '√Ä toi' },
      refLabel4: { en: "‚ú® What's one kind thing you'll say to yourself before sleep?", fr: "‚ú® Quelle est une chose gentille que tu te diras avant de dormir ?" },
      refLabel5: { en: '‚ú® How are you feeling right now?', fr: '‚ú® Comment te sens-tu maintenant ?' },
      reminderTitle: { en: 'üåô Reminder:', fr: 'üåô Rappel :' },
      reminderText: {
        en: 'You are safe.<br>You are enough.<br>You are not alone.',
        fr: "Tu es en s√©curit√©.<br>Tu es suffisant¬∑e.<br>Tu n'es pas seul¬∑e."
      }
    };

    // Update all mapped texts
    for (const id in texts) {
      const el = document.getElementById(id);
      if (el) el.innerHTML = texts[id][lang];
    }

    updateMood();
  }

  // Update mood background & quote
  function updateMood() {
    const mood = moodSelect.value;
    saveMood(mood);
    if (!mood || !moods[mood]) {
      quoteBox.innerHTML = '';
      body.style.background = '';
      return;
    }
    const lang = langSelect.value;
    const moodData = moods[mood];
    quoteBox.innerHTML = moodData.quote[lang];
    if (body.classList.contains('dark')) {
      body.style.background = moodData.colorDark;
    } else {
      body.style.background = moodData.colorLight;
    }
  }

  // Toggle night mode
  function toggleNightMode() {
    const isNight = body.classList.toggle('dark');
    saveNightMode(isNight);
    updateMood();
  }

  // Save checkboxes and textareas
  function saveInputs() {
    const allCheckboxes = document.querySelectorAll('input[type="checkbox"]');
    allCheckboxes.forEach(cb => {
      localStorage.setItem(cb.id, cb.checked);
    });
    const allTextareas = document.querySelectorAll('textarea');
    allTextareas.forEach(ta => {
      localStorage.setItem(ta.id, ta.value);
    });
  }

  // Load checkboxes and textareas
  function loadInputs() {
    const allCheckboxes = document.querySelectorAll('input[type="checkbox"]');
    allCheckboxes.forEach(cb => {
      const saved = localStorage.getItem(cb.id);
      cb.checked = saved === 'true';
      cb.addEventListener('change', saveInputs);
    });
    const allTextareas = document.querySelectorAll('textarea');
    allTextareas.forEach(ta => {
      const saved = localStorage.getItem(ta.id);
      if (saved) ta.value = saved;
      ta.addEventListener('input', saveInputs);
    });
  }

  // Download PDF function using jsPDF
  async function downloadPDF() {
    const { jsPDF } = window.jspdf;
    const doc = new jsPDF({
      unit: 'pt',
      format: 'letter',
      putOnlyUsedFonts:true,
      floatPrecision: 16
    });

    // Basic text layout for PDF - you can enhance with html2canvas if needed
    doc.setFontSize(20);
    doc.text(langSelect.value === 'fr' ? 'Checklist du coucher' : 'Bedtime Checklist', 40, 40);

    let y = 70;
    function addText(text) {
      const splitText = doc.splitTextToSize(text, 500);
      doc.text(splitText, 40, y);
      y += splitText.length * 14 + 10;
    }

    // Sections and content
    addText(`${langSelect.value === 'fr' ? 'Humeur' : 'Mood'}: ${moodSelect.options[moodSelect.selectedIndex].text}`);
    addText('');
    addText(langSelect.value === 'fr' ? 'Contr√¥le des soins personnels:' : 'Self-Care Check:');
    for (let i=1; i<=3; i++) {
      const checked = localStorage.getItem(`chk${i}`) === 'true' ? '‚úÖ' : '‚¨ú';
      const label = document.getElementById(`check${i}`).textContent;
      addText(`${checked} ${label}`);
    }

    addText('');
    addText(langSelect.value === 'fr' ? 'R√©initialisation de l‚Äôesprit:' : 'Mind Reset:');
    for (let i=4; i<=6; i++) {
      const checked = localStorage.getItem(`chk${i}`) === 'true' ? '‚úÖ' : '‚¨ú';
      const label = document.getElementById(`check${i}`).textContent;
      addText(`${checked} ${label}`);
    }

    addText('');
    addText(langSelect.value === 'fr' ? 'R√©fl√©chir et l√¢cher prise:' : 'Reflect and Release:');
    for (let i=1; i<=3; i++) {
      const val = localStorage.getItem(`ref${i}`) || '';
      addText(`‚Ä¢ ${document.getElementById(`refLabel${i}`).textContent}`);
      addText(val);
      addText('');
    }

    addText('');
    addText(langSelect.value === 'fr' ? 'Outils facultatifs pour se d√©tendre:' : 'Optional Wind-Down Tools:');
    for (let i=7; i<=9; i++) {
      const checked = localStorage.getItem(`chk${i}`) === 'true' ? '‚úÖ' : '‚¨ú';
      const label = document.getElementById(`check${i}`).textContent;
      addText(`${checked} ${label}`);
    }

    addText('');
    addText(langSelect.value === 'fr' ? '√Ä toi:' : 'Your Turn:');
    for (let i=4; i<=5; i++) {
      const val = localStorage.getItem(`ref${i}`) || '';
      addText(`‚Ä¢ ${document.getElementById(`refLabel${i}`).textContent}`);
      addText(val);
      addText('');
    }

    addText('');
    addText(langSelect.value === 'fr' ? 'Rappel:' : 'Reminder:');
    addText(document.getElementById('reminderText').innerText);

    doc.save('bedtime-checklist.pdf');
  }

  // Initial setup
  window.onload = () => {
    loadSettings();
    loadInputs();
    updateLanguage();
  };
</script>
</body>
</html>
    