<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Crisis Support Toolkit</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <style>
    /* Reset & base */
    *, *::before, *::after { box-sizing:border-box; margin:0; padding:0; }
    body {
      font-family:'Segoe UI', sans-serif;
      background: linear-gradient(135deg,#667eea,#764ba2);
      color:#333; min-height:100vh; padding:20px 10px 60px;
      scroll-behavior:smooth; overflow-x:hidden;
    }
    a { color:#5a6cb2; text-decoration:none; transition:color .3s; }
    a:hover, a:focus { color:#423e9a; text-decoration:underline; }

    button {
      font-family:inherit; border:none; cursor:pointer; border-radius:8px;
      transition:all .3s ease; display:inline-flex; align-items:center;
      justify-content:center;
    }
    button:focus-visible { outline:3px solid #a7b1f9; outline-offset:2px; }
    button:hover { transform:translateY(-2px); }

    /* Container & animations */
    .container {
      max-width:900px; margin:0 auto;
      background:rgba(255,255,255,0.98); border-radius:16px;
      padding:2rem 2.5rem 3rem;
      box-shadow:0 12px 32px rgba(0,0,0,0.15);
      opacity:0; transform:translateY(25px);
      animation:fadeInUp .7s forwards;
    }
    @keyframes fadeInUp { to { opacity:1; transform:translateY(0); } }

    header {
      text-align:center; margin-bottom:2rem;
      opacity:0; animation:fadeIn .9s forwards;
    }
    @keyframes fadeIn { to { opacity:1; } }
    header h1 {
      font-size:2.4rem; color:#423e9a; font-weight:700;
    }
    header .subtitle {
      font-size:1rem; color:#6c6f85; margin-top:0.4rem;
    }
    header strong {
      display:block; margin-top:0.6rem; font-weight:600;
      color:#37415a;
    }

    /* Crisis-resources section */
    .resources {
      display:grid;
      grid-template-columns:1fr;
      gap:15px;
      margin-bottom:2rem;
      animation:fadeIn .8s forwards;
      opacity:0;
    }
    .resource-card {
      background:#f8f9fa;
      border-left:6px solid #e74c3c;
      padding:1rem 1.2rem;
      border-radius:8px;
      box-shadow:0 4px 8px rgba(0,0,0,0.1);
    }
    .resource-card h3 {
      font-size:1.2rem; color:#c0392b; margin-bottom:0.4rem;
    }
    .resource-card p { margin-bottom:0.6rem; color:#555; }
    .resource-card strong { color:#2c3e50; }
    .resource-card span { display:block; margin-top:0.2rem; }

    /* Section headings */
    section h2 {
      font-size:1.6rem; color:#4b4e7c; margin-bottom:.8rem;
      border-left:6px solid #5a6cb2; padding-left:12px;
      opacity:0; transform:translateX(-30px);
      animation:fadeInLeft .8s forwards;
    }
    @keyframes fadeInLeft { to { opacity:1; transform:translateX(0); } }

    .starter-prompts {
      background:#f4f7ff; border-left:5px solid #667eea;
      border-radius:12px; padding:1rem 1.5rem;
      margin-bottom:1.4rem; opacity:0; animation:fadeIn .9s forwards;
    }
    textarea {
      width:100%; min-height:130px; padding:1rem;
      border:2px solid #5a6cb2; border-radius:12px;
      background:#fdfdff; box-shadow:inset 1px 2px 8px rgba(102,110,240,.15);
      font-size:1rem; color:#222;
      opacity:0; animation:fadeIn 1.1s forwards;
    }
    textarea:focus {
      border-color:#423e9a;
      box-shadow:0 0 10px #7a7edc;
    }

    .form-buttons {
      margin-top:1rem; display:flex; gap:.8rem;
      opacity:0; animation:fadeIn 1.2s forwards;
    }
    .primary-btn {
      background:#5a6cb2; color:#fff; padding:.7rem 1.5rem;
      font-weight:600; box-shadow:0 4px 12px rgba(90,108,178,.4);
    }
    .secondary-btn {
      background:#bbb; color:#333; padding:.7rem 1.5rem;
    }

    .checklist ul {
      margin-top:1rem; list-style:none;
      opacity:0; animation:fadeIn 1.3s forwards;
    }
    .checklist li {
      margin-bottom:.7rem; display:flex; align-items:center;
      gap:.5rem; color:#3a3f66;
    }
    .checklist input { width:20px; height:20px; accent-color:#5a6cb2; }

    /* Scroll-buttons */
    .scroll-btns {
      position:fixed; bottom:70px; right:18px;
      display:flex; flex-direction:column; gap:12px;
      z-index:1100;
    }
    .scroll-btns button {
      width:50px; height:50px; border-radius:50%;
      background:#5a6cb2; color:#fff; font-size:1.6rem;
    }
    .scroll-btns button:hover {
      background:#423e9a; transform:scale(1.1);
    }
    .scroll-btns button::after {
      content:attr(title); position:absolute;
      right:110%; top:50%; transform:translateY(-50%);
      background:#423e9a; color:#fff; padding:4px 10px;
      border-radius:5px; font-size:.8rem;
      opacity:0; pointer-events:none;
      transition:opacity .3s;
    }
    .scroll-btns button:hover::after { opacity:1; }

    /* Modal */
    .modal-overlay {
      position:fixed; inset:0; background:rgba(20,25,50,.85);
      display:none; align-items:center; justify-content:center;
      opacity:0; pointer-events:none;
      transition:opacity .35s;
      z-index:1600;
    }
    .modal-overlay.active {
      display:flex; opacity:1; pointer-events:auto;
    }
    .modal {
      background:#fff; border-radius:16px;
      padding:2rem; box-shadow:0 20px 40px rgba(0,0,0,.3);
      transform:translateY(30px); opacity:0;
      animation:slideUpFade .4s forwards;
      max-width:600px; width:90%;
    }
    @keyframes slideUpFade { to { transform:translateY(0); opacity:1; } }
    .modal h2 { color:#423e9a; margin-bottom:1rem; }
    .close-btn { position:absolute; top:12px; right:12px;
      font-size:1.5rem; color:#888; background:none;
    }
    .close-btn:hover { color:#c0392b; }

    #safety-input-fr {
      width:100%; min-height:140px; padding:1rem;
      border:2px solid #5a6cb2; border-radius:12px;
      box-shadow:inset 1px 2px 8px rgba(102,110,240,.15);
    }

    footer {
      text-align:center; margin-top:2rem; color:#d2d4e7;
      opacity:0; animation:fadeIn 2s forwards;
    }

    @media (max-width:600px) {
      .container { padding:1.5rem; }
      header h1 { font-size:2rem; }
      .resource-card { padding:.8rem; }
      .scroll-btns {
        bottom:50px; right:12px;
      }
      .scroll-btns button {
        width:44px; height:44px; font-size:1.4rem;
      }
      textarea, #safety-input-fr {
        min-height:120px;
      }
    }
  </style>
</head>
<body>

  <!-- Scroll buttons -->
  <nav class="scroll-btns" aria-label="Quick navigation">
    <button onclick="scrollToSection('resources-section')" title="Resources">üìû</button>
    <button onclick="scrollToSection('safety-section')" title="Safety Plan">üõ°Ô∏è</button>
    <button onclick="scrollToSection('checklist-section')" title="Checklist">üìã</button>
  </nav>

  <main class="container" tabindex="-1">

    <header>
      <h1 id="title">üÜò Crisis Support Toolkit</h1>
      <p class="subtitle" id="subtitle">Immediate help and resources for Canada & USA</p>
      <strong id="tagline">You are not alone. Help is available 24/7.</strong>
    </header>

    <!-- Crisis resources -->
    <section id="resources-section" tabindex="-1">
      <h2>Crisis Numbers & Resources</h2>
      <div class="resources">
        <div class="resource-card">
          <h3>üá®üá¶ Canada</h3>
          <p><strong>988</strong> ‚Äì Call/Text suicide crisis helpline</p>
          <p><strong>1‚Äë800‚Äë668‚Äë6868 / Text: 686868</strong> ‚Äì Kids Help Phone (youth)</p>
          <p><strong>1‚Äë833‚Äë456‚Äë4566 / Text: 45645</strong> ‚Äì Crisis Services Canada</p>
          <p><strong>1‚Äë855‚Äë242‚Äë3310</strong> ‚Äì Hope for Wellness (Indigenous support)</p>
        </div>
        <div class="resource-card">
          <h3>üá∫üá∏ United States</h3>
          <p><strong>988</strong> ‚Äì Suicide & Crisis Lifeline (Call/Text)</p>
          <p><strong>HOME ‚Üí 741741</strong> ‚Äì Crisis Text Line</p>
          <p><strong>1‚Äë800‚Äë662‚ÄëHELP (4357)</strong> ‚Äì SAMHSA National Helpline</p>
          <p><strong>1‚Äë800‚Äë985‚Äë5990</strong> ‚Äì Disaster Distress Helpline</p>
        </div>
      </div>
    </section>

    <!-- Safety plan -->
    <section id="safety-section" tabindex="-1" style="margin-top:1.5rem">
      <h2>üõ°Ô∏è Personalized Safety Plan</h2>
      <div class="starter-prompts">
        <em>Use these prompts to build your plan:</em>
        <ul>
          <li>Early warning signs (e.g. racing thoughts)</li>
          <li>Healthy actions (e.g. walk, call)</li>
          <li>Support contacts (name & number)</li>
          <li>Safe locations (e.g. ER, friend‚Äôs house)</li>
          <li>Environmental safety steps</li>
        </ul>
      </div>
      <textarea id="safety-input" placeholder="Write your safety plan..."></textarea>
      <div class="form-buttons">
        <button class="primary-btn" onclick="downloadPDF('safety-input','Safety_Plan.pdf')">Download PDF</button>
        <button class="secondary-btn" onclick="openModal('modal-safetyplan-fr')">Voir en fran√ßais</button>
      </div>
    </section>

    <!-- Checklist -->
    <section id="checklist-section" tabindex="-1" style="margin-top:2rem">
      <h2>üìã Checklist</h2>
      <div class="checklist">
        <ul>
          <li><input type="checkbox" id="c1"><label for="c1">Call someone or crisis line</label></li>
          <li><input type="checkbox" id="c2"><label for="c2">Use breathing or grounding</label></li>
          <li><input type="checkbox" id="c3"><label for="c3">Take medication (if prescribed)</label></li>
          <li><input type="checkbox" id="c4"><label for="c4">Remove harmful items</label></li>
          <li><input type="checkbox" id="c5"><label for="c5">Go to safe place or call 911</label></li>
        </ul>
      </div>
      <button class="secondary-btn" onclick="window.print()">Print Checklist</button>
    </section>
  </main>

  <!-- French Safety Plan Modal -->
  <div id="modal-safetyplan-fr" class="modal-overlay" aria-hidden="true">
    <div class="modal" role="dialog">
      <button class="close-btn" aria-label="Close" onclick="closeModal('modal-safetyplan-fr')">√ó</button>
      <h2>üõ°Ô∏è Plan de s√©curit√© personnalis√©</h2>
      <textarea id="safety-input-fr" placeholder="√âcrivez votre plan ici..."></textarea>
      <div style="text-align:right; margin-top:1rem">
        <button class="primary-btn" onclick="downloadPDF('safety-input-fr','Plan_de_Securite.pdf')">T√©l√©charger PDF</button>
        <button class="secondary-btn" onclick="closeModal('modal-safetyplan-fr')">Fermer</button>
      </div>
    </div>
  </div>

  <footer><p>¬©¬†2025 Crisis Support Toolkit</p></footer>

  <script>
    function scrollToSection(id) {
      document.getElementById(id).scrollIntoView({behavior:'smooth'});
    }
    function setLang(lang) {
      const en = document.getElementById('en-btn');
      const fr = document.getElementById('fr-btn');
      const t = document.getElementById('title');
      const s = document.getElementById('subtitle');
      const st = document.getElementById('tagline');
      if (lang==='fr') {
        en.classList.replace('primary-btn','secondary-btn');
        fr.classList.replace('secondary-btn','primary-btn');
        t.textContent="üÜò Trousse d'aide en situation de crise";
        s.textContent="Aide imm√©diate et ressources pour Canada & √âtats‚ÄëUnis";
        st.textContent="Vous n'√™tes pas seul(e). Aide disponible 24‚ÄØh/24,‚ÄØ7‚ÄØj/7.";
      } else {
        fr.classList.replace('primary-btn','secondary-btn');
        en.classList.replace('secondary-btn','primary-btn');
        t.textContent="üÜò Crisis Support Toolkit";
        s.textContent="Immediate help and resources for Canada & USA";
        st.textContent="You are not alone. Help is available 24/7.";
      }
    }
    function openModal(id) {
      const m=document.getElementById(id);
      m.classList.add('active');
      m.style.display='flex';
      m.setAttribute('aria-hidden','false');
      m.querySelector('textarea').focus();
      document.body.style.overflow='hidden';
    }
    function closeModal(id) {
      const m=document.getElementById(id);
      m.classList.remove('active');
      m.style.display='none';
      m.setAttribute('aria-hidden','true');
      document.body.style.overflow='';
    }
    async function downloadPDF(id, fname) {
      const { jsPDF } = window.jspdf;
      const doc=new jsPDF();
      const t=document.getElementById(id).value.trim()||'(No content)';
      doc.setFont('helvetica','bold'); doc.setFontSize(16);
      doc.text(fname.replace(/_/g,' ').replace('.pdf',''),14,20);
      doc.setFont('helvetica','normal'); doc.setFontSize(12);
      doc.text(doc.splitTextToSize(t,180),14,30);
      doc.save(fname);
    }
  </script>
</body>
</html>