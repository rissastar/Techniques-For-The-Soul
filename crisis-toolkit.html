<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Crisis Support Toolkit</title>
<style>
  /* Reset & base */
  * {
    box-sizing: border-box;
  }
  body {
    margin: 0; 
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background: linear-gradient(135deg, #89f7fe 0%, #66a6ff 100%);
    color: #2c3e50;
    min-height: 100vh;
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 1rem;
  }
  h1, h2, h3 {
    margin: 0.5rem 0 1rem 0;
    font-weight: 700;
  }
  h1 {
    font-size: 2.4rem;
  }
  h2 {
    font-size: 1.8rem;
    display: flex;
    align-items: center;
    gap: 0.5rem;
  }
  h3 {
    font-size: 1.2rem;
    color: #34495e;
  }
  p {
    line-height: 1.5;
  }

  /* Container */
  #app {
    max-width: 900px;
    width: 100%;
    background: rgba(255 255 255 / 0.95);
    border-radius: 12px;
    box-shadow: 0 12px 25px rgba(0,0,0,0.1);
    padding: 2rem;
    margin-bottom: 2rem;
  }

  /* Language toggle */
  #language-toggle {
    display: flex;
    justify-content: flex-end;
    gap: 1rem;
    margin-bottom: 1rem;
  }
  #language-toggle button {
    background: transparent;
    border: 2px solid #2980b9;
    padding: 0.3rem 0.8rem;
    border-radius: 6px;
    color: #2980b9;
    cursor: pointer;
    font-weight: 600;
    transition: all 0.3s ease;
  }
  #language-toggle button.active,
  #language-toggle button:hover {
    background: #2980b9;
    color: #fff;
  }

  /* Emergency banner */
  .emergency-banner {
    background: #ff6b6b;
    color: white;
    border-radius: 10px;
    padding: 1rem 1.5rem;
    margin-bottom: 2rem;
    text-align: center;
    box-shadow: 0 4px 10px rgba(255,107,107,0.4);
  }
  .emergency-banner h2 {
    font-weight: 800;
    margin-bottom: 0.3rem;
  }
  .emergency-numbers {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 1.5rem;
    font-weight: 700;
  }
  .emergency-number {
    background: rgba(255 255 255 / 0.15);
    padding: 0.5rem 1rem;
    border-radius: 6px;
    min-width: 140px;
  }
  .emergency-number .number {
    font-size: 1.5rem;
    display: block;
  }

  /* Resource grid */
  .resource-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 1.5rem;
    margin-bottom: 2rem;
  }
  .resource-card {
    background: #e8f0fe;
    padding: 1rem 1.2rem;
    border-radius: 10px;
    box-shadow: 0 3px 10px rgba(102, 166, 255, 0.3);
    transition: box-shadow 0.3s ease;
  }
  .resource-card:hover {
    box-shadow: 0 6px 18px rgba(102, 166, 255, 0.5);
  }
  .resource-title {
    color: #1a237e;
    font-weight: 700;
    margin-bottom: 0.4rem;
  }
  .resource-description {
    font-size: 0.9rem;
    margin-bottom: 0.8rem;
  }
  .contact-info {
    display: flex;
    flex-direction: column;
    gap: 0.3rem;
  }
  .contact-method {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    font-weight: 600;
    color: #1565c0;
  }
  .contact-method .icon {
    font-size: 1.2rem;
  }
  .contact-method .phone-number, 
  .contact-method .website {
    user-select: text;
  }
  .contact-method .website {
    color: #0d47a1;
    text-decoration: none;
    transition: color 0.3s ease;
  }
  .contact-method .website:hover {
    color: #5472d3;
    text-decoration: underline;
  }

  /* Tips section */
  .tips-section {
    margin-bottom: 3rem;
  }
  .tips-title {
    text-align: center;
    font-weight: 700;
    color: #34495e;
    margin-bottom: 1rem;
  }
  .tips-grid {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 1.2rem;
  }
  .tip-card {
    background: #d6e9fc;
    border-radius: 10px;
    padding: 1rem 1.2rem;
    width: 280px;
    box-shadow: 0 2px 12px rgba(102, 166, 255, 0.2);
  }
  .tip-title {
    font-weight: 700;
    color: #1a237e;
    margin-bottom: 0.6rem;
  }
  .tip-card p {
    font-size: 0.9rem;
    line-height: 1.4;
    white-space: pre-line;
  }

  /* Safety Plan */
  #safety-plan-form {
    max-width: 600px;
    margin: 0 auto 3rem auto;
    padding: 1rem;
    background: #f0f7ff;
    border-radius: 12px;
    box-shadow: 0 4px 12px rgba(102, 166, 255, 0.25);
  }
  #safety-plan-form label {
    font-weight: 600;
    margin-top: 1rem;
    display: block;
  }
  #safety-plan-form textarea {
    width: 100%;
    border: 2px solid #2980b9;
    border-radius: 8px;
    padding: 0.7rem;
    font-size: 1rem;
    resize: vertical;
    transition: border-color 0.3s ease;
  }
  #safety-plan-form textarea:focus {
    outline: none;
    border-color: #66a6ff;
    background: #e9f0ff;
  }
  #safety-plan-form button {
    margin-top: 1.5rem;
    background: #2980b9;
    color: white;
    border: none;
    padding: 0.8rem 1.4rem;
    border-radius: 8px;
    cursor: pointer;
    font-weight: 700;
    transition: background 0.3s ease;
  }
  #safety-plan-form button:hover {
    background: #1a4f8b;
  }

  /* Printable Checklist */
  #printable-checklist, #printable-checklist-fr {
    max-width: 700px;
    margin: 0 auto 3rem auto;
    background: #f0f7ff;
    border-radius: 12px;
    padding: 1.5rem 2rem;
    box-shadow: 0 4px 12px rgba(102, 166, 255, 0.25);
    color: #2c3e50;
  }
  #printable-checklist ul, #printable-checklist-fr ul {
    font-size: 1.1rem;
    line-height: 1.6;
    list-style-position: inside;
  }
  #printable-checklist button, #printable-checklist-fr button {
    margin-top: 1rem;
    background: #2980b9;
    color: white;
    border: none;
    padding: 0.7rem 1.2rem;
    border-radius: 8px;
    cursor: pointer;
    font-weight: 600;
    transition: background 0.3s ease;
  }
  #printable-checklist button:hover, #printable-checklist-fr button:hover {
    background: #1a4f8b;
  }
  .no-print {
    display: inline-block;
  }

  /* Hide French by default */
  .language-content.hidden {
    display: none;
  }

  /* Panic Exit Button */
  #panic-exit {
    position: fixed;
    bottom: 15px;
    right: 15px;
    background: #e74c3c;
    border: none;
    padding: 0.8rem 1.2rem;
    border-radius: 50px;
    color: white;
    font-weight: 700;
    cursor: pointer;
    box-shadow: 0 4px 10px rgba(231, 76, 60, 0.6);
    z-index: 1000;
    transition: background 0.3s ease;
  }
  #panic-exit:hover {
    background: #c0392b;
  }

  /* Breathing exercise */
  #breathing {
    position: fixed;
    bottom: 20px;
    left: 20px;
    background: rgba(102, 166, 255, 0.85);
    color: white;
    font-weight: 700;
    padding: 0.8rem 1rem 0.8rem 60px;
    border-radius: 50px;
    font-size: 1rem;
    user-select: none;
    display: flex;
    align-items: center;
    gap: 1rem;
    box-shadow: 0 4px 12px rgba(102, 166, 255, 0.7);
    z-index: 1000;
  }
  #breath-circle {
    width: 48px;
    height: 48px;
    border: 3.5px solid white;
    border-radius: 50%;
    animation: breatheAnim 8s ease-in-out infinite;
    box-shadow: 0 0 10px rgba(255 255 255 / 0.6);
  }

  @keyframes breatheAnim {
    0%, 100% {
      transform: scale(1);
      opacity: 1;
      box-shadow: 0 0 10px rgba(255 255 255 / 0.6);
    }
    50% {
      transform: scale(1.5);
      opacity: 0.7;
      box-shadow: 0 0 25px rgba(255 255 255 / 0.9);
    }
  }

  /* Responsive */
  @media (max-width: 600px) {
    #app {
      padding: 1rem;
    }
    .tips-grid, .resource-grid {
      grid-template-columns: 1fr !important;
    }
    .tip-card, .resource-card {
      width: 100% !important;
    }
  }
</style>
</head>
<body>

<div id="app">

  <div id="language-toggle" aria-label="Toggle language">
    <button id="en-btn" class="active" aria-pressed="true" aria-label="English" onclick="showLanguage('en')">English</button>
    <button id="fr-btn" aria-pressed="false" aria-label="Fran√ßais" onclick="showLanguage('fr')">Fran√ßais</button>
  </div>

  <!-- English Content -->
  <div id="en-content" class="language-content">

    <header class="header" role="banner" aria-label="Crisis Support Header">
      <h1>üÜò Crisis Support Toolkit</h1>
      <p class="subtitle" style="font-weight: 600;">Immediate help and resources for Canada and the United States</p>
      <p><strong>You are not alone. Help is available 24/7.</strong></p>
    </header>

    <section class="emergency-banner" role="alert" aria-live="assertive" aria-atomic="true">
      <h2>üö® EMERGENCY NUMBERS</h2>
      <p><strong>If you are in immediate danger, call:</strong></p>
      <div class="emergency-numbers">
        <div class="emergency-number"><span class="number">911</span><span>Emergency Canada & U.S.</span></div>
        <div class="emergency-number"><span class="number">988</span><span>Suicide & Crisis Lifeline (U.S.)</span></div>
        <div class="emergency-number"><span class="number">1-833-456-4566</span><span>Canada Suicide Prevention</span></div>
      </div>
    </section>

    <section class="content-section" aria-label="Canadian Crisis Resources">
      <h2 class="section-title"><span class="icon">üá®üá¶</span> CANADA - Crisis Resources</h2>
      <div class="resource-grid">
        <article class="resource-card" role="region" aria-labelledby="can1-title">
          <h3 id="can1-title" class="resource-title">Canada Suicide Prevention Service</h3>
          <p class="resource-description">Bilingual 24/7 support for anyone experiencing suicidal thoughts or concerned about someone else.</p>
          <div class="contact-info">
            <div class="contact-method"><span class="icon">üìû</span><a href="tel:1-833-456-4566" class="phone-number">1-833-456-4566</a></div>
            <div class="contact-method"><span class="icon">üí¨</span><span>Text: 45645</span></div>
            <div class="contact-method"><span class="icon">üåê</span><a href="https://www.crisisservicescanada.ca/en/" class="website" target="_blank" rel="noopener">crisisservicescanada.ca</a></div>
          </div>
        </article>

        <article class="resource-card" role="region" aria-labelledby="can2-title">
          <h3 id="can2-title" class="resource-title">Kids Help Phone (Jeunesse, J'√©coute)</h3>
          <p class="resource-description">24/7 support for youth. Professional counseling, information, and referrals.</p>
          <div class="contact-info">
            <div class="contact-method"><span class="icon">üìû</span><a href="tel:1-800-668-6868" class="phone-number">1-800-668-6868</a></div>
            <div class="contact-method"><span class="icon">üí¨</span><span>Text: PARLER to 686868</span></div>
            <div class="contact-method"><span class="icon">üåê</span><a href="https://kidshelpphone.ca" class="website" target="_blank" rel="noopener">kidshelpphone.ca</a></div>
          </div>
        </article>

        <article class="resource-card" role="region" aria-labelledby="can3-title">
          <h3 id="can3-title" class="resource-title">Trans Lifeline Canada</h3>
          <p class="resource-description">Peer support hotline for transgender people in crisis (Canada-specific).</p>
          <div class="contact-info">
            <div class="contact-method"><span class="icon">üìû</span><a href="tel:1-877-330-6366" class="phone-number">1-877-330-6366</a></div>
            <div class="contact-method"><span class="icon">üåê</span><a href="https://www.translifeline.org" class="website" target="_blank" rel="noopener">translifeline.org</a></div>
          </div>
        </article>

        <article class="resource-card" role="region" aria-labelledby="can4-title">
          <h3 id="can4-title" class="resource-title">Canadian Mental Health Association (CMHA)</h3>
          <p class="resource-description">Local mental health services and support across Canada.</p>
          <div class="contact-info">
            <div class="contact-method"><span class="icon">üåê</span><a href="https://cmha.ca" class="website" target="_blank" rel="noopener">cmha.ca</a></div>
          </div>
        </article>
      </div>
    </section>

    <section class="content-section" aria-label="US Crisis Resources">
      <h2 class="section-title"><span class="icon">üá∫üá∏</span> UNITED STATES - Crisis Resources</h2>
      <div class="resource-grid">
        <article class="resource-card" role="region" aria-labelledby="us1-title">
          <h3 id="us1-title" class="resource-title">988 Suicide & Crisis Lifeline</h3>
          <p class="resource-description">Free, confidential 24/7 support for people in distress and their loved ones.</p>
          <div class="contact-info">
            <div class="contact-method"><span class="icon">üìû</span><a href="tel:988" class="phone-number">988</a></div>
            <div class="contact-method"><span class="icon">üí¨</span><span>Text: 988</span></div>
            <div class="contact-method"><span class="icon">üíª</span><span>Chat: 988lifeline.org</span></div>
            <div class="contact-method"><span class="icon">üåê</span><a href="https://988lifeline.org" class="website" target="_blank" rel="noopener">988lifeline.org</a></div>
          </div>
        </article>

        <article class="resource-card" role="region" aria-labelledby="us2-title">
          <h3 id="us2-title" class="resource-title">National Sexual Assault Hotline</h3>
          <p class="resource-description">24/7 confidential support for survivors of sexual assault.</p>
          <div class="contact-info">
            <div class="contact-method"><span class="icon">üìû</span><a href="tel:1-800-656-4673" class="phone-number">1-800-656-4673</a></div>
            <div class="contact-method"><span class="icon">üåê</span><a href="https://rainn.org" class="website" target="_blank" rel="noopener">rainn.org</a></div>
          </div>
        </article>

        <article class="resource-card" role="region" aria-labelledby="us3-title">
          <h3 id="us3-title" class="resource-title">Trans Lifeline</h3>
          <p class="resource-description">Peer support hotline for transgender people in crisis.</p>
          <div class="contact-info">
            <div class="contact-method"><span class="icon">üìû</span><a href="tel:877-565-8860" class="phone-number">877-565-8860</a></div>
            <div class="contact-method"><span class="icon">üåê</span><a href="https://translifeline.org" class="website" target="_blank" rel="noopener">translifeline.org</a></div>
          </div>
        </article>
      </div>
    </section>

    <section class="tips-section" aria-label="Crisis Support Tips">
      <h2 class="tips-title">üí° Crisis Support Tips</h2>
      <div class="tips-grid">
        <div class="tip-card" role="region" aria-labelledby="tip1-title">
          <h3 id="tip1-title" class="tip-title">If You're in Crisis</h3>
          <p>‚Ä¢ Reach out immediately - don't wait<br>‚Ä¢ Stay with trusted friends or family<br>‚Ä¢ Remove means of self-harm<br>‚Ä¢ Go to the nearest emergency room if needed</p>
        </div>
        <div class="tip-card" role="region" aria-labelledby="tip2-title">
          <h3 id="tip2-title" class="tip-title">Supporting Someone Else</h3>
          <p>‚Ä¢ Listen without judgment<br>‚Ä¢ Take all threats seriously<br>‚Ä¢ Don't leave them alone<br>‚Ä¢ Help them connect with professional support</p>
        </div>
        <div class="tip-card" role="region" aria-labelledby="tip3-title">
          <h3 id="tip3-title" class="tip-title">Self-Care Strategies</h3>
          <p>‚Ä¢ Practice deep breathing<br>‚Ä¢ Stay connected with support systems<br>‚Ä¢ Maintain routines when possible<br>‚Ä¢ Seek professional help early</p>
        </div>
      </div>
    </section>

    <section aria-label="Safety Plan Generator">
      <h2 style="text-align:center; margin-bottom: 1rem;">üõ°Ô∏è Personalized Safety Plan</h2>
      <form id="safety-plan-form" aria-describedby="safety-plan-desc">
        <p id="safety-plan-desc" style="font-style:italic; margin-bottom:1rem; text-align:center;">
          Fill in the sections below to create a downloadable safety plan PDF.
        </p>

        <label for="warningSigns">Warning Signs (thoughts, feelings, behaviors)</label>
        <textarea id="warningSigns" rows="4" placeholder="e.g., Feeling hopeless, withdrawing from friends..."></textarea>

        <label for="copingStrategies">Coping Strategies (what helps you feel better)</label>
        <textarea id="copingStrategies" rows="4" placeholder="e.g., Taking a walk, listening to music..."></textarea>

        <label for="supportContacts">Support Contacts (people or resources you can reach out to)</label>
        <textarea id="supportContacts" rows="4" placeholder="e.g., Best friend: 555-123-4567, Crisis hotline..."></textarea>

        <button type="button" onclick="downloadSafetyPlan('en')">Download Safety Plan PDF</button>
      </form>
    </section>

    <section aria-label="Printable Crisis Checklist">
      <div id="printable-checklist">
        <h2>üìù Printable Crisis Checklist</h2>
        <ul>
          <li>Reach out immediately if you are in crisis.</li>
          <li>Stay with trusted friends or family.</li>
          <li>Remove anything that could be dangerous.</li>
          <li>Practice deep breathing exercises.</li>
          <li>Follow your personalized safety plan.</li>
          <li>Seek professional help as soon as possible.</li>
          <li>Keep emergency numbers accessible.</li>
        </ul>
        <button class="btn-primary no-print" onclick="window.print()">Print Checklist</button>
      </div>
    </section>

  </div>

  <!-- French Content -->
  <div id="fr-content" class="language-content hidden">

    <header class="header" role="banner" aria-label="En-t√™te de la trousse d'aide en crise">
      <h1>üÜò Trousse d'aide en situation de crise</h1>
      <p class="subtitle" style="font-weight: 600;">Aide imm√©diate et ressources pour le Canada et les √âtats-Unis</p>
      <p><strong>Vous n'√™tes pas seul(e). De l'aide est disponible 24h/24, 7j/7.</strong></p>
    </header>

    <section class="emergency-banner" role="alert" aria-live="assertive" aria-atomic="true">
      <h2>üö® NUM√âROS D'URGENCE</h2>
      <p><strong>Si vous √™tes en danger imm√©diat, appelez :</strong></p>
      <div class="emergency-numbers">
        <div class="emergency-number"><span class="number">911</span><span>Urgence Canada & √âtats-Unis</span></div>
        <div class="emergency-number"><span class="number">988</span><span>Ligne de crise suicide (√â.-U.)</span></div>
        <div class="emergency-number"><span class="number">1-833-456-4566</span><span>Pr√©vention du suicide Canada</span></div>
      </div>
    </section>

    <section class="content-section" aria-label="Ressources canadiennes d'aide en crise">
      <h2 class="section-title"><span class="icon">üá®üá¶</span> CANADA - Ressources d'aide en crise</h2>
      <div class="resource-grid">
        <article class="resource-card" role="region" aria-labelledby="canfr1-title">
          <h3 id="canfr1-title" class="resource-title">Service canadien de pr√©vention du suicide</h3>
          <p class="resource-description">Soutien bilingue 24h/24 pour toute personne ayant des pens√©es suicidaires ou pr√©occup√©e par quelqu'un d'autre.</p>
          <div class="contact-info">
            <div class="contact-method"><span class="icon">üìû</span><a href="tel:1-833-456-4566" class="phone-number">1-833-456-4566</a></div>
            <div class="contact-method"><span class="icon">üí¨</span><span>Texto : 45645</span></div>
            <div class="contact-method"><span class="icon">üåê</span><a href="https://www.crisisservicescanada.ca/fr/" class="website" target="_blank" rel="noopener">crisisservicescanada.ca/fr</a></div>
          </div>
        </article>

        <article class="resource-card" role="region" aria-labelledby="canfr2-title">
          <h3 id="canfr2-title" class="resource-title">Jeunesse, J'√©coute</h3>
          <p class="resource-description">Soutien 24h/24 pour les jeunes. Counseling professionnel, information et r√©f√©rences.</p>
          <div class="contact-info">
            <div class="contact-method"><span class="icon">üìû</span><a href="tel:1-800-668-6868" class="phone-number">1-800-668-6868</a></div>
            <div class="contact-method"><span class="icon">üí¨</span><span>Texto : PARLER au 686868</span></div>
            <div class="contact-method"><span class="icon">üåê</span><a href="https://jeunessejecoute.ca" class="website" target="_blank" rel="noopener">jeunessejecoute.ca</a></div>
          </div>
        </article>

        <article class="resource-card" role="region" aria-labelledby="canfr3-title">
          <h3 id="canfr3-title" class="resource-title">Trans Lifeline Canada</h3>
          <p class="resource-description">Ligne de soutien par les pairs pour les personnes transgenres en crise (Canada).</p>
          <div class="contact-info">
            <div class="contact-method"><span class="icon">üìû</span><a href="tel:1-877-330-6366" class="phone-number">1-877-330-6366</a></div>
            <div class="contact-method"><span class="icon">üåê</span><a href="https://www.translifeline.org" class="website" target="_blank" rel="noopener">translifeline.org</a></div>
          </div>
        </article>

        <article class="resource-card" role="region" aria-labelledby="canfr4-title">
          <h3 id="canfr4-title" class="resource-title">Association canadienne pour la sant√© mentale (ACSM)</h3>
          <p class="resource-description">Services et soutien locaux en sant√© mentale √† travers le Canada.</p>
          <div class="contact-info">
            <div class="contact-method"><span class="icon">üåê</span><a href="https://acsm.ca" class="website" target="_blank" rel="noopener">acsm.ca</a></div>
          </div>
        </article>
      </div>
    </section>

    <section class="content-section" aria-label="Ressources am√©ricaines d'aide en crise">
      <h2 class="section-title"><span class="icon">üá∫üá∏</span> √âTATS-UNIS - Ressources d'aide en crise</h2>
      <div class="resource-grid">
        <article class="resource-card" role="region" aria-labelledby="usfr1-title">
          <h3 id="usfr1-title" class="resource-title">988 Ligne de vie suicide et crise</h3>
          <p class="resource-description">Soutien gratuit et confidentiel 24h/24 pour les personnes en d√©tresse et leurs proches.</p>
          <div class="contact-info">
            <div class="contact-method"><span class="icon">üìû</span><a href="tel:988" class="phone-number">988</a></div>
            <div class="contact-method"><span class="icon">üí¨</span><span>Texto : 988</span></div>
            <div class="contact-method"><span class="icon">üíª</span><span>Chat : 988lifeline.org</span></div>
            <div class="contact-method"><span class="icon">üåê</span><a href="https://988lifeline.org" class="website" target="_blank" rel="noopener">988lifeline.org</a></div>
          </div>
        </article>

        <article class="resource-card" role="region" aria-labelledby="usfr2-title">
          <h3 id="usfr2-title" class="resource-title">Ligne d'assistance nationale pour les agressions sexuelles</h3>
          <p class="resource-description">Soutien confidentiel 24h/24 pour les survivants d'agressions sexuelles.</p>
          <div class="contact-info">
            <div class="contact-method"><span class="icon">üìû</span><a href="tel:1-800-656-4673" class="phone-number">1-800-656-4673</a></div>
            <div class="contact-method"><span class="icon">üåê</span><a href="https://rainn.org" class="website" target="_blank" rel="noopener">rainn.org</a></div>
          </div>
        </article>

        <article class="resource-card" role="region" aria-labelledby="usfr3-title">
          <h3 id="usfr3-title" class="resource-title">Trans Lifeline</h3>
          <p class="resource-description">Ligne de soutien par les pairs pour les personnes transgenres en crise.</p>
          <div class="contact-info">
            <div class="contact-method"><span class="icon">üìû</span><a href="tel:877-565-8860" class="phone-number">877-565-8860</a></div>
            <div class="contact-method"><span class="icon">üåê</span><a href="https://translifeline.org" class="website" target="_blank" rel="noopener">translifeline.org</a></div>
          </div>
        </article>
      </div>
    </section>

    <section class="tips-section" aria-label="Conseils pour le soutien en situation de crise">
      <h2 class="tips-title">üí° Conseils d'aide en situation de crise</h2>
      <div class="tips-grid">
        <div class="tip-card" role="region" aria-labelledby="tipfr1-title">
          <h3 id="tipfr1-title" class="tip-title">Si vous √™tes en crise</h3>
          <p>‚Ä¢ Demandez de l'aide imm√©diatement - ne tardez pas<br>‚Ä¢ Restez avec des amis ou de la famille de confiance<br>‚Ä¢ √âloignez-vous de tout ce qui peut √™tre dangereux<br>‚Ä¢ Rendez-vous √† l'urgence si n√©cessaire</p>
        </div>
        <div class="tip-card" role="region" aria-labelledby="tipfr2-title">
          <h3 id="tipfr2-title" class="tip-title">Soutenir quelqu'un d'autre</h3>
          <p>‚Ä¢ √âcoutez sans juger<br>‚Ä¢ Prenez toutes les menaces au s√©rieux<br>‚Ä¢ Ne les laissez pas seuls<br>‚Ä¢ Aidez-les √† trouver un soutien professionnel</p>
        </div>
        <div class="tip-card" role="region" aria-labelledby="tipfr3-title">
          <h3 id="tipfr3-title" class="tip-title">Strat√©gies d'auto-soins</h3>
          <p>‚Ä¢ Pratiquez la respiration profonde<br>‚Ä¢ Restez connect√© aux r√©seaux de soutien<br>‚Ä¢ Maintenez vos routines si possible<br>‚Ä¢ Cherchez de l'aide professionnelle t√¥t</p>
        </div>
      </div>
    </section>

    <section aria-label="G√©n√©rateur de plan de s√©curit√©">
      <h2 style="text-align:center; margin-bottom: 1rem;">üõ°Ô∏è Plan de s√©curit√© personnalis√©</h2>
      <form id="safety-plan-form-fr" aria-describedby="safety-plan-desc-fr">
        <p id="safety-plan-desc-fr" style="font-style:italic; margin-bottom:1rem; text-align:center;">
          Remplissez les sections ci-dessous pour cr√©er un plan de s√©curit√© t√©l√©chargeable au format PDF.
        </p>

        <label for="warningSignsFr">Signes avant-coureurs (pens√©es, √©motions, comportements)</label>
        <textarea id="warningSignsFr" rows="4" placeholder="ex. : Sentiment de d√©sespoir, retrait des amis..."></textarea>

        <label for="copingStrategiesFr">Strat√©gies d'adaptation (ce qui vous aide √† aller mieux)</label>
        <textarea id="copingStrategiesFr" rows="4" placeholder="ex. : Faire une promenade, √©couter de la musique..."></textarea>

        <label for="supportContactsFr">Contacts de soutien (personnes ou ressources √† contacter)</label>
        <textarea id="supportContactsFr" rows="4" placeholder="ex. : Meilleur ami : 555-123-4567, ligne de crise..."></textarea>

        <button type="button" onclick="downloadSafetyPlan('fr')">T√©l√©charger le plan de s√©curit√© (PDF)</button>
      </form>
    </section>

    <section aria-label="Liste de contr√¥le imprimable pour la crise">
      <div id="printable-checklist-fr">
        <h2>üìù Liste de contr√¥le imprimable pour la crise</h2>
        <ul>
          <li>Demandez de l'aide imm√©diatement si vous √™tes en crise.</li>
          <li>Restez avec des amis ou de la famille de confiance.</li>
          <li>√âloignez-vous de tout ce qui peut √™tre dangereux.</li>
          <li>Pratiquez des exercices de respiration profonde.</li>
          <li>Suivez votre plan de s√©curit√© personnalis√©.</li>
          <li>Demandez de l‚Äôaide professionnelle d√®s que possible.</li>
          <li>Gardez les num√©ros d'urgence accessibles.</li>
        </ul>
        <button class="btn-primary no-print" onclick="window.print()">Imprimer la liste</button>
      </div>
    </section>

  </div>
</div>

<button id="panic-exit" title="Panic Exit" aria-label="Panic Exit" onclick="panicExit()">Panic Exit</button>

<div id="breathing" title="Breathing Exercise" role="region" aria-live="polite" aria-atomic="true" aria-label="Guided breathing exercise">
  <div id="breath-circle" aria-hidden="true"></div>
  <span id="breath-text">Breathe In</span>
</div>

<script>
  // Language toggle
  function showLanguage(lang) {
    document.querySelectorAll('.language-content').forEach(div => div.classList.add('hidden'));
    if(lang === 'en') {
      document.getElementById('en-content').classList.remove('hidden');
      document.getElementById('en-btn').classList.add('active');
      document.getElementById('en-btn').setAttribute('aria-pressed', 'true');
      document.getElementById('fr-btn').classList.remove('active');
      document.getElementById('fr-btn').setAttribute('aria-pressed', 'false');
    } else {
      document.getElementById('fr-content').classList.remove('hidden');
      document.getElementById('fr-btn').classList.add('active');
      document.getElementById('fr-btn').setAttribute('aria-pressed', 'true');
      document.getElementById('en-btn').classList.remove('active');
      document.getElementById('en-btn').setAttribute('aria-pressed', 'false');
    }
  }

  // Panic Exit - instantly redirects to google or safe site
  function panicExit() {
    // Clear history and redirect so user can't go back
    window.location.replace('https://www.google.com');
  }

  // Breathing exercise timing & text animation
  const breathText = document.getElementById('breath-text');
  const breathCircle = document.getElementById('breath-circle');

  let breatheIn = true;
  function breathingCycle() {
    if (breatheIn) {
      breathText.textContent = 'Breathe In';
      breathCircle.style.animationDirection = 'normal';
    } else {
      breathText.textContent = 'Breathe Out';
      breathCircle.style.animationDirection = 'reverse';
    }
    breatheIn = !breatheIn;
  }
  breathingCycle();
  setInterval(breathingCycle, 4000); // 4 sec in, 4 sec out

  // Generate Safety Plan PDF (simple)
  async function downloadSafetyPlan(lang) {
    // Get text areas based on language
    const warningSigns = lang === 'en' ? document.getElementById('warningSigns').value.trim() : document.getElementById('warningSignsFr').value.trim();
    const copingStrategies = lang === 'en' ? document.getElementById('copingStrategies').value.trim() : document.getElementById('copingStrategiesFr').value.trim();
    const supportContacts = lang === 'en' ? document.getElementById('supportContacts').value.trim() : document.getElementById('supportContactsFr').value.trim();

    // Validate input
    if (!warningSigns && !copingStrategies && !supportContacts) {
      alert(lang === 'en' ? 'Please fill in at least one section to generate your safety plan.' : 'Veuillez remplir au moins une section pour g√©n√©rer votre plan de s√©curit√©.');
      return;
    }

    // Dynamically import jsPDF from CDN
    if (!window.jspdfLoaded) {
      await loadScript('https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js');
      window.jspdfLoaded = true;
    }

    const { jsPDF } = window.jspdf;
    const doc = new jsPDF();

    const title = lang === 'en' ? 'Personalized Safety Plan' : 'Plan de s√©curit√© personnalis√©';
    const sections = lang === 'en'
      ? [
        { title: 'Warning Signs', content: warningSigns },
        { title: 'Coping Strategies', content: copingStrategies },
        { title: 'Support Contacts', content: supportContacts }
      ]
      : [
        { title: 'Signes avant-coureurs', content: warningSigns },
        { title: 'Strat√©gies d\'adaptation', content: copingStrategies },
        { title: 'Contacts de soutien', content: supportContacts }
      ];

    doc.setFontSize(18);
    doc.setTextColor('#2980b9');
    doc.text(title, 14, 20);

    doc.setFontSize(12);
    doc.setTextColor('#2c3e50');
    let y = 35;

    sections.forEach(section => {
      if(section.content) {
        doc.setFont(undefined, 'bold');
        doc.text(section.title, 14, y);
        y += 7;
        doc.setFont(undefined, 'normal');
        // Split long text to fit page width
        const splitText = doc.splitTextToSize(section.content, 180);
        doc.text(splitText, 14, y);
        y += splitText.length * 7 + 10;
      }
    });

    doc.save(lang === 'en' ? 'Safety_Plan.pdf' : 'Plan_de_securite.pdf');
  }

  // Helper to load external script
  function loadScript(url) {
    return new Promise((resolve, reject) => {
      const script = document.createElement('script');
      script.src = url;
      script.onload = () => resolve();
      script.onerror = () => reject(new Error(`Failed to load script: ${url}`));
      document.head.appendChild(script);
    });
  }

  // Initialize with English content shown
  showLanguage('en');
</script>

</body>
</html>