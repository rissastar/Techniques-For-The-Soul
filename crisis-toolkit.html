<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Crisis Support Toolkit</title>
  <style>
    /* --- Reset and base styles --- */
    body {
      margin: 0; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: #f0f4f8; color: #2c3e50;
      padding-top: 60px; /* space for fixed nav */
      scroll-behavior: smooth;
    }
    h1, h2, h3 {
      margin: 0 0 0.5em 0;
    }
    a {
      color: #2980b9;
      text-decoration: none;
    }
    a:hover, a:focus {
      text-decoration: underline;
      outline: none;
    }
    button {
      cursor: pointer;
      font-family: inherit;
    }

    /* --- Fixed Navigation Bar --- */
    nav {
      position: fixed;
      top: 0; left: 0; right: 0;
      background: #ffffffcc;
      backdrop-filter: saturate(180%) blur(10px);
      border-bottom: 1px solid #ddd;
      z-index: 1000;
      display: flex;
      align-items: center;
      padding: 0 1rem;
      height: 60px;
      box-shadow: 0 2px 8px rgb(0 0 0 / 0.1);
    }
    nav .nav-item {
      position: relative;
      margin-right: 1rem;
    }
    nav .nav-item:last-child {
      margin-left: auto; /* Push language toggle to right */
      margin-right: 0;
    }
    nav button.dropbtn {
      background: none;
      border: none;
      font-size: 1rem;
      color: #2980b9;
      padding: 0.25rem 0.5rem;
      user-select: none;
      display: flex;
      align-items: center;
      gap: 0.25rem;
    }
    nav button.dropbtn:focus {
      outline: 2px solid #2980b9;
      outline-offset: 2px;
    }
    nav button.dropbtn .arrow {
      display: inline-block;
      transition: transform 0.3s ease;
      font-size: 0.8rem;
    }
    nav button.dropbtn[aria-expanded="true"] .arrow {
      transform: rotate(180deg);
    }
    nav .dropdown-content {
      display: none;
      position: absolute;
      top: 100%;
      left: 0;
      background: white;
      min-width: 200px;
      border: 1px solid #ddd;
      box-shadow: 0 2px 6px rgb(0 0 0 / 0.15);
      border-radius: 4px;
      padding: 0.5rem 0;
      z-index: 1100;
    }
    nav .dropdown-content a {
      display: block;
      padding: 0.5rem 1rem;
      color: #2980b9;
      text-decoration: none;
    }
    nav .dropdown-content a:hover,
    nav .dropdown-content a:focus {
      background-color: #f0f4f8;
      outline: none;
    }

    nav .dropdown-content.show {
      display: block;
    }

    /* --- Content Sections --- */
    .container {
      max-width: 900px;
      margin: 1rem auto 3rem auto;
      padding: 0 1rem;
    }

    /* Existing content styles simplified for brevity (reuse your own) */

    /* Language toggle buttons */
    #language-toggle button {
      background: #2980b9;
      color: white;
      border: none;
      border-radius: 4px;
      padding: 0.3rem 0.8rem;
      margin-left: 0.5rem;
      font-weight: 600;
    }
    #language-toggle button.active {
      background: #1b4f72;
    }
    #language-toggle button:focus {
      outline: 2px solid #1b4f72;
      outline-offset: 2px;
    }

    /* Responsive */
    @media (max-width: 600px) {
      nav {
        flex-wrap: wrap;
        height: auto;
        padding: 0.5rem 1rem;
      }
      nav .nav-item {
        margin-bottom: 0.5rem;
      }
      nav .dropdown-content {
        min-width: 150px;
      }
    }

  </style>
</head>
<body>

  <nav role="navigation" aria-label="Main navigation">
    <div class="nav-item">
      <button class="dropbtn" aria-haspopup="true" aria-expanded="false" aria-controls="emergency-menu" id="emergency-btn">
        Emergency Numbers <span class="arrow">‚ñº</span>
      </button>
      <div id="emergency-menu" class="dropdown-content" role="menu" aria-labelledby="emergency-btn">
        <a href="#emergency-numbers" role="menuitem" tabindex="-1">Emergency Numbers</a>
      </div>
    </div>

    <div class="nav-item">
      <button class="dropbtn" aria-haspopup="true" aria-expanded="false" aria-controls="resources-menu" id="resources-btn">
        Resources <span class="arrow">‚ñº</span>
      </button>
      <div id="resources-menu" class="dropdown-content" role="menu" aria-labelledby="resources-btn">
        <a href="#canada-resources" role="menuitem" tabindex="-1">Canada Resources</a>
        <a href="#us-resources" role="menuitem" tabindex="-1">US Resources</a>
      </div>
    </div>

    <div class="nav-item">
      <button class="dropbtn" aria-haspopup="true" aria-expanded="false" aria-controls="tips-menu" id="tips-btn">
        Crisis Support Tips <span class="arrow">‚ñº</span>
      </button>
      <div id="tips-menu" class="dropdown-content" role="menu" aria-labelledby="tips-btn">
        <a href="#crisis-tips" role="menuitem" tabindex="-1">Tips Section</a>
      </div>
    </div>

    <div class="nav-item">
      <button class="dropbtn" aria-haspopup="true" aria-expanded="false" aria-controls="safetyplan-menu" id="safetyplan-btn">
        Safety Plan <span class="arrow">‚ñº</span>
      </button>
      <div id="safetyplan-menu" class="dropdown-content" role="menu" aria-labelledby="safetyplan-btn">
        <a href="#safety-plan-generator" role="menuitem" tabindex="-1">Safety Plan Generator</a>
      </div>
    </div>

    <div class="nav-item">
      <button class="dropbtn" aria-haspopup="true" aria-expanded="false" aria-controls="checklist-menu" id="checklist-btn">
        Checklist <span class="arrow">‚ñº</span>
      </button>
      <div id="checklist-menu" class="dropdown-content" role="menu" aria-labelledby="checklist-btn">
        <a href="#printable-checklist" role="menuitem" tabindex="-1">Printable Checklist</a>
      </div>
    </div>

    <div class="nav-item" id="language-toggle" role="region" aria-label="Language selection">
      <button id="en-btn" aria-pressed="true" class="active" onclick="showLanguage('en')">English</button>
      <button id="fr-btn" aria-pressed="false" onclick="showLanguage('fr')">Fran√ßais</button>
    </div>
  </nav>

  <div class="container">

    <!-- English Content -->
    <div id="en-content" class="language-content" lang="en">

      <header class="header" role="banner">
        <h1>üÜò Crisis Support Toolkit</h1>
        <p class="subtitle" style="font-weight: 600;">Immediate help and resources for Canada & the United States</p>
        <p><strong>You are not alone. Help is available 24/7.</strong></p>
      </header>

      <section id="emergency-numbers" class="emergency-banner" role="alert" aria-live="assertive" aria-atomic="true">
        <h2>üö® Emergency Numbers</h2>
        <p><strong>If you are in immediate danger, call:</strong></p>
        <div class="emergency-numbers">
          <div class="emergency-number"><span class="number">911</span> Emergency Canada & US</div>
          <div class="emergency-number"><span class="number">988</span> Suicide Crisis Line (US)</div>
          <div class="emergency-number"><span class="number">1-833-456-4566</span> Suicide Prevention Canada</div>
        </div>
      </section>

      <section id="canada-resources" class="content-section" aria-label="Canada crisis resources">
        <h2 class="section-title"><span class="icon">üá®üá¶</span> CANADA - Crisis Support Resources</h2>
        <div class="resource-grid" role="list">
          <article class="resource-card" role="listitem" aria-labelledby="can1-title">
            <h3 id="can1-title" class="resource-title">Canadian Suicide Prevention Service</h3>
            <p class="resource-description">24/7 bilingual support for anyone with suicidal thoughts or concerned about someone else.</p>
            <div class="contact-info">
              <div class="contact-method"><span class="icon">üìû</span><a href="tel:1-833-456-4566" class="phone-number">1-833-456-4566</a></div>
              <div class="contact-method"><span class="icon">üí¨</span> Text: 45645</div>
              <div class="contact-method"><span class="icon">üåê</span><a href="https://www.crisisservicescanada.ca/en/" class="website" target="_blank" rel="noopener">crisisservicescanada.ca</a></div>
            </div>
          </article>

          <article class="resource-card" role="listitem" aria-labelledby="can2-title">
            <h3 id="can2-title" class="resource-title">Jeunesse, J'√©coute</h3>
            <p class="resource-description">24/7 support for youth. Professional counseling, information, and referrals.</p>
            <div class="contact-info">
              <div class="contact-method"><span class="icon">üìû</span><a href="tel:1-800-668-6868" class="phone-number">1-800-668-6868</a></div>
              <div class="contact-method"><span class="icon">üí¨</span> Text: TALK to 686868</div>
              <div class="contact-method"><span class="icon">üåê</span><a href="https://jeunessejecoute.ca" class="website" target="_blank" rel="noopener">jeunessejecoute.ca</a></div>
            </div>
          </article>

          <article class="resource-card" role="listitem" aria-labelledby="can3-title">
            <h3 id="can3-title" class="resource-title">Trans Lifeline Canada</h3>
            <p class="resource-description">Peer support hotline for transgender people in crisis (Canada).</p>
            <div class="contact-info">
              <div class="contact-method"><span class="icon">üìû</span><a href="tel:1-877-330-6366" class="phone-number">1-877-330-6366</a></div>
              <div class="contact-method"><span class="icon">üåê</span><a href="https://www.translifeline.org" class="website" target="_blank" rel="noopener">translifeline.org</a></div>
            </div>
          </article>

          <article class="resource-card" role="listitem" aria-labelledby="can4-title">
            <h3 id="can4-title" class="resource-title">Canadian Mental Health Association (CMHA)</h3>
            <p class="resource-description">Local mental health services and support across Canada.</p>
            <div class="contact-info">
              <div class="contact-method"><span class="icon">üåê</span><a href="https://cmha.ca" class="website" target="_blank" rel="noopener">cmha.ca</a></div>
            </div>
          </article>
        </div>
      </section>

      <section id="us-resources" class="content-section" aria-label="US crisis resources">
        <h2 class="section-title"><span class="icon">üá∫üá∏</span> UNITED STATES - Crisis Support Resources</h2>
        <div class="resource-grid" role="list">
          <article class="resource-card" role="listitem" aria-labelledby="us1-title">
            <h3 id="us1-title" class="resource-title">988 Suicide & Crisis Lifeline</h3>
            <p class="resource-description">Free and confidential support 24/7 for people in distress and their loved ones.</p>
            <div class="contact-info">
              <div class="contact-method"><span class="icon">üìû</span><a href="tel:988" class="phone-number">988</a></div>
              <div class="contact-method"><span class="icon">üí¨</span> Text: 988</div>
              <div class="contact-method"><span class="icon">üíª</span> Chat: 988lifeline.org</div>
              <div class="contact-method"><span class="icon">üåê</span><a href="https://988lifeline.org" class="website" target="_blank" rel="noopener">988lifeline.org</a></div>
            </div>
          </article>

          <article class="resource-card" role="listitem" aria-labelledby="us2-title">
            <h3 id="us2-title" class="resource-title">National Sexual Assault Hotline</h3>
            <p class="resource-description">24/7 confidential support for survivors of sexual assault.</p>
            <div class="contact-info">
              <div class="contact-method"><span class="icon">üìû</span><a href="tel:1-800-656-4673" class="phone-number">1-800-656-4673</a></div>
              <div class="contact-method"><span class="icon">üåê</span><a href="https://rainn.org" class="website" target="_blank" rel="noopener">rainn.org</a></div>
            </div>
          </article>

          <article class="resource-card" role="listitem" aria-labelledby="us3-title">
            <h3 id="us3-title" class="resource-title">Trans Lifeline</h3>
            <p class="resource-description">Peer support hotline for transgender people in crisis.</p>
            <div class="contact-info">
              <div class="contact-method"><span class="icon">üìû</span><a href="tel:877-565-8860" class="phone-number">877-565-8860</a></div>
              <div class="contact-method"><span class="icon">üåê</span><a href="https://translifeline.org" class="website" target="_blank" rel="noopener">translifeline.org</a></div>
            </div>
          </article>
        </div>
      </section>

      <section id="crisis-tips" class="tips-section" aria-label="Crisis Support Tips">
        <h2 class="tips-title">üí° Crisis Support Tips</h2>
        <div class="tips-grid">
          <div class="tip-card" role="region" aria-labelledby="tip1-title">
            <h3 id="tip1-title" class="tip-title">If You're in Crisis</h3>
            <p>‚Ä¢ Reach out immediately - don't wait<br>‚Ä¢ Stay with trusted friends or family<br>‚Ä¢ Remove means of self-harm<br>‚Ä¢ Go to the nearest emergency room if needed</p>
          </div>
          <div class="tip-card" role="region" aria-labelledby="tip2-title">
            <h3 id="tip2-title" class="tip-title">Supporting Someone Else</h3>
            <p>‚Ä¢ Listen without judgment<br>‚Ä¢ Take all threats seriously<br>‚Ä¢ Don't leave them alone<br>‚Ä¢ Help them connect with professional support</p>
          </div>
          <div class="tip-card" role="region" aria-labelledby="tip3-title">
            <h3 id="tip3-title" class="tip-title">Self-Care Strategies</h3>
            <p>‚Ä¢ Practice deep breathing<br>‚Ä¢ Stay connected with support systems<br>‚Ä¢ Maintain routines when possible<br>‚Ä¢ Seek professional help early</p>
          </div>
        </div>
      </section>

      <section id="safety-plan-generator" aria-label="Safety Plan Generator">
        <h2 style="text-align:center; margin-bottom: 1rem;">üõ°Ô∏è Personalized Safety Plan</h2>
        <form id="safety-plan-form" aria-describedby="safety-plan-desc">
          <p id="safety-plan-desc" style="font-style:italic; margin-bottom:1rem; text-align:center;">
            Fill in the sections below to create a downloadable safety plan PDF.
          </p>

          <label for="warningSigns">Warning Signs (thoughts, feelings, behaviors)</label>
          <textarea id="warningSigns" rows="4" placeholder="e.g., Feeling hopeless, withdrawing from friends..."></textarea>

          <label for="copingStrategies">Coping Strategies (what helps you feel better)</label>
          <textarea id="copingStrategies" rows="4" placeholder="e.g., Taking a walk, listening to music..."></textarea>

          <label for="supportContacts">Support Contacts (people or resources you can reach out to)</label>
          <textarea id="supportContacts" rows="4" placeholder="e.g., Friend: 123-456-7890, Therapist: 987-654-3210"></textarea>

          <div style="text-align:center; margin:1rem 0;">
            <button type="button" onclick="downloadSafetyPlan('en')" style="background:#2980b9; color:#fff; padding:0.5rem 1rem; border:none; border-radius:4px; font-weight:600;">
              Download Safety Plan PDF
            </button>
          </div>
        </form>
      </section>

      <section id="printable-checklist" aria-label="Printable Crisis Checklist">
        <h2 style="text-align:center; margin-bottom: 1rem;">üìù Printable Crisis Checklist</h2>
        <ul style="max-width: 600px; margin: 0 auto; list-style: none; padding: 0;">
          <li><input type="checkbox" id="chk1" /><label for="chk1"> Reach out to someone you trust</label></li>
          <li><input type="checkbox" id="chk2" /><label for="chk2"> Remove access to means of self-harm</label></li>
          <li><input type="checkbox" id="chk3" /><label for="chk3"> Practice deep breathing exercises</label></li>
          <li><input type="checkbox" id="chk4" /><label for="chk4"> Stay with trusted friends or family</label></li>
          <li><input type="checkbox" id="chk5" /><label for="chk5"> Go to the nearest emergency room if needed</label></li>
          <li><input type="checkbox" id="chk6" /><label for="chk6"> Use helplines and crisis resources</label></li>
        </ul>
        <div style="text-align:center; margin:1rem 0;">
          <button onclick="window.print()" style="background:#27ae60; color:#fff; padding:0.5rem 1rem; border:none; border-radius:4px; font-weight:600;">
            Print Checklist
          </button>
        </div>
      </section>

      <!-- Breathing Exercise -->
      <div aria-label="Breathing exercise" style="position: fixed; bottom: 1rem; left: 1rem; width: 120px; height: 120px; user-select:none;">
        <svg id="breath-circle" width="120" height="120" viewBox="0 0 120 120" xmlns="http://www.w3.org/2000/svg">
          <circle cx="60" cy="60" r="50" stroke="#2980b9" stroke-width="8" fill="none" />
          <circle cx="60" cy="60" r="40" stroke="#3498db" stroke-width="6" fill="#a9cce3" />
        </svg>
        <div id="breath-text" style="text-align:center; font-weight:600; color:#2980b9; margin-top:0.5rem;">Breathe In</div>
      </div>

      <!-- Panic Exit Button -->
      <button
        aria-label="Panic exit, redirect to safe page"
        onclick="panicExit()"
        style="position: fixed; bottom: 1rem; right: 1rem; background: #e74c3c; color: white; border: none; padding: 0.5rem 1rem; border-radius: 6px; font-weight: 700; font-size: 1rem;"
      >
        Panic Exit
      </button>

    </div>

    <!-- French Content -->
    <div id="fr-content" class="language-content hidden" lang="fr">

      <header class="header" role="banner">
        <h1>üÜò Trousse d'aide en situation de crise</h1>
        <p class="subtitle" style="font-weight: 600;">Aide imm√©diate et ressources pour le Canada et les √âtats-Unis</p>
        <p><strong>Vous n'√™tes pas seul(e). De l'aide est disponible 24h/24, 7j/7.</strong></p>
      </header>

      <section id="emergency-numbers-fr" class="emergency-banner" role="alert" aria-live="assertive" aria-atomic="true">
        <h2>üö® NUM√âROS D'URGENCE</h2>
        <p><strong>Si vous √™tes en danger imm√©diat, appelez :</strong></p>
        <div class="emergency-numbers">
          <div class="emergency-number"><span class="number">911</span> Urgence Canada et √âtats-Unis</div>
          <div class="emergency-number"><span class="number">988</span> Ligne de crise suicide (√â.-U.)</div>
          <div class="emergency-number"><span class="number">1-833-456-4566</span> Pr√©vention du suicide Canada</div>
        </div>
      </section>

      <section id="canada-resources-fr" class="content-section" aria-label="Ressources d'aide en crise au Canada">
        <h2 class="section-title"><span class="icon">üá®üá¶</span> CANADA - Ressources d'aide en crise</h2>
        <div class="resource-grid" role="list">
          <article class="resource-card" role="listitem" aria-labelledby="canfr1-title">
            <h3 id="canfr1-title" class="resource-title">Service canadien de pr√©vention du suicide</h3>
            <p class="resource-description">Soutien bilingue 24h/24 pour toute personne ayant des pens√©es suicidaires ou pr√©occup√©e par quelqu'un d'autre.</p>
            <div class="contact-info">
              <div class="contact-method"><span class="icon">üìû</span><a href="tel:1-833-456-4566" class="phone-number">1-833-456-4566</a></div>
              <div class="contact-method"><span class="icon">üí¨</span> Texto : 45645</div>
              <div class="contact-method"><span class="icon">üåê</span><a href="https://crisisservicescanada.ca" class="website" target="_blank" rel="noopener">crisisservicescanada.ca</a></div>
            </div>
          </article>

          <article class="resource-card" role="listitem" aria-labelledby="canfr2-title">
            <h3 id="canfr2-title" class="resource-title">Jeunesse, J'√©coute</h3>
            <p class="resource-description">Soutien 24h/24 pour les jeunes. Counseling professionnel, information et r√©f√©rences.</p>
            <div class="contact-info">
              <div class="contact-method"><span class="icon">üìû</span><a href="tel:1-800-668-6868" class="phone-number">1-800-668-6868</a></div>
              <div class="contact-method"><span class="icon">üí¨</span> Texto : PARLER au 686868</div>
              <div class="contact-method"><span class="icon">üåê</span><a href="https://jeunessejecoute.ca" class="website" target="_blank" rel="noopener">jeunessejecoute.ca</a></div>
            </div>
          </article>

          <article class="resource-card" role="listitem" aria-labelledby="canfr3-title">
            <h3 id="canfr3-title" class="resource-title">Trans Lifeline Canada</h3>
            <p class="resource-description">Ligne d‚Äôassistance entre pairs pour les personnes transgenres en crise (Canada).</p>
            <div class="contact-info">
              <div class="contact-method"><span class="icon">üìû</span><a href="tel:1-877-330-6366" class="phone-number">1-877-330-6366</a></div>
              <div class="contact-method"><span class="icon">üåê</span><a href="https://translifeline.org" class="website" target="_blank" rel="noopener">translifeline.org</a></div>
            </div>
          </article>

          <article class="resource-card" role="listitem" aria-labelledby="canfr4-title">
            <h3 id="canfr4-title" class="resource-title">Association canadienne pour la sant√© mentale</h3>
            <p class="resource-description">Services locaux en sant√© mentale √† travers le Canada.</p>
            <div class="contact-info">
              <div class="contact-method"><span class="icon">üåê</span><a href="https://acsm.ca" class="website" target="_blank" rel="noopener">acsm.ca</a></div>
            </div>
          </article>
        </div>
      </section>

      <section id="us-resources-fr" class="content-section" aria-label="Ressources d'aide en crise aux √âtats-Unis">
        <h2 class="section-title"><span class="icon">üá∫üá∏</span> √âTATS-UNIS - Ressources d'aide en crise</h2>
        <div class="resource-grid" role="list">
          <article class="resource-card" role="listitem" aria-labelledby="usfr1-title">
            <h3 id="usfr1-title" class="resource-title">988 Ligne de vie suicide et crise</h3>
            <p class="resource-description">Soutien gratuit et confidentiel 24h/24 pour les personnes en d√©tresse et leurs proches.</p>
            <div class="contact-info">
              <div class="contact-method"><span class="icon">üìû</span><a href="tel:988" class="phone-number">988</a></div>
              <div class="contact-method"><span class="icon">üí¨</span> Texto : 988</div>
              <div class="contact-method"><span class="icon">üíª</span> Chat : 988lifeline.org</div>
              <div class="contact-method"><span class="icon">üåê</span><a href="https://988lifeline.org" class="website" target="_blank" rel="noopener">988lifeline.org</a></div>
            </div>
          </article>

          <article class="resource-card" role="listitem" aria-labelledby="usfr2-title">
            <h3 id="usfr2-title" class="resource-title">Ligne nationale d'assistance en cas d'agression sexuelle</h3>
            <p class="resource-description">Soutien confidentiel 24h/24 pour les survivants d'agression sexuelle.</p>
            <div class="contact-info">
              <div class="contact-method"><span class="icon">üìû</span><a href="tel:1-800-656-4673" class="phone-number">1-800-656-4673</a></div>
              <div class="contact-method"><span class="icon">üåê</span><a href="https://rainn.org" class="website" target="_blank" rel="noopener">rainn.org</a></div>
            </div>
          </article>

          <article class="resource-card" role="listitem" aria-labelledby="usfr3-title">
            <h3 id="usfr3-title" class="resource-title">Trans Lifeline</h3>
            <p class="resource-description">Ligne d'assistance entre pairs pour les personnes transgenres en crise.</p>
            <div class="contact-info">
              <div class="contact-method"><span class="icon">üìû</span><a href="tel:877-565-8860" class="phone-number">877-565-8860</a></div>
              <div class="contact-method"><span class="icon">üåê</span><a href="https://translifeline.org" class="website" target="_blank" rel="noopener">translifeline.org</a></div>
            </div>
          </article>
        </div>
      </section>

      <section id="safety-plan-generator-fr" aria-label="G√©n√©rateur de plan de s√©curit√©">
        <h2 style="text-align:center; margin-bottom: 1rem;">üõ°Ô∏è Plan de s√©curit√© personnalis√©</h2>
        <form id="safety-plan-form-fr" aria-describedby="safety-plan-desc-fr">
          <p id="safety-plan-desc-fr" style="font-style:italic; margin-bottom:1rem; text-align:center;">
            Remplissez les sections ci-dessous pour cr√©er un PDF t√©l√©chargeable de votre plan de s√©curit√©.
          </p>

          <label for="warningSignsFr">Signes avant-coureurs (pens√©es, sentiments, comportements)</label>
          <textarea id="warningSignsFr" rows="4" placeholder="ex: Se sentir d√©sesp√©r√©, s‚Äôisoler..."></textarea>

          <label for="copingStrategiesFr">Strat√©gies d'adaptation (ce qui vous aide)</label>
          <textarea id="copingStrategiesFr" rows="4" placeholder="ex: Faire une promenade, √©couter de la musique..."></textarea>

          <label for="supportContactsFr">Contacts de soutien (personnes ou ressources)</label>
          <textarea id="supportContactsFr" rows="4" placeholder="ex: Ami : 123-456-7890, Th√©rapeute : 987-654-3210"></textarea>

          <div style="text-align:center; margin:1rem 0;">
            <button type="button" onclick="downloadSafetyPlan('fr')" style="background:#2980b9; color:#fff; padding:0.5rem 1rem; border:none; border-radius:4px; font-weight:600;">
              T√©l√©charger le plan de s√©curit√© PDF
            </button>
          </div>
        </form>
      </section>

      <section id="printable-checklist-fr" aria-label="Liste de v√©rification imprimable en cas de crise">
        <h2 style="text-align:center; margin-bottom: 1rem;">üìù Liste de v√©rification imprimable en cas de crise</h2>
        <ul style="max-width: 600px; margin: 0 auto; list-style: none; padding: 0;">
          <li><input type="checkbox" id="chk1fr" /><label for="chk1fr"> Contactez quelqu'un en qui vous avez confiance</label></li>
          <li><input type="checkbox" id="chk2fr" /><label for="chk2fr"> Retirez l'acc√®s aux moyens de se faire du mal</label></li>
          <li><input type="checkbox" id="chk3fr" /><label for="chk3fr"> Pratiquez des exercices de respiration profonde</label></li>
          <li><input type="checkbox" id="chk4fr" /><label for="chk4fr"> Restez avec des amis ou de la famille en qui vous avez confiance</label></li>
          <li><input type="checkbox" id="chk5fr" /><label for="chk5fr"> Allez √† l'urgence la plus proche si n√©cessaire</label></li>
          <li><input type="checkbox" id="chk6fr" /><label for="chk6fr"> Utilisez les lignes d'assistance et ressources de crise</label></li>
        </ul>
        <div style="text-align:center; margin:1rem 0;">
          <button onclick="window.print()" style="background:#27ae60; color:#fff; padding:0.5rem 1rem; border:none; border-radius:4px; font-weight:600;">
            Imprimer la liste de v√©rification
          </button>
        </div>
      </section>

    </div>

  </div>

<script>
  // Language toggle
  function showLanguage(lang) {
    const enContent = document.getElementById('en-content');
    const frContent = document.getElementById('fr-content');
    const enBtn = document.getElementById('en-btn');
    const frBtn = document.getElementById('fr-btn');

    if(lang === 'en') {
      enContent.classList.remove('hidden');
      frContent.classList.add('hidden');
      enBtn.classList.add('active');
      enBtn.setAttribute('aria-pressed', 'true');
      frBtn.classList.remove('active');
      frBtn.setAttribute('aria-pressed', 'false');
    } else {
      frContent.classList.remove('hidden');
      enContent.classList.add('hidden');
      frBtn.classList.add('active');
      frBtn.setAttribute('aria-pressed', 'true');
      enBtn.classList.remove('active');
      enBtn.setAttribute('aria-pressed', 'false');
    }
    closeAllDropdowns();
  }

  // Panic Exit - instantly redirects to google or safe site
  function panicExit() {
    window.location.replace('https://www.google.com');
  }

  // Breathing exercise timing & text animation
  const breathText = document.getElementById('breath-text');
  const breathCircle = document.getElementById('breath-circle');

  let breatheIn = true;
  function breathingCycle() {
    if (breatheIn) {
      breathText.textContent = 'Breathe In';
      breathCircle.style.animation = 'expand 4000ms ease-in-out forwards';
    } else {
      breathText.textContent = 'Breathe Out';
      breathCircle.style.animation = 'contract 4000ms ease-in-out forwards';
    }
    breatheIn = !breatheIn;
  }
  breathingCycle();
  setInterval(breathingCycle, 8000);

  // Safety plan PDF generator
  async function downloadSafetyPlan(lang) {
    const warningSigns = lang === 'en' ? document.getElementById('warningSigns').value.trim() : document.getElementById('warningSignsFr').value.trim();
    const copingStrategies = lang === 'en' ? document.getElementById('copingStrategies').value.trim() : document.getElementById('copingStrategiesFr').value.trim();
    const supportContacts = lang === 'en' ? document.getElementById('supportContacts').value.trim() : document.getElementById('supportContactsFr').value.trim();

    if (!warningSigns && !copingStrategies && !supportContacts) {
      alert(lang === 'en' ? 'Please fill in at least one section to generate your safety plan.' : 'Veuillez remplir au moins une section pour g√©n√©rer votre plan de s√©curit√©.');
      return;
    }

    if (!window.jspdfLoaded) {
      await loadScript('https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js');
      window.jspdfLoaded = true;
    }

    const { jsPDF } = window.jspdf;
    const doc = new jsPDF();

    const title = lang === 'en' ? 'Safety Plan' : 'Plan de s√©curit√©';
    doc.setFontSize(18);
    doc.text(title, 105, 20, null, null, 'center');

    doc.setFontSize(12);
    let y = 35;
    if (warningSigns) {
      doc.setFont(undefined, 'bold');
      doc.text(lang === 'en' ? 'Warning Signs:' : 'Signes avant-coureurs :', 15, y);
      y += 6;
      doc.setFont(undefined, 'normal');
      y = addMultilineText(doc, warningSigns, 15, y, 180, 6);
      y += 4;
    }
    if (copingStrategies) {
      doc.setFont(undefined, 'bold');
      doc.text(lang === 'en' ? 'Coping Strategies:' : 'Strat√©gies d\'adaptation :', 15, y);
      y += 6;
      doc.setFont(undefined, 'normal');
      y = addMultilineText(doc, copingStrategies, 15, y, 180, 6);
      y += 4;
    }
    if (supportContacts) {
      doc.setFont(undefined, 'bold');
      doc.text(lang === 'en' ? 'Support Contacts:' : 'Contacts de soutien :', 15, y);
      y += 6;
      doc.setFont(undefined, 'normal');
      y = addMultilineText(doc, supportContacts, 15, y, 180, 6);
    }

    doc.save(lang === 'en' ? 'SafetyPlan.pdf' : 'PlanSecurite.pdf');
  }

  function addMultilineText(doc, text, x, y, maxWidth, lineHeight) {
    const lines = doc.splitTextToSize(text, maxWidth);
    lines.forEach(line => {
      doc.text(line, x, y);
      y += lineHeight;
    });
    return y;
  }

  // Utility to load external scripts dynamically
  function loadScript(src) {
    return new Promise((resolve, reject) => {
      const script = document.createElement('script');
      script.src = src;
      script.onload = () => resolve();
      script.onerror = () => reject(new Error(`Failed to load script: ${src}`));
      document.head.appendChild(script);
    });
  }

  // Dropdown menus toggle logic
  const dropButtons = document.querySelectorAll('nav button.dropbtn');

  dropButtons.forEach(btn => {
    btn.addEventListener('click', () => {
      const expanded = btn.getAttribute('aria-expanded') === 'true';
      closeAllDropdowns();
      if (!expanded) {
        btn.setAttribute('aria-expanded', 'true');
        const menu = document.getElementById(btn.getAttribute('aria-controls'));
        if (menu) menu.classList.add('show');
      }
    });
  });

  // Close all dropdowns helper
  function closeAllDropdowns() {
    dropButtons.forEach(btn => btn.setAttribute('aria-expanded', 'false'));
    document.querySelectorAll('.dropdown-content').forEach(menu => menu.classList.remove('show'));
  }

  // Close dropdowns if clicked outside nav
  document.addEventListener('click', (e) => {
    if (!e.target.closest('nav')) {
      closeAllDropdowns();
    }
  });

  // Accessibility: keyboard navigation support for dropdowns
  dropButtons.forEach(btn => {
    btn.addEventListener('keydown', (e) => {
      if (e.key === 'Escape' || e.key === 'Esc') {
        closeAllDropdowns();
        btn.focus();
      }
    });
  });
</script>

<style>
  /* Breathing circle animations */
  @keyframes expand {
    0% { r: 40; }
    50% { r: 50; }
    100% { r: 40; }
  }
  @keyframes contract {
    0% { r: 50; }
    50% { r: 40; }
    100% { r: 50; }
  }

  /* Hide language content */
  .hidden {
    display: none;
  }
</style>

</body>
</html>