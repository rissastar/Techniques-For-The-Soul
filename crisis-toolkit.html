<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0" />
  <meta name="theme-color" content="#ffffff" />
  <title>Crisis Support Toolkit</title>
  <link rel="manifest" href="data:application/manifest+json,{%22name%22:%22Crisis%20Support%22,%22short_name%22:%22Support%22,%22start_url%22:%22.%22,%22display%22:%22standalone%22,%22background_color%22:%22%23ffffff%22,%22theme_color%22:%22%23ffffff%22,%22icons%22:[{%22src%22:%22https://cdn-icons-png.flaticon.com/512/3064/3064197.png%22,%22sizes%22:%22192x192%22,%22type%22:%22image/png%22}]}">
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      font-family: 'Segoe UI', sans-serif;
      background: linear-gradient(to bottom right, #f5f7fa, #c3cfe2);
      color: #333;
      padding: 1rem;
    }
    h1, h2, h3 {
      margin-bottom: 0.5rem;
    }
    .container {
      max-width: 960px;
      margin: 0 auto;
      background: #fff;
      padding: 2rem;
      border-radius: 10px;
      box-shadow: 0 8px 24px rgba(0, 0, 0, 0.1);
    }
    .dropdown, .section, .assessment, .resource {
      margin-bottom: 2rem;
    }
    select, button {
      padding: 0.6rem 1rem;
      border-radius: 6px;
      border: 1px solid #ccc;
      font-size: 1rem;
      margin-right: 1rem;
    }
    .resource {
      background: #f0f4f8;
      padding: 1rem;
      border-left: 5px solid #3182ce;
      border-radius: 8px;
    }
    .resource h3 { margin-bottom: 0.25rem; }
    .resource a {
      color: #2b6cb0;
      text-decoration: underline;
    }
    .assessment label {
      display: block;
      margin-bottom: 0.5rem;
    }
    .assessment-question {
      margin-bottom: 1.5rem;
    }
    .badge {
      display: inline-block;
      padding: 0.2rem 0.6rem;
      font-size: 0.75rem;
      background: #edf2f7;
      color: #2c5282;
      border-radius: 4px;
      margin-left: 0.5rem;
    }
    .result-box {
      padding: 1rem;
      border-radius: 8px;
      background: #fefcbf;
      border-left: 5px solid #ecc94b;
      margin-top: 1rem;
    }
    footer {
      text-align: center;
      font-size: 0.8rem;
      color: #666;
      margin-top: 2rem;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>üìû Crisis Support Toolkit</h1>
    <p>Select your country to view local mental health and crisis resources.</p>

    <div class="dropdown">
      <label for="country-select">üåç Country:</label>
      <select id="country-select">
        <option value="canada" selected>üá®üá¶ Canada</option>
        <option value="usa">üá∫üá∏ United States</option>
      </select>
    </div>

    <div id="resources" class="section">
      <h2>üö® Crisis Hotlines</h2>
      <!-- Resources will be injected here -->
    </div>

    <button onclick="toggleAssessment()">üß† Take Mental Health Self-Assessment</button>

    <div id="assessment" class="assessment" style="display:none;">
      <h2>üìù Self-Assessment</h2>
      <form id="assessment-form">
        <!-- Questions injected here -->
      </form>
      <button onclick="calculateScore()">‚úÖ Get Results</button>
      <div id="result"></div>
    </div>

  <script>
    const resources = {
      canada: [
        {
          name: "9-8-8 Suicide Crisis Helpline",
          phone: "988",
          description: "Free 24/7 suicide prevention support. Call or text.",
          priority: true
        },
        {
          name: "Kids Help Phone",
          phone: "1-800-668-6868",
          description: "Support for youth in Canada. Call or text 686868."
        },
        {
          name: "Crisis Services Canada",
          phone: "1-833-456-4566",
          description: "24/7 phone support for mental health crises."
        }
      ],
      usa: [
        {
          name: "988 Suicide & Crisis Lifeline",
          phone: "988",
          description: "24/7 confidential support for people in distress.",
          priority: true
        },
        {
          name: "Crisis Text Line",
          phone: "741741",
          description: "Text HOME to 741741 from anywhere in the U.S."
        },
        {
          name: "SAMHSA National Helpline",
          phone: "1-800-662-HELP",
          description: "Substance abuse and mental health help, 24/7."
        }
      ]
    };

    const questions = [
      "How often have you felt down, depressed, or hopeless?",
      "Little interest or pleasure in doing things?",
      "Trouble falling or staying asleep, or sleeping too much?",
      "Feeling tired or having little energy?",
      "Poor appetite or overeating?",
      "Feeling bad about yourself or that you‚Äôre a failure?",
      "Trouble concentrating on things?",
      "Moving or speaking slowly or being fidgety?",
      "Thoughts you would be better off dead?",
      "Feeling nervous, anxious, or on edge?"
    ];

    function renderResources(country) {
      const container = document.getElementById("resources");
      container.innerHTML = "<h2>üö® Crisis Hotlines</h2>";
      resources[country].forEach(r => {
        const div = document.createElement("div");
        div.className = "resource";
        div.innerHTML = `
          <h3>${r.name} ${r.priority ? '<span class="badge">Priority</span>' : ''}</h3>
          <p>${r.description}</p>
          <p>üìû <a href="tel:${r.phone}">${r.phone}</a></p>
        `;
        container.appendChild(div);
      });
    }

    function toggleAssessment() {
      const section = document.getElementById("assessment");
      section.style.display = section.style.display === "none" ? "block" : "none";
      if (section.style.display === "block") renderAssessment();
    }

    function renderAssessment() {
      const form = document.getElementById("assessment-form");
      form.innerHTML = "";
      questions.forEach((q, i) => {
        const div = document.createElement("div");
        div.className = "assessment-question";
        div.innerHTML = `
          <label>${i + 1}. ${q}</label>
          <select name="q${i}">
            <option value="0">Not at all</option>
            <option value="1">Several days</option>
            <option value="2">More than half the days</option>
            <option value="3">Nearly every day</option>
          </select>
        `;
        form.appendChild(div);
      });
    }

    function calculateScore() {
      const form = document.getElementById("assessment-form");
      const result = document.getElementById("result");
      let score = 0;
      for (let i = 0; i < questions.length; i++) {
        const val = parseInt(form.elements["q" + i].value);
        score += val;
      }
      let level = "", message = "";
      if (score >= 20) {
        level = "üö® High Risk";
        message = "Please reach out to crisis support right away. You're not alone.";
      } else if (score >= 10) {
        level = "‚ö†Ô∏è Moderate Risk";
        message = "Consider talking to a therapist or using self-care strategies.";
      } else {
        level = "‚úÖ Low Risk";
        message = "You're doing okay, but keep monitoring your feelings.";
      }
      result.innerHTML = `
        <div class="result-box">
          <h3>${level}</h3>
          <p>${message}</p>
          <p><strong>Total Score:</strong> ${score}</p>
        </div>
      `;
    }

    document.getElementById("country-select").addEventListener("change", (e) => {
      renderResources(e.target.value);
    });

    window.onload = () => {
      renderResources("canada");
      if ('serviceWorker' in navigator) {
        navigator.serviceWorker.register('data:text/javascript,' + encodeURIComponent(`
          self.addEventListener('install', e => {
            e.waitUntil(
              caches.open('crisis-v1').then(cache => {
                return cache.addAll(['.']);
              })
            );
          });
          self.addEventListener('fetch', e => {
            e.respondWith(
              caches.match(e.request).then(response => response || fetch(e.request))
            );
          });
        `));
      }
    };
  </script>

  <footer>
    <p>‚ù§Ô∏è You are not alone. Support is always available.</p>
    <p><small>Offline capable. Built with love and hope.</small></p>
  </footer>
</body>
</html>