<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
<title>Self-Care Toolkit</title>
<style>
  /* RESET & BASE */
  *, *::before, *::after {
    box-sizing: border-box;
  }
  body {
    margin: 0; padding: 0;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background: #fff8f0;
    color: #333;
    min-height: 100vh;
    display: flex;
    flex-direction: column;
  }
  header, footer {
    background: linear-gradient(90deg, #6c5b7b, #355c7d);
    color: #fff;
    text-align: center;
    padding: 1rem 1.5rem;
    font-family: 'Poppins', sans-serif;
    font-weight: 700;
    user-select: none;
  }
  main {
    flex-grow: 1;
    max-width: 900px;
    margin: 1rem auto 3rem;
    padding: 0 1rem 1rem;
  }
  h1, h2 {
    margin: 0;
  }
  h1 {
    font-size: 2rem;
    letter-spacing: 0.08em;
  }
  h2 {
    font-family: 'Poppins', sans-serif;
    color: #5a476b;
    margin: 1.5rem 0 1rem;
    font-weight: 700;
    font-size: 1.5rem;
  }
  /* LANGUAGE TOGGLE BUTTON */
  #lang-toggle {
    position: fixed;
    top: 1rem;
    right: 1rem;
    background: #f67280;
    border: none;
    border-radius: 24px;
    padding: 0.3rem 0.8rem;
    font-size: 1.4rem;
    cursor: pointer;
    box-shadow: 0 4px 8px rgb(246 114 128 / 0.5);
    color: #fff;
    user-select: none;
    transition: background-color 0.3s ease;
    z-index: 9999;
  }
  #lang-toggle:hover, #lang-toggle:focus {
    background-color: #c3505a;
    outline: none;
  }

  /* SECTIONS */
  .section {
    background: #fff;
    border-radius: 12px;
    box-shadow: 0 5px 15px rgb(0 0 0 / 0.1);
    padding: 1rem 1.25rem 1.5rem;
    margin-bottom: 1.5rem;
  }
  /* CENTERED ELEMENTS */
  .center {
    text-align: center;
  }
  /* BREATHING CIRCLE */
  #breath-circle {
    width: 140px;
    height: 140px;
    margin: 1.2rem auto;
    border: 6px solid #6c5b7b;
    border-radius: 50%;
    animation: breathe 8s ease-in-out infinite;
    box-shadow: 0 0 12px #6c5b7b44;
  }
  @keyframes breathe {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(1.3); }
  }
  /* AFFIRMATION */
  #af-display {
    font-size: 1.15rem;
    font-style: italic;
    margin-bottom: 0.9rem;
    color: #6c5b7b;
    min-height: 3em;
  }
  /* BUTTONS */
  button {
    cursor: pointer;
    border: none;
    border-radius: 28px;
    padding: 0.65rem 1.8rem;
    font-weight: 700;
    font-family: 'Poppins', sans-serif;
    font-size: 1rem;
    background: linear-gradient(135deg, #f67280, #c06c84);
    color: white;
    box-shadow: 0 6px 14px rgb(192 108 132 / 0.6);
    transition: background 0.3s ease, box-shadow 0.3s ease;
  }
  button:hover, button:focus {
    background: linear-gradient(135deg, #c06c84, #f67280);
    box-shadow: 0 8px 20px #f6728077;
    outline: none;
  }
  /* FLIP CARD (Challenge) */
  .card {
    perspective: 1100px;
    width: 90%;
    max-width: 420px;
    margin: 1rem auto 0 auto;
    cursor: pointer;
    user-select: none;
    height: 140px;
  }
  .inner {
    position: relative;
    width: 100%;
    height: 100%;
    transition: transform 0.7s cubic-bezier(0.4, 0, 0.2, 1);
    transform-style: preserve-3d;
    border-radius: 12px;
    box-shadow: 0 6px 20px rgb(0 0 0 / 0.12);
  }
  .card.flipped .inner {
    transform: rotateY(180deg);
  }
  .front, .back {
    position: absolute;
    width: 100%;
    height: 100%;
    border-radius: 12px;
    backface-visibility: hidden;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 1rem 1.2rem;
    font-size: 1.1rem;
    font-weight: 600;
    text-align: center;
    line-height: 1.3;
    user-select: none;
  }
  .front {
    background: #f8b500;
    color: #3a3a3a;
  }
  .back {
    background: #355c7d;
    color: white;
    transform: rotateY(180deg);
  }
  /* DOODLE PAD */
  #canvas {
    border: 3px solid #6c5b7b;
    border-radius: 10px;
    display: block;
    margin: 1rem auto 0 auto;
    touch-action: none;
    width: 100%;
    max-width: 100%;
    height: 250px;
    box-shadow: inset 0 0 8px #6c5b7b33;
  }
  /* Doodle Pad Buttons */
  .doodle-buttons {
    display: flex;
    gap: 1rem;
    justify-content: center;
    margin-top: 0.75rem;
    flex-wrap: wrap;
  }
  /* GRATITUDE LOG */
  .gratitude-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit,minmax(110px,1fr));
    gap: 1rem;
    margin-top: 0.5rem;
  }
  .gratitude-grid label {
    font-weight: 600;
    margin-bottom: 0.3rem;
    display: block;
  }
  .gratitude-grid input {
    width: 100%;
    padding: 0.4rem 0.6rem;
    font-size: 1rem;
    border: 1.8px solid #ccc;
    border-radius: 6px;
    transition: border-color 0.3s ease;
  }
  .gratitude-grid input:focus {
    border-color: #f67280;
    outline: none;
    box-shadow: 0 0 8px #f6728040;
  }
  /* NEEDS PICKER */
  #np-select {
    width: 100%;
    max-width: 280px;
    font-size: 1rem;
    padding: 0.5rem;
    border-radius: 8px;
    border: 1.8px solid #ccc;
    margin-top: 0.4rem;
    transition: border-color 0.3s ease;
  }
  #np-select:focus {
    border-color: #355c7d;
    outline: none;
    box-shadow: 0 0 8px #355c7d80;
  }
  #np-suggestion {
    margin-top: 0.8rem;
    font-style: italic;
    font-weight: 600;
    color: #5a476b;
    max-width: 320px;
  }
  /* PLAN BUILDER */
  #pb-goals {
    width: 100%;
    max-width: 320px;
    font-size: 1rem;
    padding: 0.4rem 0.6rem;
    border-radius: 6px;
    border: 1.8px solid #ccc;
    margin: 0.4rem 0 1rem;
    min-height: 110px;
    user-select: none;
  }
  #pb-output {
    font-size: 1rem;
    line-height: 1.4;
    max-width: 320px;
    margin: 0 auto 1rem auto;
    padding-left: 1.3rem;
    color: #555;
  }
  #pb-output li {
    margin-bottom: 0.4rem;
  }
  /* RESPONSIVE */
  @media (max-width: 480px) {
    #breath-circle {
      width: 120px;
      height: 120px;
      border-width: 5px;
    }
    .card {
      width: 100%;
      height: 120px;
    }
    .front, .back {
      font-size: 1rem;
      padding: 0.7rem 1rem;
    }
    #pb-goals {
      max-height: 140px;
    }
  }
</style>
</head>
<body>

<button id="lang-toggle" aria-label="Toggle Language">üá´üá∑</button>

<header>
  <h1 id="title">Self-Care Toolkit</h1>
</header>

<main>

  <!-- Guided Breathing -->
  <section class="section center" aria-label="Guided Breathing Section">
    <h2 id="br-title">Guided Breathing</h2>
    <div id="breath-circle" aria-hidden="true"></div>
    <p id="br-text" aria-live="polite" aria-atomic="true">Inhale... Exhale...</p>
  </section>

  <!-- Affirmation Generator -->
  <section class="section" aria-label="Daily Affirmation Section">
    <h2 id="af-title">Daily Affirmation</h2>
    <p id="af-display" aria-live="polite" aria-atomic="true" tabindex="0" role="text">‚ÄúYou are enough.‚Äù</p>
    <button id="af-btn" aria-label="Generate new affirmation">New Affirmation</button>
  </section>

  <!-- 30-Day Challenge -->
  <section class="section center" aria-label="30 Day Self-Care Challenge">
    <h2 id="ch-title">30-Day Self-Care Challenge</h2>
    <div class="card" id="challenge-card" tabindex="0" role="button" aria-pressed="false" aria-label="Tap or press space to flip challenge card">
      <div class="inner">
        <div class="front" id="ch-front">Tap to see your challenge</div>
        <div class="back" id="ch-back"></div>
      </div>
    </div>
    <small id="ch-day">Day 1 of 30</small>
  </section>

  <!-- Doodle Pad -->
  <section class="section" aria-label="Doodle Pad Section">
    <h2 id="dd-title">Doodle Pad</h2>
    <canvas id="canvas" width="400" height="250" aria-label="Drawing canvas" role="img"></canvas>
    <div class="doodle-buttons">
      <button id="dd-clear" aria-label="Clear doodle pad">Clear</button>
      <button id="dd-save" aria-label="Download doodle as PNG">Download PNG</button>
    </div>
  </section>

  <!-- Gratitude Log -->
  <section class="section" aria-label="Gratitude Log Section">
    <h2 id="gr-title">Gratitude Log</h2>
    <div class="gratitude-grid">
      <div>
        <label id="gr-label1" for="gr1">1.</label>
        <input type="text" id="gr1" aria-describedby="gr-label1" placeholder="..." />
      </div>
      <div>
        <label id="gr-label2" for="gr2">2.</label>
        <input type="text" id="gr2" aria-describedby="gr-label2" placeholder="..." />
      </div>
      <div>
        <label id="gr-label3" for="gr3">3.</label>
        <input type="text" id="gr3" aria-describedby="gr-label3" placeholder="..." />
      </div>
    </div>
    <button id="gr-save" aria-label="Save gratitude entries">Save Gratitudes</button>
  </section>

  <!-- Needs Picker -->
  <section class="section" aria-label="Needs Picker Section">
    <h2 id="np-title">What Do I Need Right Now?</h2>
    <select id="np-select" aria-describedby="np-title">
      <option value="">‚Äî</option>
    </select>
    <p id="np-suggestion" aria-live="polite" aria-atomic="true"></p>
  </section>

  <!-- Plan Builder -->
  <section class="section" aria-label="Self-Care Plan Builder Section">
    <h2 id="pb-title">Build Your Self-Care Plan</h2>
    <label id="pb-label-goals" for="pb-goals">Select Goals:</label>
    <select id="pb-goals" multiple size="5" aria-describedby="pb-label-goals">
      <option value="morning">Morning Routine</option>
      <option value="evening">Evening Wind-Down</option>
      <option value="stress">Stress Relief</option>
      <option value="focus">Boost Focus</option>
      <option value="sleep">Improve Sleep</option>
    </select>
    <button id="pb-build" aria-label="Generate self-care plan">Generate Plan</button>
    <ul id="pb-output" class="plan-list" aria-live="polite" aria-atomic="true"></ul>
    <button id="pb-export" aria-label="Download self-care plan as PDF">Download Plan (PDF)</button>
  </section>

</main>

<footer id="footer-text">¬© 2025 Self-Care Toolkit</footer>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script>
(() => {
  const texts = {
    en: {
      langBtn: 'üá´üá∑',
      title: 'Self-Care Toolkit',
      brTitle: 'Guided Breathing',
      brText: 'Inhale... Exhale...',
      afTitle: 'Daily Affirmation',
      chTitle: '30-Day Self-Care Challenge',
      ddTitle: 'Doodle Pad',
      grTitle: 'Gratitude Log',
      grLabels: ['1.', '2.', '3.'],
      grSave: 'Save Gratitudes',
      npTitle: 'What Do I Need Right Now?',
      pbTitle: 'Build Your Self-Care Plan',
      pbBuild: 'Generate Plan',
      pbExport: 'Download Plan (PDF)',
      footer: '¬© 2025 Self-Care Toolkit',
      needs: {
        Comfort: 'Comfort',
        Inspiration: 'Inspiration',
        Motivation: 'Motivation',
        Rest: 'Rest'
      },
      needsSug: {
        Comfort: 'Take a warm bath or wrap yourself in a cozy blanket.',
        Inspiration: 'Read an inspiring quote or watch a motivational talk.',
        Motivation: 'Set a small goal and reward yourself when you achieve it.',
        Rest: 'Take a short nap or practice gentle stretches.'
      },
      affirmations: [
        'You are enough.',
        'I choose peace today.',
        'I am stronger than my challenges.',
        'I deserve care and kindness.',
        'Every breath renews me.'
      ],
      challenges: [
        'Write down 3 things you‚Äôre grateful for.',
        'Take a 10-minute mindful walk.',
        'Drink an extra glass of water.',
        'Do 5 minutes of stretching.',
        'Call a friend for a quick chat.',
        'Spend 5 minutes meditating.',
        'Write a short journal entry.',
        'Draw or doodle for 10 minutes.',
        'Listen to your favorite song.',
        'Practice deep breathing for 3 minutes.',
        'Declutter one small space.',
        'Write down a positive memory.',
        'Try a new recipe.',
        'Watch a funny video.',
        'Do 10 jumping jacks.',
        'Read a poem.',
        'Send a thank-you message.',
        'Spend time outside.',
        'Practice gratitude before sleep.',
        'Try a guided meditation.',
        'Write a letter to yourself.',
        'Listen to calming music.',
        'Take a digital detox hour.',
        'Practice a hobby for 15 minutes.',
        'Write a compliment to yourself.',
        'Practice mindful eating.',
        'Watch the sunset or sunrise.',
        'Do a random act of kindness.',
        'Spend 10 minutes journaling.',
        'Plan a fun outing.'
      ],
      planItems: {
        morning: ['Drink a glass of water', 'Stretch for 5 minutes', 'Write a morning affirmation'],
        evening: ['Write down 3 gratitudes', 'Read for 10 minutes', 'Practice gentle yoga'],
        stress: ['Do 5 deep breaths', 'Listen to calming music', 'Take a short walk'],
        focus: ['Use Pomodoro (25/5)', 'Eliminate distractions', 'Set 3 top priorities'],
        sleep: ['Turn off screens 30min before bed', 'Practice relaxation', 'Keep a consistent bedtime']
      }
    },
    fr: {
      langBtn: 'üá¨üáß',
      title: 'Trousse de Soins Personnels',
      brTitle: 'Respiration Guid√©e',
      brText: 'Inspirez... Expirez...',
      afTitle: 'Affirmation Quotidienne',
      chTitle: 'D√©fi de 30 Jours',
      ddTitle: 'Bloc √† Gribouiller',
      grTitle: 'Journal de Gratitude',
      grLabels: ['1.', '2.', '3.'],
      grSave: 'Enregistrer Gratitudes',
      npTitle: 'De quoi ai-je besoin maintenant ?',
      pbTitle: 'Cr√©ez Votre Plan',
      pbBuild: 'G√©n√©rer le Plan',
      pbExport: 'T√©l√©charger le Plan (PDF)',
      footer: '¬© 2025 Trousse de Soins',
      needs: {
        Comfort: 'Confort',
        Inspiration: 'Inspiration',
        Motivation: 'Motivation',
        Rest: 'Repos'
      },
      needsSug: {
        Confort: 'Prenez un bain chaud ou enveloppez-vous dans une couverture douillette.',
        Inspiration: 'Lisez une citation inspirante ou regardez un discours motivant.',
        Motivation: 'Fixez-vous un petit objectif et r√©compensez-vous.',
        Repos: 'Faites une sieste courte ou des √©tirements doux.'
      },
      affirmations: [
        'Vous √™tes assez.',
        'Je choisis la paix aujourd‚Äôhui.',
        'Je suis plus fort(e) que mes d√©fis.',
        'Je m√©rite soin et gentillesse.',
        'Chaque respiration me renouvelle.'
      ],
      challenges: [
        '√âcrivez 3 choses pour lesquelles vous √™tes reconnaissant(e).',
        'Faites une promenade consciente de 10 minutes.',
        'Buvez un verre d‚Äôeau suppl√©mentaire.',
        'Faites 5 minutes d‚Äô√©tirements.',
        'Appelez un ami pour discuter.',
        'M√©ditez 5 minutes.',
        '√âcrivez une entr√©e de journal.',
        'Gribouillez ou dessinez 10 minutes.',
        '√âcoutez votre chanson pr√©f√©r√©e.',
        'Pratiquez la respiration profonde 3 minutes.',
        'D√©sencombrez un petit espace.',
        '√âcrivez un souvenir positif.',
        'Essayez une nouvelle recette.',
        'Regardez une vid√©o dr√¥le.',
        'Faites 10 sauts sur place.',
        'Lisez un po√®me.',
        'Envoyez un message de remerciement.',
        'Passez du temps dehors.',
        'Pratiquez la gratitude avant de dormir.',
        'Essayez une m√©ditation guid√©e.',
        '√âcrivez une lettre √† vous-m√™me.',
        '√âcoutez de la musique apaisante.',
        'Faites une heure sans num√©rique.',
        'Pratiquez un passe-temps 15 minutes.',
        'Faites-vous un compliment.',
        'Mangez en pleine conscience.',
        'Regardez le coucher ou lever du soleil.',
        'Faites une bonne action au hasard.',
        'Passez 10 minutes √† √©crire.',
        'Planifiez une sortie amusante.'
      ],
      planItems: {
        morning: ['Buvez un verre d‚Äôeau', '√âtirez-vous 5 minutes', '√âcrivez une affirmation matinale'],
        evening: ['√âcrivez 3 gratitudes', 'Lisez 10 minutes', 'Faites du yoga doux'],
        stress: ['Prenez 5 respirations', '√âcoutez musique apaisante', 'Faites une courte marche'],
        focus: ['Utilisez Pomodoro (25/5)', '√âliminez distractions', 'Fixez 3 priorit√©s'],
        sleep: ['√âteignez √©crans 30 min avant le lit', 'Pratiquez relaxation', 'Heure de coucher r√©guli√®re']
      }
    }
  };

  // Shortcuts
  const $ = id => document.getElementById(id);
  let lang = localStorage.getItem('sc_lang') || 'en';

  // Set ARIA pressed for challenge card
  function setCardPressed(pressed) {
    $('challenge-card').setAttribute('aria-pressed', pressed ? 'true' : 'false');
  }

  // Apply UI texts based on language
  function applyText() {
    const t = texts[lang];
    $('lang-toggle').textContent = t.langBtn;
    $('title').textContent = t.title;
    $('br-title').textContent = t.brTitle;
    $('br-text').textContent = t.brText;
    $('af-title').textContent = t.afTitle;
    $('ch-title').textContent = t.chTitle;
    $('dd-title').textContent = t.ddTitle;
    $('gr-title').textContent = t.grTitle;
    $('gr-label1').textContent = t.grLabels[0];
    $('gr-label2').textContent = t.grLabels[1];
    $('gr-label3').textContent = t.grLabels[2];
    $('gr-save').textContent = t.grSave;
    $('np-title').textContent = t.npTitle;
    $('pb-title').textContent = t.pbTitle;
    $('pb-build').textContent = t.pbBuild;
    $('pb-export').textContent = t.pbExport;
    $('footer-text').textContent = t.footer;

    // Populate needs picker options
    const np = $('np-select');
    np.innerHTML = '<option value="">‚Äî</option>';
    Object.values(t.needs).forEach(n => {
      const opt = document.createElement('option');
      opt.value = n;
      opt.textContent = n;
      np.appendChild(opt);
    });

    // Reset needs suggestion text
    $('np-suggestion').textContent = '';
  }

  // Language toggle handler
  $('lang-toggle').addEventListener('click', () => {
    lang = lang === 'en' ? 'fr' : 'en';
    localStorage.setItem('sc_lang', lang);
    applyText();
    showChallenge();
    // Reset affirmation text on language change
    $('af-display').textContent = texts[lang].affirmations[0];
  });

  // Affirmation button handler
  $('af-btn').addEventListener('click', () => {
    const arr = texts[lang].affirmations;
    const randomAff = arr[Math.floor(Math.random() * arr.length)];
    $('af-display').textContent = randomAff;
  });

  // Challenge card logic
  let dayIndex = 0;
  const totalDays = 30;

  function showChallenge() {
    const challengeText = lang === 'en' ? texts.en.challenges[dayIndex] : texts.fr.challenges[dayIndex];
    $('ch-back').textContent = challengeText;
    $('ch-day').textContent = lang === 'en'
      ? `Day ${dayIndex + 1} of ${totalDays}`
      : `Jour ${dayIndex + 1} sur ${totalDays}`;
  }

  function flipCard() {
    const card = $('challenge-card');
    if (!card.classList.contains('flipped')) {
      card.classList.add('flipped');
      setCardPressed(true);
      showChallenge();
    } else {
      card.classList.remove('flipped');
      setCardPressed(false);
      dayIndex = (dayIndex + 1) % totalDays;
      // Show front text reset
      $('ch-front').textContent = lang === 'en' ? 'Tap to see your challenge' : 'Appuyez pour voir votre d√©fi';
    }
  }

  $('challenge-card').addEventListener('click', flipCard);
  // Support keyboard flip on Enter/Space
  $('challenge-card').addEventListener('keydown', e => {
    if (e.key === 'Enter' || e.key === ' ') {
      e.preventDefault();
      flipCard();
    }
  });

  // Doodle Pad Logic
  const canvas = $('canvas');
  const ctx = canvas.getContext('2d');
  let painting = false;

  function startPosition(e) {
    painting = true;
    draw(e);
  }
  function finishedPosition() {
    painting = false;
    ctx.beginPath();
  }
  function draw(e) {
    if (!painting) return;
    const rect = canvas.getBoundingClientRect();
    const x = (e.touches ? e.touches[0].clientX : e.clientX) - rect.left;
    const y = (e.touches ? e.touches[0].clientY : e.clientY) - rect.top;
    ctx.lineWidth = 2;
    ctx.lineCap = 'round';
    ctx.lineTo(x, y);
    ctx.stroke();
    ctx.beginPath();
    ctx.moveTo(x, y);
  }
  canvas.addEventListener('mousedown', startPosition);
  canvas.addEventListener('touchstart', startPosition);
  canvas.addEventListener('mouseup', finishedPosition);
  canvas.addEventListener('touchend', finishedPosition);
  canvas.addEventListener('mouseout', finishedPosition);
  canvas.addEventListener('touchcancel', finishedPosition);
  canvas.addEventListener('mousemove', draw);
  canvas.addEventListener('touchmove', draw);

  $('dd-clear').addEventListener('click', () => {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
  });
  $('dd-save').addEventListener('click', () => {
    const link = document.createElement('a');
    link.download = 'doodle.png';
    link.href = canvas.toDataURL('image/png');
    link.click();
  });

  // Gratitude Log
  $('gr-save').addEventListener('click', () => {
    ['gr1', 'gr2', 'gr3'].forEach(id => {
      localStorage.setItem(id, $(id).value.trim());
    });
    alert(lang === 'en' ? 'Saved!' : 'Enregistr√© !');
  });

  // Load gratitude from localStorage
  window.addEventListener('load', () => {
    ['gr1', 'gr2', 'gr3'].forEach(id => {
      const val = localStorage.getItem(id);
      if (val) $(id).value = val;
    });
    applyText();
    // Default affirmation text
    $('af-display').textContent = texts[lang].affirmations[0];
    // Default challenge front text
    $('ch-front').textContent = lang === 'en' ? 'Tap to see your challenge' : 'Appuyez pour voir votre d√©fi';
    setCardPressed(false);
  });

  // Needs picker logic
  $('np-select').addEventListener('change', () => {
    const sel = $('np-select').value;
    const suggestions = texts[lang].needsSug;
    $('np-suggestion').textContent = sel ? suggestions[sel] || '' : '';
  });

  // Plan Builder
  $('pb-build').addEventListener('click', () => {
    const selectedGoals = [...$('pb-goals').selectedOptions].map(o => o.value);
    const out = $('pb-output');
    out.innerHTML = '';
    if (selectedGoals.length === 0) {
      out.innerHTML = lang === 'en' ? '<li>Please select at least one goal.</li>' : '<li>Veuillez s√©lectionner au moins un objectif.</li>';
      return;
    }
    selectedGoals.forEach(goal => {
      const items = texts[lang].planItems[goal] || [];
      items.forEach(i => {
        const li = document.createElement('li');
        li.textContent = i;
        out.appendChild(li);
      });
    });
  });

  // PDF Export using jsPDF
  $('pb-export').addEventListener('click', () => {
    const { jsPDF } = window.jspdf;
    const doc = new jsPDF();
    doc.setFontSize(16);
    doc.text(texts[lang].pbTitle, 14, 15);
    const items = [...$('pb-output').children].map(li => li.textContent).filter(Boolean);
    if (items.length === 0) {
      alert(lang === 'en' ? 'Please generate your plan first.' : 'Veuillez g√©n√©rer votre plan d‚Äôabord.');
      return;
    }
    doc.setFontSize(12);
    let y = 25;
    items.forEach((item, i) => {
      if (y > 270) {
        doc.addPage();
        y = 15;
      }
      doc.text(`${i + 1}. ${item}`, 14, y);
      y += 8;
    });
    doc.save('self-care-plan.pdf');
  });

})();
</script>

</body>
</html>