<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Self-Care Toolkit</title>
  <style>
    *, *::before, *::after { box-sizing: border-box; margin:0; padding:0; }
    html, body {
      font-family: 'Segoe UI', sans-serif;
      background: linear-gradient(to bottom, #ffe4e1, #f0f8ff);
      color: #333;
      min-height: 100vh;
      display: flex; flex-direction: column;
    }
    header, footer {
      background: linear-gradient(90deg, #6c5b7b, #355c7d);
      color: #fff; text-align: center;
      padding: 1rem 1.5rem;
      font-family: 'Poppins', sans-serif;
      font-weight: 700;
    }
    h1 { font-size: 2rem; letter-spacing: .05em; }
    h2 {
      font-size: 1.5rem;
      font-weight: 600;
      color: #5a476b;
      margin-top: 1.5rem;
    }
    main {
      flex: 1;
      width: 100%;
      max-width: 960px;
      margin: 1rem auto;
      padding: 0 1rem 3rem;
    }
    button {
      background: linear-gradient(135deg, #f67280, #c06c84);
      border: none;
      border-radius: 20px;
      padding: 0.6rem 1.2rem;
      color: white;
      font-size: 1rem;
      font-weight: bold;
      cursor: pointer;
      box-shadow: 0 4px 8px rgba(0,0,0,0.1);
    }
    button:hover {
      background: linear-gradient(135deg, #c06c84, #f67280);
    }
    .section {
      background: #ffffffdd;
      padding: 1rem;
      border-radius: 10px;
      box-shadow: 0 5px 15px rgba(0,0,0,0.05);
      margin-bottom: 1.5rem;
    }
    #lang-toggle {
      position: fixed;
      top: 1rem;
      right: 1rem;
      background: #f67280;
      border-radius: 20px;
      font-size: 1.4rem;
      z-index: 1000;
    }
    #breath-circle {
      width: 120px;
      height: 120px;
      margin: 1rem auto;
      border: 6px solid #6c5b7b;
      border-radius: 50%;
      animation: breathe 8s ease-in-out infinite;
    }
    @keyframes breathe {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.3); }
    }
    canvas {
      border: 2px solid #ccc;
      border-radius: 6px;
      width: 100%;
      max-width: 100%;
      height: 250px;
      display: block;
      margin: 0 auto;
      touch-action: none;
    }
    select, input[type="text"] {
      width: 100%;
      max-width: 300px;
      padding: 0.5rem;
      margin-top: 0.5rem;
      margin-bottom: 1rem;
      border: 1px solid #ccc;
      border-radius: 6px;
    }
    ul.plan-list {
      list-style: disc;
      margin-left: 1.5rem;
    }
    @media (max-width: 480px) {
      h1 { font-size: 1.6rem; }
      h2 { font-size: 1.2rem; }
      #breath-circle { width: 100px; height: 100px; }
    }
  </style>
</head>
<body>

<button id="lang-toggle" aria-label="Toggle Language">ðŸ‡«ðŸ‡·</button>

<header>
  <h1 id="title">Self-Care Toolkit</h1>
</header>

<main>
  <!-- Guided Breathing -->
  <section class="section" aria-label="Guided Breathing">
    <h2 id="br-title">Guided Breathing</h2>
    <div id="breath-circle" aria-hidden="true"></div>
    <p id="br-text" aria-live="polite">Inhale... Exhale...</p>
  </section>

  <!-- Daily Affirmation -->
  <section class="section" aria-label="Daily Affirmation">
    <h2 id="af-title">Daily Affirmation</h2>
    <p id="af-display">You are capable of great things.</p>
    <button id="af-btn">New Affirmation</button>
  </section>

  <!-- 30-Day Challenge -->
  <section class="section" aria-label="30-Day Challenge">
    <h2 id="ch-title">30-Day Self-Care Challenge</h2>
    <button id="ch-btn">Next Challenge</button>
    <p id="ch-text" style="margin-top: 0.5rem;">Tap to start the challenge!</p>
  </section>

  <!-- Doodle Pad -->
  <section class="section" aria-label="Doodle Pad">
    <h2 id="dd-title">Doodle Pad</h2>
    <canvas id="canvas" width="400" height="250"></canvas>
    <div style="margin-top:0.5rem;">
      <button id="dd-clear">Clear</button>
      <button id="dd-save">Save Drawing</button>
    </div>
  </section>

  <!-- Gratitude Log -->
  <section class="section" aria-label="Gratitude Log">
    <h2 id="gr-title">Gratitude Log</h2>
    <input type="text" id="gr1" placeholder="Gratitude 1" />
    <input type="text" id="gr2" placeholder="Gratitude 2" />
    <input type="text" id="gr3" placeholder="Gratitude 3" />
    <button id="gr-save">Save Gratitudes</button>
  </section>

  <!-- Needs Picker -->
  <section class="section" aria-label="Needs Picker">
    <h2 id="np-title">What Do I Need Right Now?</h2>
    <select id="np-select">
      <option value="">Select...</option>
    </select>
    <p id="np-suggestion"></p>
  </section>

  <!-- Self-Care Plan Builder -->
  <section class="section" aria-label="Self-Care Plan Builder">
    <h2 id="pb-title">Build Your Self-Care Plan</h2>
    <select id="pb-goals" multiple size="5">
      <option value="morning">Morning Routine</option>
      <option value="evening">Evening Routine</option>
      <option value="stress">Stress Relief</option>
      <option value="focus">Focus & Energy</option>
      <option value="sleep">Better Sleep</option>
    </select>
    <button id="pb-build">Generate Plan</button>
    <ul id="pb-output" class="plan-list"></ul>
    <button id="pb-export">Download Plan (PDF)</button>
  </section>
  
  </main>

<footer id="footer-text">Â© 2025 Self-Care Toolkit</footer>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script>
(() => {
  const $ = id => document.getElementById(id);
  let lang = localStorage.getItem('lang') || 'en';

  const texts = {
    en: {
      langBtn: "ðŸ‡«ðŸ‡·",
      title: "Self-Care Toolkit",
      brTitle: "Guided Breathing",
      brText: "Inhale... Exhale...",
      afTitle: "Daily Affirmation",
      affirmations: [
        "You are enough.", "Take it one moment at a time.",
        "You are safe right now.", "Your feelings are valid.",
        "You have overcome 100% of your hard days."
      ],
      chTitle: "30-Day Self-Care Challenge",
      challenges: [
        "Drink a glass of water", "Go for a 10-minute walk",
        "Write one thing youâ€™re proud of", "Call someone you love"
      ],
      ddTitle: "Doodle Pad",
      grTitle: "Gratitude Log",
      grSave: "Save Gratitudes",
      npTitle: "What Do I Need Right Now?",
      needs: {
        support: "Support", rest: "Rest", fun: "Fun", quiet: "Quiet"
      },
      needsSug: {
        Support: "Reach out to a friend or support line.",
        Rest: "Take a nap or close your eyes for a moment.",
        Fun: "Watch a short funny video or draw something silly.",
        Quiet: "Sit in silence for a minute and breathe."
      },
      pbTitle: "Build Your Self-Care Plan",
      pbBuild: "Generate Plan",
      pbExport: "Download Plan (PDF)",
      planItems: {
        morning: ["Stretch for 5 minutes", "Drink a full glass of water", "Write one thing you're grateful for"],
        evening: ["Unplug 30 minutes before bed", "Write in your journal", "Do a breathing exercise"],
        stress: ["Name 3 things around you", "Take 3 deep breaths", "Drink water slowly"],
        focus: ["Turn off notifications", "Write 1 task down", "Set a 10-minute timer"],
        sleep: ["Limit screens", "Take a warm shower", "Listen to calming sounds"]
      },
      footer: "Â© 2025 Self-Care Toolkit"
    },
    fr: {
      langBtn: "ðŸ‡¬ðŸ‡§",
      title: "Trousse de soins personnels",
      brTitle: "Respiration guidÃ©e",
      brText: "Inspirez... Expirez...",
      afTitle: "Affirmation quotidienne",
      affirmations: [
        "Tu es suffisantÂ·e.", "Prends un moment Ã  la fois.",
        "Tu es en sÃ©curitÃ© en ce moment.", "Tes sentiments sont valides.",
        "Tu as survÃ©cu Ã  100 % de tes jours difficiles."
      ],
      chTitle: "DÃ©fi de soins sur 30 jours",
      challenges: [
        "Bois un verre d'eau", "Fais une marche de 10 minutes",
        "Ã‰cris une chose dont tu es fierÂ·e", "Appelle quelquâ€™un que tu aimes"
      ],
      ddTitle: "Bloc Ã  dessin",
      grTitle: "Journal de gratitude",
      grSave: "Enregistrer",
      npTitle: "De quoi ai-je besoin maintenant?",
      needs: {
        support: "Soutien", rest: "Repos", fun: "Amusement", quiet: "Calme"
      },
      needsSug: {
        Soutien: "Contacte un ami ou une ligne dâ€™Ã©coute.",
        Repos: "Fais une sieste ou repose tes yeux.",
        Amusement: "Regarde une vidÃ©o drÃ´le ou dessine quelque chose.",
        Calme: "Reste en silence une minute et respire profondÃ©ment."
      },
      pbTitle: "Plan de soins personnels",
      pbBuild: "GÃ©nÃ©rer le plan",
      pbExport: "TÃ©lÃ©charger (PDF)",
      planItems: {
        morning: ["S'Ã©tirer 5 minutes", "Boire un grand verre dâ€™eau", "Ã‰crire une gratitude"],
        evening: ["DÃ©brancher 30 min avant de dormir", "Ã‰crire dans ton journal", "Faire un exercice de respiration"],
        stress: ["Nommer 3 choses autour de toi", "Prendre 3 grandes respirations", "Boire lentement de lâ€™eau"],
        focus: ["DÃ©sactiver les notifications", "Ã‰crire 1 tÃ¢che", "Minuterie de 10 min"],
        sleep: ["Ã‰viter les Ã©crans", "Prendre une douche chaude", "Ã‰couter des sons apaisants"]
      },
      footer: "Â© 2025 Trousse de soins personnels"
    }
  };

  function applyLang() {
    const t = texts[lang];
    $('lang-toggle').textContent = t.langBtn;
    $('title').textContent = t.title;
    $('br-title').textContent = t.brTitle;
    $('br-text').textContent = t.brText;
    $('af-title').textContent = t.afTitle;
    $('ch-title').textContent = t.chTitle;
    $('dd-title').textContent = t.ddTitle;
    $('gr-title').textContent = t.grTitle;
    $('gr-save').textContent = t.grSave;
    $('np-title').textContent = t.npTitle;
    $('pb-title').textContent = t.pbTitle;
    $('pb-build').textContent = t.pbBuild;
    $('pb-export').textContent = t.pbExport;
    $('footer-text').textContent = t.footer;

    // Populate Needs
    const np = $('np-select');
    np.innerHTML = '<option value="">Select...</option>';
    for (let key in t.needs) {
      const opt = document.createElement('option');
      opt.value = t.needs[key];
      opt.textContent = t.needs[key];
      np.appendChild(opt);
    }

    // Initial affirm
    $('af-display').textContent = t.affirmations[0];
  }

  $('lang-toggle').addEventListener('click', () => {
    lang = lang === 'en' ? 'fr' : 'en';
    localStorage.setItem('lang', lang);
    applyLang();
  });

  $('af-btn').addEventListener('click', () => {
    const a = texts[lang].affirmations;
    $('af-display').textContent = a[Math.floor(Math.random() * a.length)];
  });

  let challengeDay = 0;
  $('ch-btn').addEventListener('click', () => {
    const ch = texts[lang].challenges;
    $('ch-text').textContent = ch[challengeDay % ch.length];
    challengeDay++;
  });

  const canvas = $('canvas'), ctx = canvas.getContext('2d');
  let painting = false;
  function draw(e) {
    if (!painting) return;
    const rect = canvas.getBoundingClientRect();
    const x = (e.touches ? e.touches[0].clientX : e.clientX) - rect.left;
    const y = (e.touches ? e.touches[0].clientY : e.clientY) - rect.top;
    ctx.lineWidth = 2;
    ctx.lineCap = 'round';
    ctx.lineTo(x, y);
    ctx.stroke();
    ctx.beginPath();
    ctx.moveTo(x, y);
  }
  canvas.addEventListener('mousedown', () => painting = true);
  canvas.addEventListener('mouseup', () => { painting = false; ctx.beginPath(); });
  canvas.addEventListener('mousemove', draw);
  canvas.addEventListener('touchstart', () => painting = true);
  canvas.addEventListener('touchend', () => { painting = false; ctx.beginPath(); });
  canvas.addEventListener('touchmove', draw);

  $('dd-clear').addEventListener('click', () => ctx.clearRect(0, 0, canvas.width, canvas.height));
  $('dd-save').addEventListener('click', () => {
    const link = document.createElement('a');
    link.download = 'doodle.png';
    link.href = canvas.toDataURL();
    link.click();
  });

  $('gr-save').addEventListener('click', () => {
    localStorage.setItem('gr1', $('gr1').value);
    localStorage.setItem('gr2', $('gr2').value);
    localStorage.setItem('gr3', $('gr3').value);
    alert(lang === 'en' ? "Saved!" : "EnregistrÃ© !");
  });

  $('np-select').addEventListener('change', () => {
    const val = $('np-select').value;
    $('np-suggestion').textContent = texts[lang].needsSug[val] || "";
  });

  $('pb-build').addEventListener('click', () => {
    const goals = [...$('pb-goals').selectedOptions].map(o => o.value);
    const out = $('pb-output');
    out.innerHTML = '';
    if (!goals.length) return;
    goals.forEach(g => {
      const items = texts[lang].planItems[g];
      items.forEach(i => {
        const li = document.createElement('li');
        li.textContent = i;
        out.appendChild(li);
      });
    });
  });

  $('pb-export').addEventListener('click', () => {
    const { jsPDF } = window.jspdf;
    const doc = new jsPDF();
    doc.setFontSize(16);
    doc.text(texts[lang].pbTitle, 14, 15);
    const items = [...$('pb-output').children].map(li => li.textContent);
    let y = 25;
    doc.setFontSize(12);
    items.forEach((i, idx) => {
      if (y > 270) { doc.addPage(); y = 15; }
      doc.text(`${idx + 1}. ${i}`, 14, y);
      y += 8;
    });
    doc.save("self-care-plan.pdf");
  });

  window.addEventListener('load', () => {
    applyLang();
    ['gr1','gr2','gr3'].forEach(id => {
      const saved = localStorage.getItem(id);
      if (saved) $(id).value = saved;
    });
  });
})();
</script>
</body>
</html>