<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Grief Support Toolkit</title>
<style>
  :root {
    --bg: #f7f7f7; --fg: #333;
    --sec-bg: white; --sec-fg: #333;
    --btn-bg: #4a6d7c; --btn-fg: white;
    --link: #0066cc;
  }
  [data-theme="dark"] {
    --bg: #2b2b2b; --fg: #ddd;
    --sec-bg: #3a3a3a; --sec-fg: #eee;
    --btn-bg: #556b79; --btn-fg: white;
    --link: #66aaff;
  }
  body {
    font-family: 'Segoe UI', sans-serif;
    margin: 0; padding: 0;
    background: var(--bg); color: var(--fg);
    transition: background .3s, color .3s;
  }
  header, footer {
    background: var(--btn-bg); color: var(--btn-fg);
    text-align: center; padding: 1rem;
  }
  .container { max-width: 900px; margin: 2rem auto; padding: 0 1rem; }
  .section {
    background: var(--sec-bg); color: var(--sec-fg);
    margin-bottom: 1.5rem; border-radius: 10px;
    padding: 1.5rem;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
  }
  h2 { color: var(--btn-bg); }
  .button {
    background: var(--btn-bg);
    color: var(--btn-fg);
    border: none; padding: .6rem 1rem;
    border-radius: 6px; cursor: pointer;
    font-size: 1rem;
  }
  textarea {
    width: 100%; padding: 1rem;
    border-radius: 6px; border: 1px solid #ccc;
    background: var(--bg); color: var(--fg);
    margin-bottom: .8rem;
  }
  #feelings-wheel {
    width: 300px;
    display: block; margin: .5rem auto;
  }
  .support-list a { color: var(--link); }
  .toggle-switch {
    position: absolute; top: 1rem; right: 1rem;
  }
</style>
</head>
<body>
<header>
  <h1>Grief Support Toolkit üåø</h1>
  <p>Comprehensive support, journaling, and coping tools for Canada & U.S.</p>
  <button class="button toggle-switch" onclick="toggleTheme()">üåì Dark Mode</button>
</header>
<div class="container">

  <!-- 1. Understanding Grief -->
  <div class="section">
    <h2>Understanding Grief</h2>
    <ul>
      <li><strong>Physically:</strong> fatigue, appetite/sleep changes.</li>
      <li><strong>Emotionally:</strong> sadness, guilt, relief.</li>
      <li><strong>Cognitively:</strong> confusion, memory issues.</li>
      <li><strong>Behaviorally:</strong> routines change, withdrawal.</li>
      <li><strong>Spiritually:</strong> meaning, belief challenges.</li>
    </ul>
    <p><em>Tip:</em> Normal‚Äîeven if persistent beyond 6 months. Seek help if overwhelming.</p>
    <p><strong>Sudden vs. Anticipated Loss:</strong> Sudden = shock/trauma. Anticipated = prolonged stress.</p>
    <p><strong>When to Seek Help:</strong> If grief stops daily life, causes self-harm thoughts, or leads to panic or severe depression.</p>
  </div>

  <!-- 2. Coping Strategies + Feelings Wheel -->
  <div class="section">
    <h2>Coping Tools & Feeling Wheel</h2>
    <div>
      üßò Deep breathing: 4-sec inhale, hold 4, exhale 4 (repeat 3x).
      <br>‚úçÔ∏è Journal without judgment.
      <br>üéß Use calming music, nature sounds.
    </div>
    <canvas id="feelings-wheel"></canvas>
  </div>

  <!-- 3. Support Resources -->
  <div class="section support-list">
    <h2>Support Resources</h2>
    <p><strong>Canada:</strong> Crisis Services Canada ‚Äì <a href="https://www.crisisservicescanada.ca/en/" target="_blank">1‚Äë833‚Äë456‚Äë4566</a></p>
    <p><strong>U.S.:</strong> 988 Suicide & Crisis Lifeline ‚Äì <a href="https://www.988lifeline.org/" target="_blank">chat & call</a></p>
    <p><strong>Find Local Support:</strong></p>
    <ul>
      <li><a href="https://findahelpline.com/" target="_blank">Find a Helpline (international)</a></li>
      <li><a href="https://211.ca/" target="_blank">211 (Canada)</a></li>
      <li><a href="https://findahelpline.org/" target="_blank">FindAHelpline (U.S.)</a></li>
    </ul>
  </div>

  <!-- 4. Printable PDF Worksheet -->
  <div class="section">
    <h2>üìù Printable Worksheet</h2>
    <button class="button" onclick="downloadJournalingPDF()">Download Blank PDF Worksheet</button>
  </div>

  <!-- 5. Interactive Journaling -->
  <div class="section">
    <h2>Interactive Journaling</h2>
    <textarea id="in1" placeholder="Today I feel..."></textarea>
    <textarea id="in2" placeholder="A memory I cherish..."></textarea>
    <textarea id="in3" placeholder="What I miss most is..."></textarea>
    <textarea id="in4" placeholder="What helps me feel better..."></textarea>
    <textarea id="in5" placeholder="Self-care goal this week..."></textarea>
    <button class="button" onclick="exportNotesPDF()">Export Responses as PDF</button>
  </div>

</div>
<footer>
  &copy; 2025 Grief Support Toolkit | Healing Together
</footer>

<!-- Scripts -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/pdfmake.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/vfs_fonts.js"></script>
<script>
// Dark Mode
function toggleTheme(){
  let t = document.documentElement.getAttribute('data-theme');
  document.documentElement.setAttribute('data-theme', t==='dark'?'':'dark');
  localStorage.setItem('theme', t==='dark'?'light':'dark');
}
document.addEventListener('DOMContentLoaded', ()=>{
  if(localStorage.getItem('theme')==='dark') document.documentElement.setAttribute('data-theme','dark');
  ['in1','in2','in3','in4','in5'].forEach(id=>{
    let v = localStorage.getItem(id)||'';
    document.getElementById(id).value = v;
    document.getElementById(id).addEventListener('input',()=>{
      localStorage.setItem(id, document.getElementById(id).value);
    });
  });
});

// PDF Generators
function downloadJournalingPDF(){
  const dd = {
    pageMargins:[40,60,40,60],
    header:{text:'Grief Journaling Worksheet',style:'header'},
    styles:{header:{fontSize:22,bold:true,margin:[0,0,0,20]},prompt:{fontSize:14,margin:[0,5,0,5]}},
    content:[
      '1. Today I feel...', '_________________________________________',
      '2. A memory I cherish...', '_________________________________________',
      '3. What I miss most is...', '_________________________________________',
      '4. What helps me feel better...', '_________________________________________',
      '5. My self-care goal this week...', '_________________________________________'
    ]
  };
  pdfMake.createPdf(dd).download('Grief_Journaling_Worksheet.pdf');
}

function exportNotesPDF(){
  const inputs = [1,2,3,4,5].map(n=>document.getElementById('in'+n).value||'‚Äî');
  const dd = {
    pageMargins:[40,60,40,60],
    header:{text:'My Grief Journal Entry',style:'header'},
    styles:{header:{fontSize:20,bold:true,margin:[0,0,0,10]},field:{fontSize:14,margin:[0,5,0,5]}},
    content:[
      {text:'1. Today I feel...',style:'field'}, inputs[0],
      {text:'2. A memory I cherish...',style:'field'}, inputs[1],
      {text:'3. What I miss most is...',style:'field'}, inputs[2],
      {text:'4. What helps me feel better...',style:'field'}, inputs[3],
      {text:'5. Self-care goal this week...',style:'field'}, inputs[4],
    ]
  };
  pdfMake.createPdf(dd).download('My_Grief_Journal.pdf');
}

// Feelings Wheel
function drawWheel(){
  const canvas = document.getElementById('feelings-wheel');
  const ctx = canvas.getContext('2d');
  canvas.width = 300; canvas.height = 300;
  const emotions = ['Sad','Angry','Anxious','Relieved','Lonely','Confused','Peaceful','Grateful'];
  const colors = ['#4a90e2','#d0021b','#f5a623','#7ed321','#bd10e0','#f8e71c','#50e3c2','#f17e5d'];
  const cx = 150, cy=150, r=140;
  const slice = 2*Math.PI / emotions.length;
  emotions.forEach((e,i)=>{
    ctx.beginPath();
    ctx.moveTo(cx,cy);
    ctx.arc(cx,cy,r,i*slice,(i+1)*slice);
    ctx.closePath();
    ctx.fillStyle = colors[i];
    ctx.fill();
    ctx.fillStyle = '#fff';
    ctx.textAlign = 'center';
    ctx.font = '14px sans-serif';
    const ang = (i+0.5)*slice;
    ctx.fillText(e, cx + Math.cos(ang)*(r*0.6), cy + Math.sin(ang)*(r*0.6));
  });
}
document.addEventListener('DOMContentLoaded', drawWheel);
</script>
</body>
</html>