<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1.0" />
  <title data-en="Grief Toolkit" data-fr="Bo√Æte √† outils du deuil">Grief Toolkit</title>
  <style>
    /* ----- BASE STYLES ----- */
    * { margin:0; padding:0; box-sizing:border-box; }
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      line-height:1.6;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height:100vh;
      color:#333;
      transition: background 0.3s ease, color 0.3s ease;
      padding-bottom:60px;
    }
    .container { max-width:1200px; margin:0 auto; padding:20px; }
    header {
      position:relative;
      text-align:center;
      padding:30px 10px;
      color:white;
      user-select:none;
    }
    .header-content {
      display:inline-block;
      background:rgba(255,255,255,0.12);
      backdrop-filter:blur(10px);
      border-radius:20px;
      padding:30px 20px;
      box-shadow:0 0 20px rgba(0,0,0,0.2);
      border:1px solid rgba(255,255,255,0.25);
    }
    h1 { font-size:3rem; margin-bottom:10px; text-shadow:2px 2px 6px rgba(0,0,0,0.4); }
    .subtitle { font-size:1.3rem; opacity:0.9; }

    /* ----- LANGUAGE & THEME SWITCHERS ----- */
    #langToggle, #themeSelector {
      position:absolute; top:12px; padding:6px 14px;
      border:none; border-radius:20px; cursor:pointer; user-select:none;
      font-size:1rem; font-weight:600; background:rgba(255,255,255,0.3);
      transition:background 0.3s;
    }
    #langToggle:hover, #themeSelector:hover { background:rgba(255,255,255,0.5); }
    #langToggle { right:12px; }
    #themeSelector { left:12px; }

    /* ----- SECTIONS ----- */
    section { margin-bottom:30px; }
    h2 { display:flex; align-items:center; font-size:1.6rem; margin-bottom:20px; }
    .card-icon { display:inline-flex; width:34px; height:34px; background:linear-gradient(135deg,#667eea,#764ba2); border-radius:50%; align-items:center; justify-content:center; color:white; font-size:1.3rem; margin-right:12px; }
    ul { list-style:none; }
    ul li { margin-bottom:8px; }

    /* ----- COPING STRATEGIES ----- */
    .coping-strategies {
      display:grid;
      gap:14px;
      grid-template-columns:repeat(auto-fit,minmax(120px,1fr));
    }
    .strategy-card {
      padding:14px; border-radius:12px;
      background:rgba(118,75,162,0.12);
      border-left:4px solid #667eea;
      cursor:pointer; user-select:none;
      transition:transform 0.2s,box-shadow 0.2s;
      text-align:center;
    }
    .strategy-card:hover { transform:translateY(-4px); box-shadow:0 8px 18px rgba(0,0,0,0.15); }

    /* ----- MOOD TRACKER ----- */
    .mood-buttons { display:flex; justify-content:center; gap:10px; flex-wrap:wrap; margin-bottom:14px; }
    .mood-btn {
      font-size:1.4rem; width:50px; height:50px; border:none;
      border-radius:50%; cursor:pointer;
      background:linear-gradient(135deg,#667eea,#764ba2); color:white;
    }
    .progress-bar {
      width:100%; height:10px; background:#e2e8f0; border-radius:6px;
      overflow:hidden; margin-bottom:10px;
    }
    .progress-fill { height:100%; background:linear-gradient(90deg,#667eea,#764ba2); width:0%; }

    /* ----- JOURNAL ----- */
    textarea {
      width:100%; min-height:150px;
      padding:14px; font-size:1rem;
      border:2px solid #cbd5e0; border-radius:10px;
    }
    button { cursor:pointer; }

    /* ----- EMERGENCY ----- */
    .emergency-section {
      background:linear-gradient(135deg,#fc8181,#f56565);
      padding:24px; border-radius:12px; color:white; text-align:center;
    }
    .emergency-number { font-size:2rem; font-weight:bold; }

    /* ----- MODALS ----- */
    #modalOverlay, #breathingModal {
      position:fixed; top:0; left:0; right:0; bottom:0;
      background:rgba(0,0,0,0.7);
      display:none; align-items:center; justify-content:center;
      z-index:1000; padding:20px;
    }
    .modalContent, .breathingContent {
      background:white; padding:20px; border-radius:12px;
      max-width:600px; max-height:90vh; overflow:auto;
      position:relative;
    }
    .closeBtn {
      position:absolute; top:10px; right:14px;
      background:none; border:none; font-size:1.6rem; cursor:pointer;
    }

    /* ----- ADMIN INSIGHTS ----- */
    #showAnalytics {
      position:fixed; bottom:12px; right:12px;
      padding:6px; opacity:0.3; border:none; background:#ccc;
      border-radius:6px; cursor:pointer;
    }
    #analyticsPanel {
      display:none; position:fixed; bottom:50px; right:12px;
      background:white; border:1px solid #aaa; padding:12px;
      max-width:300px; border-radius:8px; box-shadow:0 4px 14px rgba(0,0,0,0.2);
    }

    /* ----- THEMES ----- */
    body.theme-dark {
      background:#121212; color:#ddd;
    }
    body.theme-dark .header-content,
    body.theme-dark .modalContent,
    body.theme-dark .breathingContent,
    body.theme-dark textarea {
      background:#222; color:#ddd;
      border-color:#333;
    }
    body.theme-dark .progress-bar { background:#444; }
    body.theme-dark .coping-strategies .strategy-card {
      background:rgba(118,75,162,0.1);
      border-color:#888;
    }
    body.theme-dark .emergency-section { background:linear-gradient(135deg,#a83232,#e55252); }

    body.theme-calm {
      background:#f0f4f8; color:#333;
    }
    body.theme-calm .header-content,
    body.theme-calm .modalContent,
    body.theme-calm .breathingContent,
    body.theme-calm textarea {
      background:#fff; color:#333; border-color:#ddd;
    }
    body.theme-calm .progress-bar { background:#e7edf4; }
    body.theme-calm .coping-strategies .strategy-card {
      background:rgba(200,230,250,0.5); border-color:#7aaeed;
    }
    body.theme-calm .emergency-section {
      background:linear-gradient(135deg,#e37f7f,#f7a9a9);
    }
  </style>
</head>
<body>

  <header>
    <select id="themeSelector">
      <option value="default" data-en="Default" data-fr="D√©faut">Default</option>
      <option value="dark" data-en="Dark" data-fr="Sombre">Dark</option>
      <option value="calm" data-en="Calm Pastel" data-fr="Pastel apaisant">Calm Pastel</option>
    </select>
    <button id="langToggle" aria-label="Switch to French">Fran√ßais</button>
    <div class="header-content">
      <h1 data-en="Grief Toolkit" data-fr="Bo√Æte √† outils du deuil">Grief Toolkit</h1>
      <p class="subtitle" data-en="A gentle guide for understanding and coping" data-fr="Un guide doux pour comprendre et faire face">
        A gentle guide for understanding and coping
      </p>
      <div id="dailyQuote" style="margin-top:8px;font-style:italic;"></div>
    </div>
  </header>

  <main class="container">
    <!-- Understanding Grief -->
    <section>
      <h2><span class="card-icon">üíî</span><span data-en="Understanding Grief" data-fr="Comprendre le deuil">Understanding Grief</span></h2>
      <ul>
        <li><a href="#" class="info-link" data-topic="griefPhases" data-en="Phases of Grief" data-fr="Les phases du deuil">Phases of Grief</a></li>
        <li><a href="#" class="info-link" data-topic="typesOfGrief" data-en="Types of Grief" data-fr="Types de deuil">Types of Grief</a></li>
        <li><a href="#" class="info-link" data-topic="complicatedGrief" data-en="Complicated Grief" data-fr="Deuil compliqu√©">Complicated Grief</a></li>
        <li><a href="#" class="info-link" data-topic="supportGroups" data-en="Support Groups" data-fr="Groupes de soutien">Support Groups</a></li>
      </ul>
    </section>

    <!-- Coping Strategies -->
    <section>
      <h2><span class="card-icon">üõ†Ô∏è</span><span data-en="Coping Strategies" data-fr="Strat√©gies d‚Äôadaptation">Coping Strategies</span></h2>
      <div class="coping-strategies">
        <div class="strategy-card" data-strategy="breathing"><span data-en="Deep Breathing" data-fr="Respiration profonde">Deep Breathing</span></div>
        <div class="strategy-card" data-strategy="grounding"><span data-en="Grounding" data-fr="Ancrage">Grounding</span></div>
        <div class="strategy-card" data-strategy="movement"><span data-en="Movement" data-fr="Mouvement">Movement</span></div>
        <div class="strategy-card" data-strategy="creativity"><span data-en="Creativity" data-fr="Cr√©ativit√©">Creativity</span></div>
        <div class="strategy-card" data-strategy="nature"><span data-en="Nature" data-fr="Nature">Nature</span></div>
        <div class="strategy-card" data-strategy="meditation"><span data-en="Meditation" data-fr="M√©ditation">Meditation</span></div>
      </div>
    </section>

    <!-- Mood Tracker -->
    <section class="interactive-section">
      <h2 data-en="Mood Tracker" data-fr="Suivi de l‚Äôhumeur">Mood Tracker</h2>
      <div class="mood-buttons">
        <button class="mood-btn" data-mood="Happy">üòä</button>
        <button class="mood-btn" data-mood="Sad">üò¢</button>
        <button class="mood-btn" data-mood="Angry">üò†</button>
        <button class="mood-btn" data-mood="Anxious">üò∞</button>
        <button class="mood-btn" data-mood="Calm">üòå</button>
      </div>
      <div class="progress-bar"><div class="progress-fill"></div></div>
      <div id="moodMessage" aria-live="polite"></div>
    </section>

    <!-- Journal -->
    <section class="interactive-section">
      <h2 data-en="Grief Journal" data-fr="Journal du deuil">Grief Journal</h2>
      <textarea id="journalEntry"></textarea><br />
      <button id="saveJournalBtn" data-en="Save Entry" data-fr="Enregistrer">Save Entry</button>
      <div id="journalMessage" aria-live="assertive"></div>
    </section>

    <!-- Resources -->
    <section>
      <h2><span class="card-icon">üìö</span><span data-en="Resources & Help" data-fr="Ressources & aide">Resources & Help</span></h2>
      <p data-en="Free support resources in Canada and the U.S." data-fr="Ressources gratuites au Canada et aux √âtats-Unis">Free support resources in Canada and the U.S.</p>
      <ul>
        <li><strong data-en="Canada:" data-fr="Canada :">Canada:</strong>
          <ul>
            <li><a href="https://www.crisisservicescanada.ca/en/" target="_blank">Crisis Services Canada</a></li>
            <li><a href="https://www.suicideprevention.ca/" target="_blank">Canadian Suicide Prevention Service</a></li>
            <li><a href="https://cmha.ca/find-help" target="_blank">Canadian Mental Health Association</a></li>
            <li><a href="https://kidshelpphone.ca/" target="_blank">Kids Help Phone / Jeunesse, J‚Äô√©coute</a></li>
          </ul>
        </li>
        <li><strong data-en="U.S.:" data-fr="√â.-U. :">U.S.:</strong>
          <ul>
            <li><a href="https://suicidepreventionlifeline.org/" target="_blank">Suicide & Crisis Lifeline</a></li>
            <li><a href="https://www.nimh.nih.gov/health/topics/grief" target="_blank">NIMH Grief Resources</a></li>
            <li><a href="https://www.griefshare.org/" target="_blank">GriefShare</a></li>
            <li><a href="https://www.nami.org/" target="_blank">NAMI</a></li>
          </ul>
        </li>
      </ul>
    </section>

    <!-- Emergency -->
    <section class="emergency-section">
      <h2 data-en="If you're in crisis" data-fr="En situation de crise">If you're in crisis</h2>
      <div class="emergency-number">1‚Äë800‚Äë273‚Äë8255</div>
      <p data-en="Call immediately if you feel unsafe." data-fr="Appelez imm√©diatement si vous √™tes en danger">Call immediately if you feel unsafe.</p>
    </section>
  </main>

  <!-- Modals -->
  <div id="modalOverlay"><div class="modalContent"><button class="closeBtn">&times;</button><div id="modalTitle"></div><div id="modalBody"></div></div></div>
  <div id="breathingModal"><div class="breathingContent"><button class="closeBtn">&times;</button><h3 data-en="Breathing Exercise" data-fr="Exercice de respiration">Breathing Exercise</h3><div style="width:120px;height:120px;border:8px solid #667eea;border-radius:50%;margin:20px auto;animation:breathe 8s infinite;"></div><p data-en="Inhale 4s, hold 7s, exhale 8s." data-fr="Inspirez 4‚ÄØs, retenez 7‚ÄØs, expirez 8‚ÄØs."></p></div></div>

  <!-- Analytics Panel -->
  <button id="showAnalytics" title="Insights">üìä</button>
  <div id="analyticsPanel"><h4 data-en="Analytics" data-fr="Statistiques">Analytics</h4><div id="analyticsContent"></div><button id="closeAnalytics" style="margin-top:10px;">Close</button></div>

  <script>
  (function(){
    // Language switch
    let lang = 'en';
    const langToggle = document.getElementById('langToggle');
    langToggle.addEventListener('click', () => {
      lang = (lang==='en'?'fr':'en');
      document.body.querySelectorAll('[data-en]').forEach(el => {
        el.textContent = el.getAttribute(`data-${lang}`);
      });
      langToggle.textContent = lang==='en'?'Fran√ßais':'English';
    });
    langToggle.click(); // initialize

    // Daily quote
    const quotes = {
      en:[ "‚ÄúGrief is the price‚Ä¶‚Äù ‚Äì Queen Elizabeth II", "‚ÄúHealing takes time‚Ä¶‚Äù", "‚ÄúSometimes‚Ä¶‚Äù" ],
      fr:[ "¬´ Le chagrin est le prix‚Ä¶ ¬ª", "¬´ La gu√©rison prend du temps‚Ä¶ ¬ª", "¬´ Parfois‚Ä¶ ¬ª" ]
    };
    function updateQuote(){
      const q = quotes[lang][new Date().getDate()%quotes[lang].length];
      document.getElementById('dailyQuote').textContent = q;
    }
    updateQuote();
    langToggle.addEventListener('click', updateQuote);

    // Theme switcher
    const themeSelector = document.getElementById('themeSelector');
    themeSelector.addEventListener('change', e=>{
      document.body.classList.remove('theme-dark','theme-calm');
      if(e.target.value!=='default') document.body.classList.add('theme-'+e.target.value);
      analytics.themeChanges++;
      saveAnalytics();
    });
    // Load saved theme
    const savedTheme = localStorage.getItem('selectedTheme')||'default';
    themeSelector.value=savedTheme;
    themeSelector.dispatchEvent(new Event('change'));

    // Info modal content
    const modalOverlay = document.getElementById('modalOverlay');
    const modalContent = modalOverlay.querySelector('.modalContent');
    function openModal(title,body){
      modalOverlay.style.display='flex';
      modalContent.querySelector('#modalTitle').textContent = title;
      modalContent.querySelector('#modalBody').innerHTML = body;
    }
    modalOverlay.querySelector('.closeBtn').addEventListener('click', ()=>modalOverlay.style.display='none');
    modalOverlay.addEventListener('click', e=>{ if(e.target===modalOverlay) modalOverlay.style.display='none'; });
    document.querySelectorAll('.info-link').forEach(a=>{
      a.addEventListener('click', e=>{
        e.preventDefault();
        const key = e.target.getAttribute('data-topic');
        const content = {
          griefPhases:{
            en:`<h3>Phases of Grief</h3><ul>
              <li>Denial</li><li>Anger</li><li>Bargaining</li><li>Depression</li><li>Acceptance</li></ul>`,
            fr:`<h3>Les phases du deuil</h3><ul><li>D√©ni</li><li>Col√®re</li><li>N√©gociation</li><li>D√©pression</li><li>Acceptation</li></ul>`
          },
          typesOfGrief:{
            en:`<h3>Types of Grief</h3><ul><li>Normal</li><li>Anticipatory</li><li>Disenfranchised</li><li>Complicated</li></ul>`,
            fr:`<h3>Types de deuil</h3><ul><li>Normal</li><li>Anticip√©</li><li>Non reconnu</li><li>Compliqu√©</li></ul>`
          },
          complicatedGrief:{
            en:`<h3>Complicated Grief</h3><p>Prolonged symptoms affecting daily life.</p>`,
            fr:`<h3>Deuil compliqu√©</h3><p>Sympt√¥mes prolong√©s perturbant la vie quotidienne.</p>`
          },
          supportGroups:{
            en:`<h3>Support Groups</h3><ul><li>Local & online group connections.</li></ul>`,
            fr:`<h3>Groupes de soutien</h3><ul><li>Groupes locaux et en ligne.</li></ul>`
          }
        };
        openModal(a.textContent, content[key][lang]);
      });
    });

    // Coping Strategy modals
    const breathingModal = document.getElementById('breathingModal');
    function openBreathing(){ breathingModal.style.display='flex'; analytics.strategyClicks['breathing']++; saveAnalytics(); }
    breathingModal.querySelector('.closeBtn').addEventListener('click', ()=>breathingModal.style.display='none');
    breathingModal.addEventListener('click', e=>{ if(e.target===breathingModal) breathingModal.style.display='none'; });

    const strategies = {
      breathing:{
        en:{title:"Deep Breathing", body:"Inhale 4s, hold 7s, exhale 8s. Repeat."},
        fr:{title:"Respiration profonde", body:"Inspirez 4‚ÄØs, retenez 7‚ÄØs, expirez 8‚ÄØs. R√©p√©tez."}
      },
      // other strategies can be similarly added...
    };
    document.querySelectorAll('.strategy-card').forEach(card=>{
      card.addEventListener('click', e=>{
        const key = card.getAttribute('data-strategy');
        if(key==='breathing'){ openBreathing(); return; }
        const str = strategies[key] || {};
        if(str[lang]){
          openModal(str[lang].title, `<p>${str[lang].body}</p>`);
          analytics.strategyClicks[key] = (analytics.strategyClicks[key]||0)+1;
          saveAnalytics();
        }
      });
    });

    // Mood tracking
    const moodBtns = document.querySelectorAll('.mood-btn');
    const progressFill = document.querySelector('.progress-fill');
    const moodMessage = document.getElementById('moodMessage');
    let moodCounts = JSON.parse(localStorage.getItem('moodCounts'))||{};
    function updateMoodUI(){
      const total = Object.values(moodCounts).reduce((a,b)=>a+b,0);
      if(!total){ progressFill.style.width='0%'; moodMessage.textContent=''; return; }
      const [maxMood]=Object.entries(moodCounts).sort((a,b)=>b[1]-a[1])[0];
      const pct = Math.min(100,(moodCounts[maxMood]/total)*100);
      progressFill.style.width=pct+'%';
      const msgs = {
        en:{Happy:"Glad you're happy!",Sad:"Sad is okay",Angry:"Anger is natural",Anxious:"Try grounding",Calm:"Peaceful riot"},
        fr:{Happy:"Content aujourd‚Äôhui!",Sad:"La tristesse est ok",Angry:"La col√®re est normale",Anxious:"Essayez l‚Äôancrage",Calm:"Moment paisible"}
      };
      moodMessage.textContent = msgs[lang][maxMood]||'';
    }
    moodBtns.forEach(btn=>{
      btn.addEventListener('click', e=>{
        const m = btn.getAttribute('data-mood');
        moodCounts[m] = (moodCounts[m]||0)+1;
        localStorage.setItem('moodCounts', JSON.stringify(moodCounts));
        updateMoodUI();
        analytics.moodClicks[m] = (analytics.moodClicks[m]||0)+1;
        saveAnalytics();
      });
    });
    updateMoodUI();

    // Journal save
    const journalEntry = document.getElementById('journalEntry');
    const saveJournalBtn = document.getElementById('saveJournalBtn');
    const journalMessage = document.getElementById('journalMessage');
    journalEntry.value = localStorage.getItem('griefJournal')||'';
    saveJournalBtn.addEventListener('click', ()=>{
      localStorage.setItem('griefJournal',journalEntry.value);
      journalMessage.textContent = lang==='en'?'Entry saved':'Entr√©e enregistr√©e';
      analytics.journalEntries++;
      saveAnalytics();
      setTimeout(()=>journalMessage.textContent='',3000);
    });

    // Analytics
    let analytics = JSON.parse(localStorage.getItem('toolkitAnalytics')) || {
      moodClicks:{}, strategyClicks:{}, journalEntries:0, themeChanges:0
    };
    function saveAnalytics(){ localStorage.setItem('toolkitAnalytics',JSON.stringify(analytics)); }
    document.getElementById('showAnalytics').addEventListener('click', ()=>{
      const p = document.getElementById('analyticsContent');
      p.innerHTML = `<strong>${lang==='en'?'Analytics':'Statistiques'}</strong>
        <p>${lang==='en'?'Mood clicks':'Clics humeur'}: ${JSON.stringify(analytics.moodClicks)}</p>
        <p>${lang==='en'?'Strategy uses':'Utilisations strat√©gies'}: ${JSON.stringify(analytics.strategyClicks)}</p>
        <p>${lang==='en'?'Journal entries':'Entr√©es journal'}: ${analytics.journalEntries}</p>
        <p>${lang==='en'?'Theme changes':'Changes de th√®me'}: ${analytics.themeChanges}</p>`;
      document.getElementById('analyticsPanel').style.display='block';
    });
    document.getElementById('closeAnalytics').addEventListener('click', ()=>document.getElementById('analyticsPanel').style.display='none');
  })();
  </script>
</body>
</html>