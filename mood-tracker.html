<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Mood Toolkit ‚Äî Vivid & Visual</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap');

  /* Reset and base */
  * {
    box-sizing: border-box;
  }
  body {
    margin: 0; padding: 0;
    font-family: 'Poppins', sans-serif;
    min-height: 100vh;
    display: flex;
    flex-direction: column;
    align-items: center;
    background: linear-gradient(135deg, #74ebd5, #ACB6E5);
    color: #222;
    overflow-x: hidden;
    transition: background 1s ease;
  }

  h1 {
    margin: 30px 0 10px;
    font-weight: 700;
    font-size: 2.8rem;
    color: #1a1a2e;
    text-shadow: 2px 2px 6px rgba(0,0,0,0.15);
  }
  h2 {
    text-align: center;
    margin-bottom: 20px;
    font-weight: 600;
    color: #222;
    text-shadow: 1px 1px 3px rgba(0,0,0,0.08);
  }

  /* Form container */
  #mood-form {
    background: rgba(255 255 255 / 0.95);
    max-width: 650px;
    width: 90vw;
    border-radius: 18px;
    box-shadow: 0 12px 40px rgb(0 0 0 / 0.15);
    padding: 28px 36px;
    margin-bottom: 30px;
    transition: box-shadow 0.3s ease;
  }
  #mood-form:hover, #mood-form:focus-within {
    box-shadow: 0 14px 50px rgb(0 0 0 / 0.25);
  }

  label {
    display: block;
    margin-top: 20px;
    font-weight: 600;
    font-size: 1.1rem;
    color: #444;
  }
  select, textarea {
    margin-top: 8px;
    width: 100%;
    font-size: 1rem;
    padding: 12px 16px;
    border-radius: 14px;
    border: 2px solid #ccc;
    transition: border-color 0.3s ease, box-shadow 0.3s ease;
    font-family: inherit;
    resize: vertical;
    background: #fff;
  }
  select:focus, textarea:focus {
    border-color: #74ebd5;
    box-shadow: 0 0 8px #74ebd5aa;
    outline: none;
  }
  textarea {
    min-height: 100px;
  }

  button[type="submit"] {
    margin-top: 28px;
    background: linear-gradient(45deg, #74ebd5, #ACB6E5);
    color: #1a1a2e;
    font-weight: 700;
    font-size: 1.3rem;
    border: none;
    border-radius: 36px;
    padding: 16px 40px;
    cursor: pointer;
    box-shadow: 0 5px 18px #74ebd566;
    transition: background 0.4s ease, box-shadow 0.3s ease;
    width: 100%;
    user-select: none;
  }
  button[type="submit"]:hover {
    background: linear-gradient(45deg, #4ecdc4, #6aa8e6);
    box-shadow: 0 8px 26px #4ecdc499;
  }
  button[type="submit"]:focus {
    outline: 3px solid #74ebd5;
  }

  /* Mood display */
  #mood-display {
    max-width: 650px;
    width: 90vw;
    background: rgba(255 255 255 / 0.9);
    border-radius: 20px;
    box-shadow: 0 10px 30px rgb(0 0 0 / 0.12);
    padding: 30px 40px;
    margin-bottom: 30px;
    text-align: center;
    color: #444;
    min-height: 210px;
    position: relative;
    overflow: hidden;
  }
  #mood-display .mood-icon {
    font-size: 6rem;
    line-height: 1;
    margin-bottom: 20px;
    user-select: none;
    animation: pulse 2s infinite ease-in-out alternate;
  }
  @keyframes pulse {
    0% { transform: scale(1); }
    100% { transform: scale(1.1); }
  }
  #mood-display p {
    font-size: 1.1rem;
    margin: 10px 0;
    max-width: 520px;
    margin-left: auto;
    margin-right: auto;
  }
  #mood-display p strong {
    color: #333;
    font-weight: 600;
  }
  #mood-display p em {
    color: #777;
  }

  /* Cards for message, affirmation, tip */
  .mood-card {
    background: #fff;
    border-radius: 14px;
    box-shadow: 0 5px 15px rgb(0 0 0 / 0.05);
    padding: 18px 24px;
    margin: 14px auto;
    max-width: 520px;
    font-size: 1rem;
    color: #2c3e50;
    font-weight: 600;
    transition: transform 0.3s ease;
  }
  .mood-card:hover {
    transform: translateY(-6px);
    box-shadow: 0 12px 30px rgb(0 0 0 / 0.15);
  }

  /* Entries section */
  #entries-section {
    max-width: 650px;
    width: 90vw;
    background: rgba(255 255 255 / 0.95);
    border-radius: 20px;
    box-shadow: 0 10px 30px rgb(0 0 0 / 0.15);
    padding: 30px 35px 40px;
    margin-bottom: 40px;
  }
  #entries-section h2 {
    margin-bottom: 25px;
    font-weight: 700;
    color: #222;
  }
  #entries-list {
    list-style: none;
    padding-left: 0;
    max-height: 300px;
    overflow-y: auto;
  }
  #entries-list li {
    background: #f0f7f7;
    border-radius: 16px;
    padding: 16px 22px;
    margin-bottom: 14px;
    box-shadow: inset 0 2px 8px rgba(0,0,0,0.06);
    color: #2d3e4f;
    font-size: 1rem;
  }
  #entries-list li strong {
    display: block;
    font-weight: 700;
    margin-bottom: 6px;
    color: #1a2a43;
  }
  #entries-list li p {
    white-space: pre-wrap;
    font-style: italic;
    color: #555e6f;
    margin: 0;
  }

  /* Buttons row */
  #buttons-row {
    display: flex;
    gap: 16px;
    margin-top: 15px;
    justify-content: center;
  }
  #buttons-row button {
    flex: 1 1 45%;
    font-weight: 600;
    font-size: 1.1rem;
    padding: 14px 20px;
    border-radius: 36px;
    border: none;
    cursor: pointer;
    color: #fff;
    user-select: none;
    transition: background 0.3s ease;
    box-shadow: 0 6px 20px rgb(0 0 0 / 0.15);
  }
  #download-pdf {
    background: linear-gradient(135deg, #6a11cb, #2575fc);
  }
  #download-pdf:hover {
    background: linear-gradient(135deg, #2575fc, #6a11cb);
  }
  #clear-entries {
    background: linear-gradient(135deg, #fc5c7d, #6a82fb);
  }
  #clear-entries:hover {
    background: linear-gradient(135deg, #6a82fb, #fc5c7d);
  }
  #download-pdf:focus, #clear-entries:focus {
    outline: 3px solid #74ebd5;
  }

  /* Scrollbar for entries list */
  #entries-list::-webkit-scrollbar {
    width: 10px;
  }
  #entries-list::-webkit-scrollbar-track {
    background: #e0f0f0;
    border-radius: 10px;
  }
  #entries-list::-webkit-scrollbar-thumb {
    background: #74ebd5;
    border-radius: 10px;
  }

  /* Mood background gradients */
  body.mood-happy {
    background: linear-gradient(135deg, #f6d365, #fda085);
    color: #5a3100;
  }
  body.mood-sad {
    background: linear-gradient(135deg, #667eea, #764ba2);
    color: #e0e7ff;
  }
  body.mood-angry {
    background: linear-gradient(135deg, #f85032, #e73827);
    color: #fff7f7;
  }
  body.mood-anxious {
    background: linear-gradient(135deg, #f7971e, #ffd200);
    color: #3a2600;
  }
  body.mood-excited {
    background: linear-gradient(135deg, #fcb045, #fd1d1d, #833ab4);
    color: #fff;
  }
  body.mood-calm {
    background: linear-gradient(135deg, #96fbc4, #f9f586);
    color: #204f2f;
  }

  /* Confetti sparkles container */
  #confetti-container {
    pointer-events: none;
    position: fixed;
    top: 0; left: 0; right: 0; bottom: 0;
    z-index: 10;
    overflow: visible;
  }

  .confetti {
    position: absolute;
    width: 8px;
    height: 8px;
    background: #fff;
    opacity: 0.8;
    border-radius: 3px;
    filter: drop-shadow(0 0 3px #fff);
    animation-name: confettiFall;
    animation-timing-function: linear;
    animation-iteration-count: infinite;
  }
  @keyframes confettiFall {
    0% {
      transform: translateY(0) rotate(0deg);
      opacity: 0.8;
    }
    100% {
      transform: translateY(120vh) rotate(360deg);
      opacity: 0;
    }
  }

  /* Responsive */
  @media (max-width: 480px) {
    h1 {
      font-size: 2rem;
    }
    #mood-form, #mood-display, #entries-section {
      padding: 20px;
    }
    #mood-display .mood-icon {
      font-size: 4.5rem;
      margin-bottom: 12px;
    }
  }
</style>
</head>
<body>

<h1>Mood Toolkit</h1>

<form id="mood-form" aria-label="Mood selection form">
  <label for="mood-select">Select Your Mood:</label>
  <select id="mood-select" required aria-required="true" aria-describedby="moodHelp">
    <option value="" disabled selected>Select a mood</option>
    <option value="happy">üòä Happy</option>
    <option value="sad">üò¢ Sad</option>
    <option value="angry">üò† Angry</option>
    <option value="anxious">üòü Anxious</option>
    <option value="excited">ü§© Excited</option>
    <option value="calm">üòå Calm</option>
  </select>
  <small id="moodHelp">Choose how you feel right now</small>

  <label for="notes">Add Notes (optional):</label>
  <textarea id="notes" placeholder="Write about what‚Äôs on your mind..."></textarea>

  <button type="submit" aria-label="Save mood entry">Save Mood Entry</button>
</form>

<div id="mood-display" aria-live="polite" aria-atomic="true" tabindex="0">
  <p>Select a mood and save your entry to see personalized suggestions here.</p>
</div>

<section id="entries-section" aria-label="Saved mood entries">
  <h2>Your Mood Entries</h2>
  <ul id="entries-list" aria-live="polite" aria-relevant="additions"></ul>
  <div id="buttons-row">
    <button id="download-pdf" aria-label="Download all mood entries as PDF">Download PDF</button>
    <button id="clear-entries" aria-label="Clear all mood entries">Clear All</button>
  </div>
</section>

<div id="confetti-container" aria-hidden="true"></div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script>
  (function(){
    const moodSelect = document.getElementById('mood-select');
    const notesInput = document.getElementById('notes');
    const form = document.getElementById('mood-form');
    const display = document.getElementById('mood-display');
    const entriesList = document.getElementById('entries-list');
    const clearBtn = document.getElementById('clear-entries');
    const downloadBtn = document.getElementById('download-pdf');
    const confettiContainer = document.getElementById('confetti-container');

    // Data for moods
    const moodData = {
      happy: {
        icon: 'üòä',
        colorClass: 'mood-happy',
        message: 'You‚Äôre feeling joyful and positive! Keep shining your light.',
        affirmation: '‚ÄúI attract happiness and joy into my life.‚Äù',
        tip: 'Try to share your happiness with others ‚Äî a smile or kind word can brighten someone‚Äôs day.'
      },
      sad: {
        icon: 'üò¢',
        colorClass: 'mood-sad',
        message: 'It‚Äôs okay to feel down sometimes. Allow yourself space to process.',
        affirmation: '‚ÄúI honor my feelings and give myself time to heal.‚Äù',
        tip: 'Consider journaling or talking to a trusted friend about your feelings.'
      },
      angry: {
        icon: 'üò†',
        colorClass: 'mood-angry',
        message: 'Anger is valid. Try to channel it into constructive action or release.',
        affirmation: '‚ÄúI control my reactions and choose peace.‚Äù',
        tip: 'Take deep breaths or physical activity to calm your mind.'
      },
      anxious: {
        icon: 'üòü',
        colorClass: 'mood-anxious',
        message: 'Feeling anxious can be tough. Remember you are not alone.',
        affirmation: '‚ÄúI am grounded and in control of my thoughts.‚Äù',
        tip: 'Practice grounding exercises or mindfulness to stay present.'
      },
      excited: {
        icon: 'ü§©',
        colorClass: 'mood-excited',
        message: 'Your excitement is contagious! Enjoy the energy and focus it.',
        affirmation: '‚ÄúI welcome positive energy and opportunities.‚Äù',
        tip: 'Channel your excitement into productive creativity or goal setting.'
      },
      calm: {
        icon: 'üòå',
        colorClass: 'mood-calm',
        message: 'Peace and calm are your friends right now. Savor this moment.',
        affirmation: '‚ÄúI am centered, calm, and at peace.‚Äù',
        tip: 'Maintain your calm by spending time in nature or gentle breathing.'
      }
    };

    // Load entries from localStorage or initialize empty array
    let entries = JSON.parse(localStorage.getItem('moodEntries')) || [];

    // Helper to update mood display area
    function updateMoodDisplay(moodKey) {
      if (!moodKey || !moodData[moodKey]) {
        display.innerHTML = '<p>Select a mood and save your entry to see personalized suggestions here.</p>';
        document.body.className = '';
        return;
      }
      const {icon, message, affirmation, tip, colorClass} = moodData[moodKey];
      document.body.className = colorClass;

      display.innerHTML = `
        <div class="mood-icon" aria-hidden="true">${icon}</div>
        <div class="mood-card" role="region" aria-label="Message">${message}</div>
        <div class="mood-card" role="region" aria-label="Affirmation">${affirmation}</div>
        <div class="mood-card" role="region" aria-label="Tip">${tip}</div>
      `;

      // Trigger confetti animation on mood update
      createConfetti();
    }

    // Render entries list
    function renderEntries() {
      if (entries.length === 0) {
        entriesList.innerHTML = '<li>No mood entries yet.</li>';
        return;
      }
      entriesList.innerHTML = entries.map(entry => {
        const date = new Date(entry.date).toLocaleString();
        const mood = moodData[entry.mood] || {};
        const icon = mood.icon || '';
        return `
          <li>
            <strong>${icon} ${entry.mood.charAt(0).toUpperCase() + entry.mood.slice(1)} ‚Äî ${date}</strong>
            <p>${entry.notes || '(No notes)'}</p>
          </li>
        `;
      }).join('');
    }

    // Save entries to localStorage
    function saveEntries() {
      localStorage.setItem('moodEntries', JSON.stringify(entries));
    }

    // Handle form submit
    form.addEventListener('submit', e => {
      e.preventDefault();
      const mood = moodSelect.value;
      const notes = notesInput.value.trim();
      if (!mood) return alert('Please select a mood.');

      const entry = { mood, notes, date: new Date().toISOString() };
      entries.unshift(entry); // newest on top
      saveEntries();
      renderEntries();
      updateMoodDisplay(mood);
      notesInput.value = '';
      moodSelect.value = '';
    });

    // Clear all entries
    clearBtn.addEventListener('click', () => {
      if (confirm('Are you sure you want to clear all mood entries? This cannot be undone.')) {
        entries = [];
        saveEntries();
        renderEntries();
        updateMoodDisplay(null);
      }
    });

    // Download PDF
    downloadBtn.addEventListener('click', () => {
      if (entries.length === 0) return alert('No entries to download.');
      const { jsPDF } = window.jspdf;
      const doc = new jsPDF();
      const pageWidth = doc.internal.pageSize.getWidth();
      let y = 15;
      doc.setFontSize(18);
      doc.text('Mood Toolkit Entries', pageWidth / 2, y, { align: 'center' });
      y += 10;
      doc.setFontSize(12);
      entries.forEach((entry, i) => {
        const moodInfo = moodData[entry.mood] || {};
        const dateStr = new Date(entry.date).toLocaleString();
        let entryText = `${moodInfo.icon || ''} ${entry.mood.charAt(0).toUpperCase() + entry.mood.slice(1)} - ${dateStr}\n${entry.notes || '(No notes)'}`;
        const splitText = doc.splitTextToSize(entryText, pageWidth - 30);
        if (y + splitText.length * 7 > doc.internal.pageSize.getHeight() - 20) {
          doc.addPage();
          y = 15;
        }
        doc.text(splitText, 15, y);
        y += splitText.length * 7 + 8;
      });
      doc.save('mood-toolkit-entries.pdf');
    });

    function createConfetti() {
      for (let i = 0; i < 25; i++) {
        const confetti = document.createElement('div');
        confetti.classList.add('confetti');
        confetti.style.left = `${Math.random() * 100}vw`;
        confetti.style.background = `hsl(${Math.random() * 360}, 80%, 70%)`;
        confetti.style.animationDuration = `${Math.random() * 2 + 2}s`;
        confettiContainer.appendChild(confetti);
        setTimeout(() => confetti.remove(), 4000);
      }
    }

    // Init
    renderEntries();
    updateMoodDisplay(null);
  })();
</script>
</body>
</html>