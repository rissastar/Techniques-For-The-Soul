import React, { useState, useEffect } from ‘react’;
import { Moon, Sun, CheckCircle, Circle, Heart, Brain, Thermometer, Calendar, Star, Save, Menu, X } from ‘lucide-react’;

const SleepResetKit = () => {
const [activeTab, setActiveTab] = useState(‘ritual’);
const [isMenuOpen, setIsMenuOpen] = useState(false);

// Ritual checklist state
const [ritualItems, setRitualItems] = useState({
dimLights: false,
screens: false,
breathing: false,
stretch: false,
journal: false,
gratitude: false,
bedroom: false,
meditation: false
});

// Tracker state
const [trackerEntry, setTrackerEntry] = useState({
date: new Date().toISOString().split(‘T’)[0],
energy: 5,
mood: 5,
wiredButBlank: false,
sleepQuality: 5,
notes: ‘’
});

// Impulse journal state
const [impulseEntry, setImpulseEntry] = useState({
timestamp: ‘’,
trigger: ‘’,
emotion: ‘’,
intensity: 5,
coping: ‘’,
outcome: ‘’
});

// Body check-in state
const [bodyEntry, setBodyEntry] = useState({
date: new Date().toISOString().split(‘T’)[0],
appetite: 5,
digestion: 5,
temperature: ‘normal’,
menstrualPhase: ‘’,
physicalSymptoms: ‘’,
energyLevel: 5
});

// Load data from memory on component mount
useEffect(() => {
const savedData = {
ritual: ritualItems,
tracker: trackerEntry,
impulse: impulseEntry,
body: bodyEntry
};
// In a real app, this would load from localStorage
console.log(‘App loaded with saved data:’, savedData);
}, []);

const saveData = (type, data) => {
// In a real app, this would save to localStorage
console.log(`Saving ${type} data:`, data);
};

const ritualChecklist = [
{ key: ‘dimLights’, label: ‘Dim lights 1-2 hours before bed’, icon: Sun },
{ key: ‘screens’, label: ‘Put away screens/devices’, icon: Moon },
{ key: ‘breathing’, label: ‘5 minutes deep breathing’, icon: Heart },
{ key: ‘stretch’, label: ‘Gentle stretches or yoga’, icon: Star },
{ key: ‘journal’, label: ‘Write down tomorrow's worries’, icon: Brain },
{ key: ‘gratitude’, label: ‘List 3 things you're grateful for’, icon: Heart },
{ key: ‘bedroom’, label: ‘Prepare peaceful bedroom environment’, icon: Moon },
{ key: ‘meditation’, label: ‘Body scan or mindfulness practice’, icon: Star }
];

const affirmations = [
“My nervous system is learning to feel safe and calm.”,
“I am worthy of rest and peaceful sleep.”,
“Each night, my body remembers how to relax.”,
“I release the day’s stress with each breath.”,
“My healing happens in rest and stillness.”,
“I trust my body’s natural rhythm.”,
“Sleep is my sanctuary and restoration time.”,
“I am patient with my healing process.”
];

const handleRitualToggle = (key) => {
const newRitualItems = { …ritualItems, [key]: !ritualItems[key] };
setRitualItems(newRitualItems);
saveData(‘ritual’, newRitualItems);
};

const handleTrackerSave = () => {
saveData(‘tracker’, trackerEntry);
alert(‘Daily tracker saved!’);
};

const handleImpulseSave = () => {
const entryWithTimestamp = {
…impulseEntry,
timestamp: new Date().toISOString()
};
setImpulseEntry(entryWithTimestamp);
saveData(‘impulse’, entryWithTimestamp);
alert(‘Impulse journal entry saved!’);
};

const handleBodySave = () => {
saveData(‘body’, bodyEntry);
alert(‘Body check-in saved!’);
};

const TabButton = ({ id, label, isActive, onClick }) => (
<button
onClick={onClick}
className={`px-3 py-2 rounded-lg text-sm font-medium transition-all ${ isActive  ? 'bg-purple-600 text-white shadow-lg'  : 'bg-gray-800 text-gray-300 hover:bg-gray-700' }`}
>
{label}
</button>
);

const Slider = ({ label, value, onChange, min = 1, max = 10 }) => (
<div className="space-y-2">
<label className="block text-sm font-medium text-gray-300">{label}</label>
<div className="flex items-center space-x-3">
<span className="text-xs text-gray-500">{min}</span>
<input
type="range"
min={min}
max={max}
value={value}
onChange={onChange}
className="flex-1 h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer slider"
/>
<span className="text-xs text-gray-500">{max}</span>
<span className="text-purple-400 font-medium w-8 text-center">{value}</span>
</div>
</div>
);

return (
<div className="min-h-screen bg-gray-900 text-gray-100">
{/* Header */}
<div className="bg-gray-800 border-b border-gray-700 sticky top-0 z-50">
<div className="max-w-md mx-auto px-4 py-4">
<div className="flex items-center justify-between">
<h1 className="text-xl font-bold text-purple-400">Sleep Reset Kit</h1>
<button
onClick={() => setIsMenuOpen(!isMenuOpen)}
className=“p-2 rounded-lg bg-gray-700 hover:bg-gray-600 transition-colors”
>
{isMenuOpen ? <X size={20} /> : <Menu size={20} />}
</button>
</div>
</div>
</div>

```
  {/* Navigation */}
  <div className={`bg-gray-800 border-b border-gray-700 ${isMenuOpen ? 'block' : 'hidden'} md:block`}>
    <div className="max-w-md mx-auto px-4 py-3">
      <div className="grid grid-cols-2 gap-2">
        <TabButton id="ritual" label="Night Ritual" isActive={activeTab === 'ritual'} onClick={() => setActiveTab('ritual')} />
        <TabButton id="tracker" label="Daily Tracker" isActive={activeTab === 'tracker'} onClick={() => setActiveTab('tracker')} />
        <TabButton id="impulse" label="Impulse Journal" isActive={activeTab === 'impulse'} onClick={() => setActiveTab('impulse')} />
        <TabButton id="body" label="Body Check-In" isActive={activeTab === 'body'} onClick={() => setActiveTab('body')} />
        <TabButton id="affirmations" label="Affirmations" isActive={activeTab === 'affirmations'} onClick={() => setActiveTab('affirmations')} />
      </div>
    </div>
  </div>

  {/* Content */}
  <div className="max-w-md mx-auto px-4 py-6">
    {activeTab === 'ritual' && (
      <div className="space-y-6">
        <div className="text-center">
          <Moon className="mx-auto mb-3 text-purple-400" size={48} />
          <h2 className="text-2xl font-bold text-purple-400 mb-2">Nighttime Ritual</h2>
          <p className="text-gray-400">Complete these steps to prepare for restful sleep</p>
        </div>
        
        <div className="space-y-4">
          {ritualChecklist.map((item) => {
            const Icon = item.icon;
            return (
              <div
                key={item.key}
                onClick={() => handleRitualToggle(item.key)}
                className={`p-4 rounded-lg border-2 cursor-pointer transition-all ${
                  ritualItems[item.key]
                    ? 'border-purple-500 bg-purple-900/20'
                    : 'border-gray-700 bg-gray-800 hover:border-gray-600'
                }`}
              >
                <div className="flex items-center space-x-3">
                  {ritualItems[item.key] ? (
                    <CheckCircle className="text-purple-400" size={24} />
                  ) : (
                    <Circle className="text-gray-500" size={24} />
                  )}
                  <Icon className="text-purple-400" size={20} />
                  <span className={`font-medium ${ritualItems[item.key] ? 'text-purple-300' : 'text-gray-300'}`}>
                    {item.label}
                  </span>
                </div>
              </div>
            );
          })}
        </div>
        
        <div className="text-center">
          <p className="text-sm text-gray-400">
            {Object.values(ritualItems).filter(Boolean).length} of {ritualChecklist.length} completed
          </p>
        </div>
      </div>
    )}

    {activeTab === 'tracker' && (
      <div className="space-y-6">
        <div className="text-center">
          <Brain className="mx-auto mb-3 text-purple-400" size={48} />
          <h2 className="text-2xl font-bold text-purple-400 mb-2">Daily Tracker</h2>
          <p className="text-gray-400">Track your energy and mood patterns</p>
        </div>

        <div className="space-y-6">
          <div>
            <label className="block text-sm font-medium text-gray-300 mb-2">Date</label>
            <input
              type="date"
              value={trackerEntry.date}
              onChange={(e) => setTrackerEntry({...trackerEntry, date: e.target.value})}
              className="w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg text-gray-100 focus:ring-2 focus:ring-purple-500 focus:border-transparent"
            />
          </div>

          <Slider
            label="Energy Level"
            value={trackerEntry.energy}
            onChange={(e) => setTrackerEntry({...trackerEntry, energy: e.target.value})}
          />

          <Slider
            label="Mood"
            value={trackerEntry.mood}
            onChange={(e) => setTrackerEntry({...trackerEntry, mood: e.target.value})}
          />

          <Slider
            label="Sleep Quality (last night)"
            value={trackerEntry.sleepQuality}
            onChange={(e) => setTrackerEntry({...trackerEntry, sleepQuality: e.target.value})}
          />

          <div>
            <label className="flex items-center space-x-3 cursor-pointer">
              <input
                type="checkbox"
                checked={trackerEntry.wiredButBlank}
                onChange={(e) => setTrackerEntry({...trackerEntry, wiredButBlank: e.target.checked})}
                className="w-5 h-5 text-purple-600 bg-gray-800 border-gray-700 rounded focus:ring-purple-500"
              />
              <span className="text-gray-300">Feeling wired but blank today</span>
            </label>
          </div>

          <div>
            <label className="block text-sm font-medium text-gray-300 mb-2">Notes</label>
            <textarea
              value={trackerEntry.notes}
              onChange={(e) => setTrackerEntry({...trackerEntry, notes: e.target.value})}
              placeholder="How are you feeling today? Any patterns you notice?"
              className="w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg text-gray-100 focus:ring-2 focus:ring-purple-500 focus:border-transparent h-24 resize-none"
            />
          </div>

          <button
            onClick={handleTrackerSave}
            className="w-full bg-purple-600 hover:bg-purple-700 text-white py-3 px-4 rounded-lg font-medium transition-colors flex items-center justify-center space-x-2"
          >
            <Save size={20} />
            <span>Save Daily Entry</span>
          </button>
        </div>
      </div>
    )}

    {activeTab === 'impulse' && (
      <div className="space-y-6">
        <div className="text-center">
          <Heart className="mx-auto mb-3 text-purple-400" size={48} />
          <h2 className="text-2xl font-bold text-purple-400 mb-2">Impulse & Emotion Journal</h2>
          <p className="text-gray-400">Capture emotional waves and coping strategies</p>
        </div>

        <div className="space-y-6">
          <div>
            <label className="block text-sm font-medium text-gray-300 mb-2">What triggered this feeling?</label>
            <textarea
              value={impulseEntry.trigger}
              onChange={(e) => setImpulseEntry({...impulseEntry, trigger: e.target.value})}
              placeholder="Describe what happened or what you were thinking about..."
              className="w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg text-gray-100 focus:ring-2 focus:ring-purple-500 focus:border-transparent h-20 resize-none"
            />
          </div>

          <div>
            <label className="block text-sm font-medium text-gray-300 mb-2">What emotion(s) am I feeling?</label>
            <input
              type="text"
              value={impulseEntry.emotion}
              onChange={(e) => setImpulseEntry({...impulseEntry, emotion: e.target.value})}
              placeholder="Anxious, angry, sad, numb, overwhelmed..."
              className="w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg text-gray-100 focus:ring-2 focus:ring-purple-500 focus:border-transparent"
            />
          </div>

          <Slider
            label="Intensity Level"
            value={impulseEntry.intensity}
            onChange={(e) => setImpulseEntry({...impulseEntry, intensity: e.target.value})}
          />

          <div>
            <label className="block text-sm font-medium text-gray-300 mb-2">What coping tools did I use?</label>
            <textarea
              value={impulseEntry.coping}
              onChange={(e) => setImpulseEntry({...impulseEntry, coping: e.target.value})}
              placeholder="Breathing, movement, calling someone, journaling..."
              className="w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg text-gray-100 focus:ring-2 focus:ring-purple-500 focus:border-transparent h-20 resize-none"
            />
          </div>

          <div>
            <label className="block text-sm font-medium text-gray-300 mb-2">How did it turn out?</label>
            <textarea
              value={impulseEntry.outcome}
              onChange={(e) => setImpulseEntry({...impulseEntry, outcome: e.target.value})}
              placeholder="What happened next? How do you feel now?"
              className="w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg text-gray-100 focus:ring-2 focus:ring-purple-500 focus:border-transparent h-20 resize-none"
            />
          </div>

          <button
            onClick={handleImpulseSave}
            className="w-full bg-purple-600 hover:bg-purple-700 text-white py-3 px-4 rounded-lg font-medium transition-colors flex items-center justify-center space-x-2"
          >
            <Save size={20} />
            <span>Save Journal Entry</span>
          </button>
        </div>
      </div>
    )}

    {activeTab === 'body' && (
      <div className="space-y-6">
        <div className="text-center">
          <Thermometer className="mx-auto mb-3 text-purple-400" size={48} />
          <h2 className="text-2xl font-bold text-purple-400 mb-2">Body + Hormone Check-In</h2>
          <p className="text-gray-400">Monitor physical patterns and changes</p>
        </div>

        <div className="space-y-6">
          <div>
            <label className="block text-sm font-medium text-gray-300 mb-2">Date</label>
            <input
              type="date"
              value={bodyEntry.date}
              onChange={(e) => setBodyEntry({...bodyEntry, date: e.target.value})}
              className="w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg text-gray-100 focus:ring-2 focus:ring-purple-500 focus:border-transparent"
            />
          </div>

          <Slider
            label="Appetite"
            value={bodyEntry.appetite}
            onChange={(e) => setBodyEntry({...bodyEntry, appetite: e.target.value})}
          />

          <Slider
            label="Digestion"
            value={bodyEntry.digestion}
            onChange={(e) => setBodyEntry({...bodyEntry, digestion: e.target.value})}
          />

          <Slider
            label="Energy Level"
            value={bodyEntry.energyLevel}
            onChange={(e) => setBodyEntry({...bodyEntry, energyLevel: e.target.value})}
          />

          <div>
            <label className="block text-sm font-medium text-gray-300 mb-2">Temperature</label>
            <select
              value={bodyEntry.temperature}
              onChange={(e) => setBodyEntry({...bodyEntry, temperature: e.target.value})}
              className="w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg text-gray-100 focus:ring-2 focus:ring-purple-500 focus:border-transparent"
            >
              <option value="cold">Always cold</option>
              <option value="normal">Normal</option>
              <option value="hot">Always hot</option>
              <option value="fluctuating">Fluctuating</option>
            </select>
          </div>

          <div>
            <label className="block text-sm font-medium text-gray-300 mb-2">Menstrual Phase (if applicable)</label>
            <select
              value={bodyEntry.menstrualPhase}
              onChange={(e) => setBodyEntry({...bodyEntry, menstrualPhase: e.target.value})}
              className="w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg text-gray-100 focus:ring-2 focus:ring-purple-500 focus:border-transparent"
            >
              <option value="">Select phase</option>
              <option value="menstrual">Menstrual (Days 1-5)</option>
              <option value="follicular">Follicular (Days 6-14)</option>
              <option value="ovulatory">Ovulatory (Days 15-17)</option>
              <option value="luteal">Luteal (Days 18-28)</option>
              <option value="na">Not applicable</option>
            </select>
          </div>

          <div>
            <label className="block text-sm font-medium text-gray-300 mb-2">Physical Symptoms</label>
            <textarea
              value={bodyEntry.physicalSymptoms}
              onChange={(e) => setBodyEntry({...bodyEntry, physicalSymptoms: e.target.value})}
              placeholder="Headaches, tension, aches, fatigue, etc."
              className="w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg text-gray-100 focus:ring-2 focus:ring-purple-500 focus:border-transparent h-20 resize-none"
            />
          </div>

          <button
            onClick={handleBodySave}
            className="w-full bg-purple-600 hover:bg-purple-700 text-white py-3 px-4 rounded-lg font-medium transition-colors flex items-center justify-center space-x-2"
          >
            <Save size={20} />
            <span>Save Body Check-In</span>
          </button>
        </div>
      </div>
    )}

    {activeTab === 'affirmations' && (
      <div className="space-y-6">
        <div className="text-center">
          <Star className="mx-auto mb-3 text-purple-400" size={48} />
          <h2 className="text-2xl font-bold text-purple-400 mb-2">Healing Affirmations</h2>
          <p className="text-gray-400">Gentle reminders for your healing journey</p>
        </div>

        <div className="space-y-4">
          {affirmations.map((affirmation, index) => (
            <div
              key={index}
              className="p-4 bg-gradient-to-r from-purple-900/20 to-pink-900/20 border border-purple-500/20 rounded-lg"
            >
              <p className="text-gray-200 text-center italic">"{affirmation}"</p>
            </div>
          ))}
        </div>

        <div className="text-center">
          <p className="text-sm text-gray-400">
            Read these whenever you need encouragement or grounding
          </p>
        </div>
      </div>
    )}
  </div>

  {/* Bottom padding */}
  <div className="h-8"></div>

  <style jsx>{`
    .slider::-webkit-slider-thumb {
      appearance: none;
      width: 20px;
      height: 20px;
      background: #9333ea;
      border-radius: 50%;
      cursor: pointer;
    }
    
    .slider::-moz-range-thumb {
      width: 20px;
      height: 20px;
      background: #9333ea;
      border-radius: 50%;
      cursor: pointer;
      border: none;
    }
  `}</style>
</div>
```

);
};

export default SleepResetKit;