<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Mindfulness Toolkit</title>
<style>
  /* Reset & base */
  * {
    box-sizing: border-box;
  }
  body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    margin: 0; padding: 0;
    background: #f0f4f8;
    color: #333;
    line-height: 1.6;
    transition: background-color 0.3s, color 0.3s;
  }
  h1, h2, h3 {
    font-weight: 600;
    color: #2a4058;
  }
  a {
    color: #1976d2;
    text-decoration: none;
  }
  a:hover {
    text-decoration: underline;
  }
  main {
    max-width: 800px;
    margin: 1.5rem auto 3rem auto;
    padding: 0 1rem;
  }
  section {
    background: #fff;
    margin-bottom: 2rem;
    padding: 1.5rem 2rem;
    border-radius: 12px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.07);
  }
  button {
    background: #1976d2;
    border: none;
    color: white;
    font-weight: 600;
    padding: 0.6rem 1.2rem;
    border-radius: 8px;
    cursor: pointer;
    font-size: 1rem;
    transition: background-color 0.3s ease;
  }
  button:hover {
    background: #155a9c;
  }
  /* Breathing animation circle */
  #breathCircle {
    margin: 1rem auto 0 auto;
    width: 120px;
    height: 120px;
    border: 4px solid #1976d2;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.3rem;
    color: #1976d2;
    user-select: none;
  }

  /* Feelings Wheel Styles */
  #feelingsWheel {
    display: grid;
    grid-template-columns: repeat(auto-fit,minmax(100px,1fr));
    gap: 0.8rem;
    margin-top: 1rem;
  }
  .feeling {
    background: #e3f2fd;
    border-radius: 12px;
    padding: 0.8rem;
    text-align: center;
    font-weight: 600;
    cursor: pointer;
    user-select: none;
    transition: background-color 0.3s;
    border: 2px solid transparent;
  }
  .feeling.selected {
    background: #1976d2;
    color: white;
    border-color: #0d47a1;
  }

  /* Journal section */
  textarea {
    width: 100%;
    min-height: 120px;
    font-size: 1rem;
    padding: 0.8rem;
    border-radius: 10px;
    border: 1.5px solid #ccc;
    resize: vertical;
    font-family: inherit;
  }
  label {
    display: block;
    margin-bottom: 0.3rem;
    font-weight: 600;
    color: #2a4058;
  }
  .btn-primary {
    margin-top: 0.7rem;
  }
  /* Dark mode */
  body.dark {
    background: #1a202c;
    color: #cbd5e0;
  }
  body.dark section {
    background: #2d3748;
    box-shadow: 0 4px 12px rgba(0,0,0,0.9);
  }
  body.dark button {
    background: #63b3ed;
    color: #1a202c;
  }
  body.dark button:hover {
    background: #4299e1;
  }
  body.dark a {
    color: #90cdf4;
  }

  /* Responsive */
  @media (max-width: 500px) {
    main {
      margin: 1rem;
      padding: 0 0.5rem;
    }
    #breathCircle {
      width: 100px;
      height: 100px;
      font-size: 1.1rem;
    }
  }

</style>
</head>
<body>
<header style="text-align:center; padding:1rem 0; background:#1976d2; color:white;">
  <h1>Mindfulness Toolkit</h1>
  <button id="toggleThemeBtn" aria-label="Toggle dark/light theme">Toggle Dark Mode</button>
</header>

<main>

  <!-- Introduction -->
  <section id="intro">
    <h2>What is Mindfulness?</h2>
    <p>
      Mindfulness means paying attention to the present moment — without judgment.  
      It helps us become more aware of our thoughts, feelings, and body sensations, allowing us to respond calmly instead of reacting impulsively.  
    </p>
    <p><strong>Benefits include:</strong> less stress, better focus, improved emotional balance, and greater self-awareness.</p>
  </section>

  <!-- Breathing Exercise -->
  <section id="breathing">
    <h2>Breathing Exercise: 4-7-8 Breath</h2>
    <p>This calming breathing technique helps reduce stress and anchor you in the present moment.</p>
    <button id="startBreathBtn">Start Exercise</button>
    <div id="breathCircle" aria-live="polite" aria-atomic="true" role="region">Ready</div>
  </section>

  <!-- Body Scan -->
  <section id="bodyScan">
    <h2>Guided Body Scan</h2>
    <p>Focus your attention slowly and carefully on different parts of your body, noticing any sensations without judgment.</p>
    <ol>
      <li>Close your eyes and take a few deep breaths.</li>
      <li>Bring attention to your feet. Notice how they feel.</li>
      <li>Slowly move your focus upward to your legs, hips, abdomen, chest, arms, neck, and head.</li>
      <li>If your mind wanders, gently bring it back to the body part.</li>
      <li>Complete the scan feeling calm and grounded.</li>
    </ol>
  </section>

  <!-- Feelings Wheel -->
  <section id="feelings">
    <h2>Check In: How Are You Feeling?</h2>
    <p>Click on any feeling that matches your current emotion to acknowledge and name it.</p>
    <div id="feelingsWheel" role="list">
      <div class="feeling" role="listitem" tabindex="0">Calm</div>
      <div class="feeling" role="listitem" tabindex="0">Anxious</div>
      <div class="feeling" role="listitem" tabindex="0">Happy</div>
      <div class="feeling" role="listitem" tabindex="0">Sad</div>
      <div class="feeling" role="listitem" tabindex="0">Frustrated</div>
      <div class="feeling" role="listitem" tabindex="0">Grateful</div>
      <div class="feeling" role="listitem" tabindex="0">Tired</div>
      <div class="feeling" role="listitem" tabindex="0">Hopeful</div>
      <div class="feeling" role="listitem" tabindex="0">Confused</div>
      <div class="feeling" role="listitem" tabindex="0">Peaceful</div>
    </div>
  </section>

  <!-- Daily Mindfulness Tips -->
  <section id="dailyTips">
    <h2>Daily Mindfulness Tips</h2>
    <ul>
      <li>Pause and take 3 deep breaths before starting a new task.</li>
      <li>Notice the sensations when you eat, drink, or walk.</li>
      <li>Use reminders like phone alarms or sticky notes to pause.</li>
      <li>Be kind to yourself if your mind wanders — gently return to the present.</li>
      <li>Practice gratitude by naming 3 things you appreciate each day.</li>
    </ul>
  </section>

  <!-- Journal Prompt -->
  <section id="journal">
    <h2>Mindfulness Journal</h2>
    <label for="journalInput">Reflect on your mindfulness practice today. What did you notice?</label>
    <textarea id="journalInput" placeholder="Write your thoughts here..."></textarea>
    <button id="saveJournalBtn" class="btn-primary">Save Entry</button>
    <p id="saveMsg" aria-live="polite" style="margin-top:0.5rem;color:green;"></p>
  </section>

  <!-- Resources -->
  <section id="resources">
    <h2>Further Resources</h2>
    <ul>
      <li><a href="https://www.mindful.org/what-is-mindfulness/" target="_blank" rel="noopener">What is Mindfulness? — Mindful.org</a></li>
      <li><a href="https://www.headspace.com/meditation/mindfulness" target="_blank" rel="noopener">Headspace Mindfulness Guide</a></li>
      <li><a href="https://insighttimer.com/" target="_blank" rel="noopener">Insight Timer App (Free Meditations)</a></li>
      <li><a href="https://www.youtube.com/watch?v=inpok4MKVLM" target="_blank" rel="noopener">Guided Body Scan Meditation (YouTube)</a></li>
    </ul>
  </section>

</main>

<script>
  // Dark mode toggle
  const toggleThemeBtn = document.getElementById('toggleThemeBtn');
  toggleThemeBtn.addEventListener('click', () => {
    document.body.classList.toggle('dark');
    toggleThemeBtn.textContent = document.body.classList.contains('dark') ? 'Toggle Light Mode' : 'Toggle Dark Mode';
  });

  // Breathing Exercise: 4-7-8
  const breathCircle = document.getElementById('breathCircle');
  const startBreathBtn = document.getElementById('startBreathBtn');

  // States for breath phases
  const phases = [
    {text: 'Breathe In', duration: 4000},
    {text: 'Hold', duration: 7000},
    {text: 'Breathe Out', duration: 8000},
  ];

  let breathInterval;
  let phaseIndex = 0;
  let running = false;

  function startBreathingExercise() {
    if (running) return; // prevent multiple clicks
    running = true;
    phaseIndex = 0;
    breathCircle.textContent = phases[phaseIndex].text;
    breathCircle.style.transition = `transform ${phases[phaseIndex].duration}ms ease-in-out`;
    breathCircle.style.transform = 'scale(1.3)';
    
    breathInterval = setTimeout(nextPhase, phases[phaseIndex].duration);
  }

  function nextPhase() {
    phaseIndex++;
    if (phaseIndex >= phases.length) {
      running = false;
      breathCircle.textContent = 'Done';
      breathCircle.style.transform = 'scale(1)';
      return;
    }
    breathCircle.textContent = phases[phaseIndex].text;

    // Animate scale for inhale/exhale
    if (phases[phaseIndex].text === 'Breathe Out') {
      breathCircle.style.transform = 'scale(0.7)';
    } else {
      breathCircle.style.transform = 'scale(1.3)';
    }
    breathInterval = setTimeout(nextPhase, phases[phaseIndex].duration);
  }

  startBreathBtn.addEventListener('click', startBreathingExercise);

  // Feelings Wheel interaction
  const feelings = document.querySelectorAll('.feeling');
  feelings.forEach(feeling => {
    feeling.addEventListener('click', () => {
      feelings.forEach(f => f.classList.remove('selected'));
      feeling.classList.add('selected');
    });
    feeling.addEventListener('keydown', (e) => {
      if(e.key === 'Enter' || e.key === ' ') {
        e.preventDefault();
        feeling.click();
      }
    });
  });

  // Journal Save to localStorage
  const journalInput = document.getElementById('journalInput');
  const saveJournalBtn = document.getElementById('saveJournalBtn');
  const saveMsg = document.getElementById('saveMsg');

  // Load saved journal on page load
  window.addEventListener('load', () => {
    const savedEntry = localStorage.getItem('mindfulnessJournalEntry');
    if(savedEntry) {
      journalInput.value = savedEntry;
    }
  });

  saveJournalBtn.addEventListener('click', () => {
    const text = journalInput.value.trim();
    if(text) {
      localStorage.setItem('mindfulnessJournalEntry', text);
      saveMsg.textContent = 'Entry saved locally! You can revisit anytime.';
      setTimeout(() => saveMsg.textContent = '', 4000);
    } else {
      saveMsg.textContent = 'Please write something before saving.';
      setTimeout(() => saveMsg.textContent = '', 3000);
    }
  });

</script>
</body>
</html>