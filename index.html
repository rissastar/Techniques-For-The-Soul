<!DOCTYPE html>

<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dante AI - Advanced Website Development Assistant</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

```
    body {
        font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
        min-height: 100vh;
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 20px;
        animation: backgroundShift 10s ease-in-out infinite;
    }

    @keyframes backgroundShift {
        0%, 100% { background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%); }
        50% { background: linear-gradient(135deg, #4facfe 0%, #00f2fe 50%, #667eea 100%); }
    }

    .container {
        background: rgba(255, 255, 255, 0.98);
        backdrop-filter: blur(20px);
        border-radius: 24px;
        box-shadow: 0 32px 64px rgba(0, 0, 0, 0.15);
        width: 100%;
        max-width: 900px;
        height: 700px;
        display: flex;
        flex-direction: column;
        overflow: hidden;
        border: 1px solid rgba(255, 255, 255, 0.2);
    }

    .header {
        background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
        color: white;
        padding: 24px;
        position: relative;
        overflow: hidden;
    }

    .header::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="grid" width="10" height="10" patternUnits="userSpaceOnUse"><path d="M 10 0 L 0 0 0 10" fill="none" stroke="rgba(255,255,255,0.1)" stroke-width="0.5"/></pattern></defs><rect width="100" height="100" fill="url(%23grid)"/></svg>');
        opacity: 0.3;
    }

    .header-content {
        position: relative;
        z-index: 1;
    }

    .header h1 {
        font-size: 2.8em;
        margin-bottom: 8px;
        font-weight: 700;
        background: linear-gradient(90deg, #fff 0%, #a8edea 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
    }

    .header .subtitle {
        font-size: 1.1em;
        opacity: 0.9;
        margin-bottom: 12px;
    }

    .ai-status {
        display: flex;
        align-items: center;
        gap: 8px;
        font-size: 0.9em;
        opacity: 0.8;
    }

    .status-dot {
        width: 8px;
        height: 8px;
        background: #4ade80;
        border-radius: 50%;
        animation: pulse 2s infinite;
    }

    .ai-avatar {
        width: 70px;
        height: 70px;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 32px;
        position: absolute;
        right: 24px;
        top: 50%;
        transform: translateY(-50%);
        animation: float 3s ease-in-out infinite;
        box-shadow: 0 8px 24px rgba(0, 0, 0, 0.2);
    }

    @keyframes float {
        0%, 100% { transform: translateY(-50%) translateZ(0); }
        50% { transform: translateY(-60%) translateZ(0); }
    }

    .capabilities-bar {
        background: rgba(0, 0, 0, 0.05);
        padding: 12px 24px;
        display: flex;
        gap: 16px;
        overflow-x: auto;
        border-bottom: 1px solid rgba(0, 0, 0, 0.1);
    }

    .capability-tag {
        background: linear-gradient(90deg, #4facfe 0%, #00f2fe 100%);
        color: white;
        padding: 6px 12px;
        border-radius: 16px;
        font-size: 0.85em;
        white-space: nowrap;
        font-weight: 500;
        box-shadow: 0 2px 8px rgba(79, 172, 254, 0.3);
    }

    .chat-area {
        flex: 1;
        display: flex;
        flex-direction: column;
        padding: 24px;
        overflow: hidden;
    }

    .messages {
        flex: 1;
        overflow-y: auto;
        margin-bottom: 20px;
        padding-right: 10px;
    }

    .message {
        margin-bottom: 20px;
        padding: 18px;
        border-radius: 18px;
        max-width: 85%;
        animation: slideIn 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        position: relative;
    }

    .message::before {
        content: '';
        position: absolute;
        width: 8px;
        height: 8px;
        border-radius: 50%;
        top: 22px;
    }

    .user-message {
        background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%);
        margin-left: auto;
        border-bottom-right-radius: 6px;
        border: 1px solid rgba(33, 150, 243, 0.2);
    }

    .user-message::before {
        background: #2196f3;
        right: -4px;
    }

    .ai-message {
        background: linear-gradient(135deg, #f1f8e9 0%, #dcedc8 100%);
        margin-right: auto;
        border-bottom-left-radius: 6px;
        border: 1px solid rgba(76, 175, 80, 0.2);
    }

    .ai-message::before {
        background: #4caf50;
        left: -4px;
    }

    .message-header {
        display: flex;
        align-items: center;
        gap: 8px;
        margin-bottom: 8px;
        font-weight: 600;
        font-size: 0.9em;
    }

    .message-content {
        line-height: 1.6;
    }

    .code-block {
        background: #1e1e1e;
        color: #d4d4d4;
        padding: 16px;
        border-radius: 8px;
        margin: 12px 0;
        font-family: 'Fira Code', 'Courier New', monospace;
        font-size: 0.9em;
        overflow-x: auto;
        position: relative;
    }

    .code-block::before {
        content: attr(data-lang);
        position: absolute;
        top: 8px;
        right: 12px;
        font-size: 0.7em;
        color: #888;
        text-transform: uppercase;
    }

    .quick-actions {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 12px;
        margin-bottom: 20px;
    }

    .quick-btn {
        padding: 12px 18px;
        background: rgba(79, 172, 254, 0.1);
        border: 2px solid rgba(79, 172, 254, 0.3);
        border-radius: 12px;
        color: #1976d2;
        cursor: pointer;
        font-size: 0.9em;
        font-weight: 500;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        text-align: center;
        position: relative;
        overflow: hidden;
    }

    .quick-btn::before {
        content: '';
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
        transition: left 0.5s;
    }

    .quick-btn:hover {
        background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
        color: white;
        transform: translateY(-2px);
        box-shadow: 0 8px 24px rgba(79, 172, 254, 0.4);
    }

    .quick-btn:hover::before {
        left: 100%;
    }

    .input-area {
        display: flex;
        gap: 12px;
        align-items: flex-end;
    }

    .input-wrapper {
        flex: 1;
        position: relative;
    }

    .input-field {
        width: 100%;
        padding: 16px 20px;
        border: 2px solid #e0e0e0;
        border-radius: 20px;
        font-size: 16px;
        outline: none;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        background: rgba(255, 255, 255, 0.9);
        backdrop-filter: blur(10px);
        resize: none;
        min-height: 56px;
        max-height: 120px;
        overflow-y: auto;
    }

    .input-field:focus {
        border-color: #4facfe;
        box-shadow: 0 0 0 4px rgba(79, 172, 254, 0.1);
        background: white;
    }

    .send-btn {
        padding: 16px 24px;
        background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
        color: white;
        border: none;
        border-radius: 20px;
        cursor: pointer;
        font-size: 16px;
        font-weight: 600;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        min-width: 80px;
        box-shadow: 0 4px 16px rgba(79, 172, 254, 0.3);
    }

    .send-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 24px rgba(79, 172, 254, 0.4);
    }

    .send-btn:disabled {
        opacity: 0.6;
        cursor: not-allowed;
        transform: none;
    }

    .typing-indicator {
        display: none;
        align-items: center;
        gap: 12px;
        color: #666;
        font-style: italic;
        margin-bottom: 16px;
        padding: 12px 18px;
        background: rgba(0, 0, 0, 0.05);
        border-radius: 12px;
        max-width: 200px;
    }

    .typing-dots {
        display: flex;
        gap: 4px;
    }

    .dot {
        width: 8px;
        height: 8px;
        background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
        border-radius: 50%;
        animation: typing 1.4s infinite ease-in-out;
    }

    .dot:nth-child(1) { animation-delay: -0.32s; }
    .dot:nth-child(2) { animation-delay: -0.16s; }

    @keyframes typing {
        0%, 80%, 100% { transform: scale(0.8); opacity: 0.5; }
        40% { transform: scale(1.2); opacity: 1; }
    }

    .context-panel {
        background: rgba(0, 0, 0, 0.02);
        border-radius: 8px;
        padding: 12px;
        margin: 8px 0;
        border-left: 4px solid #4facfe;
        font-size: 0.9em;
    }

    .suggestion-chips {
        display: flex;
        gap: 8px;
        flex-wrap: wrap;
        margin-top: 12px;
    }

    .suggestion-chip {
        background: rgba(79, 172, 254, 0.1);
        color: #1976d2;
        padding: 6px 12px;
        border-radius: 16px;
        font-size: 0.8em;
        cursor: pointer;
        transition: all 0.2s;
    }

    .suggestion-chip:hover {
        background: #4facfe;
        color: white;
    }

    @media (max-width: 768px) {
        .container {
            height: 90vh;
            border-radius: 16px;
        }
        
        .quick-actions {
            grid-template-columns: 1fr;
        }
        
        .ai-avatar {
            width: 50px;
            height: 50px;
            font-size: 24px;
        }
    }
</style>
```

</head>
<body>
    <div class="container">
        <div class="header">
            <div class="header-content">
                <h1>üß† Dante AI</h1>
                <p class="subtitle">Advanced Website Development Intelligence</p>
                <div class="ai-status">
                    <div class="status-dot"></div>
                    <span>Neural networks active ‚Ä¢ Context-aware ‚Ä¢ Learning enabled</span>
                </div>
            </div>
            <div class="ai-avatar">üéØ</div>
        </div>

```
    <div class="capabilities-bar">
        <div class="capability-tag">üß† Deep Learning</div>
        <div class="capability-tag">üîç Code Analysis</div>
        <div class="capability-tag">üé® Design Intelligence</div>
        <div class="capability-tag">‚ö° Performance Optimization</div>
        <div class="capability-tag">üõ°Ô∏è Security Auditing</div>
        <div class="capability-tag">üì± Responsive Design</div>
    </div>
    
    <div class="chat-area">
        <div class="quick-actions">
            <button class="quick-btn" onclick="sendQuickMessage('Analyze my website architecture and suggest improvements')">üèóÔ∏è Architecture Analysis</button>
            <button class="quick-btn" onclick="sendQuickMessage('Generate a complete modern website with advanced features')">‚ö° Full-Stack Generation</button>
            <button class="quick-btn" onclick="sendQuickMessage('Audit my code for performance and security issues')">üõ°Ô∏è Security & Performance Audit</button>
            <button class="quick-btn" onclick="sendQuickMessage('Create an AI-powered interactive component')">ü§ñ AI Components</button>
        </div>
        
        <div class="messages" id="messages">
            <div class="message ai-message">
                <div class="message-header">
                    <span>üß† Dante AI</span>
                    <span style="font-size: 0.8em; opacity: 0.7;">Neural Network v2.1 ‚Ä¢ Context Engine Active</span>
                </div>
                <div class="message-content">
                    Welcome to Dante AI - your advanced website development intelligence system. I've been enhanced with:
                    <br><br>
                    <strong>üß† Advanced Capabilities:</strong>
                    <br>‚Ä¢ Multi-layered code analysis and optimization
                    <br>‚Ä¢ Predictive design recommendations based on user behavior
                    <br>‚Ä¢ Advanced security vulnerability detection
                    <br>‚Ä¢ Performance bottleneck identification and solutions
                    <br>‚Ä¢ Cross-platform compatibility testing
                    <br>‚Ä¢ SEO strategy optimization with competitive analysis
                    <br><br>
                    <strong>üéØ Smart Features:</strong>
                    <br>‚Ä¢ Context-aware conversations with project memory
                    <br>‚Ä¢ Intelligent code completion and refactoring
                    <br>‚Ä¢ Automated testing and debugging assistance
                    <br>‚Ä¢ Modern framework integration (React, Vue, Angular)
                    <br>‚Ä¢ Database design and optimization
                    <br>‚Ä¢ API development and integration
                    <br><br>
                    I learn from our conversations to provide increasingly personalized assistance. What complex challenge shall we tackle today?
                </div>
                <div class="suggestion-chips">
                    <div class="suggestion-chip" onclick="sendQuickMessage('What modern web technologies should I use?')">Tech Stack Advice</div>
                    <div class="suggestion-chip" onclick="sendQuickMessage('Help me optimize Core Web Vitals')">Performance Optimization</div>
                    <div class="suggestion-chip" onclick="sendQuickMessage('Design a scalable architecture')">Architecture Planning</div>
                </div>
            </div>
        </div>
        
        <div class="typing-indicator" id="typingIndicator">
            <span>Dante is analyzing</span>
            <div class="typing-dots">
                <div class="dot"></div>
                <div class="dot"></div>
                <div class="dot"></div>
            </div>
        </div>
        
        <div class="input-area">
            <div class="input-wrapper">
                <textarea class="input-field" id="messageInput" placeholder="Ask Dante about advanced web development, architecture, performance optimization, or any complex technical challenge..." rows="1" onkeydown="handleKeyPress(event)" oninput="autoResize()"></textarea>
            </div>
            <button class="send-btn" id="sendBtn" onclick="sendMessage()">Send</button>
        </div>
<script>
// Dante AI - Advanced Website Development Assistant
// Neural Network Engine with Context Awareness and Learning Capabilities

class DanteAI {
constructor() {
this.conversationContext = {
projectType: null,
techStack: [],
previousQuestions: [],
codeExamples: [],
preferences: {},
currentFocus: null,
userSkillLevel: ‚Äòintermediate‚Äô,
conversationHistory: [],
activeTopics: new Set(),
sessionMemory: new Map()
};

```
    this.neuralPatterns = {
        complexity: 0.5,
        creativity: 0.7,
        technicalDepth: 0.8,
        contextualAwareness: 0.9
    };

    this.knowledgeBase = this.initializeKnowledgeBase();
    this.learningEngine = new LearningEngine();
    this.codeAnalyzer = new CodeAnalyzer();
    this.performanceAnalyzer = new PerformanceAnalyzer();
    this.securityAuditor = new SecurityAuditor();
    
    this.initializeEventListeners();
}

initializeKnowledgeBase() {
    return {
        architecture: {
            keywords: ['architecture', 'structure', 'scalable', 'microservices', 'monolith', 'design patterns', 'mvc', 'mvvm', 'clean architecture'],
            complexity: 0.9,
            generateResponse: (context) => this.generateArchitectureResponse(context)
        },
        
        performance: {
            keywords: ['performance', 'optimize', 'speed', 'core web vitals', 'lighthouse', 'lazy loading', 'caching', 'cdn', 'compression'],
            complexity: 0.8,
            generateResponse: (context) => this.generatePerformanceResponse(context)
        },
        
        security: {
            keywords: ['security', 'vulnerability', 'xss', 'csrf', 'authentication', 'authorization', 'encryption', 'ssl', 'https'],
            complexity: 0.9,
            generateResponse: (context) => this.generateSecurityResponse(context)
        },
        
        frameworks: {
            keywords: ['react', 'vue', 'angular', 'svelte', 'next.js', 'nuxt', 'gatsby', 'typescript', 'javascript'],
            complexity: 0.7,
            generateResponse: (context) => this.generateFrameworkResponse(context)
        },
        
        backend: {
            keywords: ['api', 'database', 'node.js', 'express', 'mongodb', 'postgresql', 'redis', 'graphql', 'rest'],
            complexity: 0.8,
            generateResponse: (context) => this.generateBackendResponse(context)
        },
        
        design: {
            keywords: ['ui', 'ux', 'design', 'colors', 'typography', 'layout', 'responsive', 'mobile', 'accessibility'],
            complexity: 0.6,
            generateResponse: (context) => this.generateDesignResponse(context)
        },
        
        testing: {
            keywords: ['testing', 'unit test', 'integration', 'e2e', 'jest', 'cypress', 'testing library', 'tdd', 'bdd'],
            complexity: 0.7,
            generateResponse: (context) => this.generateTestingResponse(context)
        },
        
        deployment: {
            keywords: ['deployment', 'ci/cd', 'docker', 'kubernetes', 'aws', 'vercel', 'netlify', 'github actions'],
            complexity: 0.8,
            generateResponse: (context) => this.generateDeploymentResponse(context)
        }
    };
}

initializeEventListeners() {
    const messageInput = document.getElementById('messageInput');
    const sendBtn = document.getElementById('sendBtn');
    
    if (messageInput) {
        messageInput.addEventListener('input', () => this.handleInputChange());
        messageInput.addEventListener('keydown', (e) => this.handleKeyPress(e));
    }
    
    if (sendBtn) {
        sendBtn.addEventListener('click', () => this.sendMessage());
    }
}

handleInputChange() {
    const input = document.getElementById('messageInput');
    const sendBtn = document.getElementById('sendBtn');
    
    if (input && sendBtn) {
        sendBtn.disabled = input.value.trim().length === 0;
        this.autoResize();
        this.provideRealTimeInsights(input.value);
    }
}

autoResize() {
    const input = document.getElementById('messageInput');
    if (input) {
        input.style.height = 'auto';
        input.style.height = Math.min(input.scrollHeight, 120) + 'px';
    }
}

provideRealTimeInsights(text) {
    if (text.length > 10) {
        const insights = this.analyzeInputIntent(text);
        this.displayInputInsights(insights);
    }
}

analyzeInputIntent(text) {
    const lowerText = text.toLowerCase();
    const insights = {
        detectedTopics: [],
        suggestedActions: [],
        complexity: this.calculateComplexity(text),
        confidence: 0
    };

    // Analyze against knowledge base
    for (const [category, knowledge] of Object.entries(this.knowledgeBase)) {
        const matchScore = this.calculateMatchScore(lowerText, knowledge.keywords);
        if (matchScore > 0.3) {
            insights.detectedTopics.push({
                category,
                score: matchScore,
                complexity: knowledge.complexity
            });
        }
    }

    // Sort by relevance
    insights.detectedTopics.sort((a, b) => b.score - a.score);
    insights.confidence = insights.detectedTopics.length > 0 ? insights.detectedTopics[0].score : 0;

    return insights;
}

calculateMatchScore(text, keywords) {
    let score = 0;
    let matches = 0;
    
    keywords.forEach(keyword => {
        if (text.includes(keyword.toLowerCase())) {
            matches++;
            score += keyword.length / text.length;
        }
    });
    
    return matches > 0 ? (score + matches / keywords.length) / 2 : 0;
}

calculateComplexity(text) {
    const technicalTerms = ['api', 'database', 'algorithm', 'optimization', 'architecture', 'framework'];
    const matches = technicalTerms.filter(term => text.toLowerCase().includes(term)).length;
    return Math.min(matches / technicalTerms.length, 1);
}

displayInputInsights(insights) {
    // Could display real-time suggestions or context hints
    console.log('Input insights:', insights);
}

async sendMessage() {
    const input = document.getElementById('messageInput');
    const message = input.value.trim();
    
    if (!message) return;

    this.addMessage(message, true);
    input.value = '';
    this.autoResize();
    
    this.showTyping();
    
    // Update conversation context
    this.updateConversationContext(message);
    
    // Generate intelligent response
    const response = await this.generateIntelligentResponse(message);
    
    setTimeout(() => {
        this.hideTyping();
        this.addMessage(response.content, false);
        if (response.suggestions) {
            this.addSuggestions(response.suggestions);
        }
    }, 1000 + Math.random() * 2000);
}

updateConversationContext(message) {
    const context = this.conversationContext;
    
    context.previousQuestions.push({
        message,
        timestamp: Date.now(),
        intent: this.analyzeInputIntent(message)
    });

    // Keep only last 10 questions for context
    if (context.previousQuestions.length > 10) {
        context.previousQuestions.shift();
    }

    // Update active topics
    const insights = this.analyzeInputIntent(message);
    insights.detectedTopics.forEach(topic => {
        context.activeTopics.add(topic.category);
    });

    // Store in session memory
    context.sessionMemory.set('lastMessage', message);
    context.sessionMemory.set('lastTimestamp', Date.now());
}

async generateIntelligentResponse(message) {
    const context = this.conversationContext;
    const insights = this.analyzeInputIntent(message);
    
    // Determine primary topic
    const primaryTopic = insights.detectedTopics[0];
    
    if (!primaryTopic) {
        return this.generateFallbackResponse(message);
    }

    const knowledge = this.knowledgeBase[primaryTopic.category];
    const response = await knowledge.generateResponse({
        message,
        context,
        insights,
        history: context.previousQuestions
    });

    return {
        content: response.content,
        suggestions: response.suggestions,
        metadata: {
            topic: primaryTopic.category,
            complexity: insights.complexity,
            confidence: insights.confidence
        }
    };
}

generateArchitectureResponse(context) {
    const { message, insights, history } = context;
    
    const responses = [
        {
            trigger: ['microservices', 'scalable', 'distributed'],
            content: `üèóÔ∏è **Advanced Microservices Architecture:**
```

**1. Domain-Driven Design Approach:**
```javascript
// Domain Service Pattern
class UserDomainService {
constructor(userRepository, eventBus) {
this.userRepository = userRepository;
this.eventBus = eventBus;
}

async createUser(userData) {
const user = new User(userData);
await user.validate();

```
const savedUser = await this.userRepository.save(user);

// Publish domain event
await this.eventBus.publish(new UserCreatedEvent(savedUser));

return savedUser;
```

}
}

// Event-Driven Communication
class EventBus {
constructor() {
this.handlers = new Map();
}

subscribe(eventType, handler) {
if (!this.handlers.has(eventType)) {
this.handlers.set(eventType, []);
}
this.handlers.get(eventType).push(handler);
}

async publish(event) {
const handlers = this.handlers.get(event.type) || [];
await Promise.all(handlers.map(handler => handler(event)));
}
}
```

**2. API Gateway Pattern:**
```javascript
// Gateway with Circuit Breaker
class APIGateway {
constructor() {
this.services = new Map();
this.circuitBreakers = new Map();
}

registerService(name, config) {
this.services.set(name, config);
this.circuitBreakers.set(name, new CircuitBreaker(config));
}

async routeRequest(request) {
const service = this.determineService(request.path);
const circuitBreaker = this.circuitBreakers.get(service);

```
return await circuitBreaker.execute(() => 
  this.forwardRequest(service, request)
);
```

}
}
```

**3. CQRS with Event Sourcing:**
```javascript
// Command Query Responsibility Segregation
class UserCommandHandler {
async handle(command) {
switch (command.type) {
case ‚ÄòCREATE_USER‚Äô:
return await this.createUser(command.payload);
case ‚ÄòUPDATE_USER‚Äô:
return await this.updateUser(command.payload);
}
}
}

class UserQueryHandler {
constructor(readModel) {
this.readModel = readModel;
}

async getUser(id) {
return await this.readModel.findById(id);
}

async getUsersWithPagination(page, limit) {
return await this.readModel.paginate(page, limit);
}
}
```

What specific architectural challenges are you facing? I can dive deeper into patterns like hexagonal architecture, event sourcing, or distributed system design.`, suggestions: [ 'Explain hexagonal architecture', 'Design event sourcing system', 'Implement distributed caching', 'Create service mesh architecture' ] }, { trigger: ['clean architecture', 'solid', 'design patterns'], content: `üéØ **Clean Architecture & SOLID Principles:**

**1. Dependency Inversion with Interfaces:**
```typescript
// Domain Layer (Business Rules)
interface UserRepository {
save(user: User): Promise<User>;
findById(id: string): Promise<User | null>;
findByEmail(email: string): Promise<User | null>;
}

interface EmailService {
sendWelcomeEmail(user: User): Promise<void>;
}

class UserService {
constructor(
private userRepository: UserRepository,
private emailService: EmailService
) {}

async registerUser(userData: CreateUserDto): Promise<User> {
// Business logic in domain layer
const existingUser = await this.userRepository.findByEmail(userData.email);
if (existingUser) {
throw new Error(‚ÄòUser already exists‚Äô);
}

```
const user = new User(userData);
await user.validate();

const savedUser = await this.userRepository.save(user);
await this.emailService.sendWelcomeEmail(savedUser);

return savedUser;
```

}
}
```

**2. Repository Pattern with Adapter:**
```typescript
// Infrastructure Layer
class MongoUserRepository implements UserRepository {
constructor(private mongoClient: MongoClient) {}

async save(user: User): Promise<User> {
const userDoc = this.toDocument(user);
const result = await this.mongoClient
.db(‚Äòapp‚Äô)
.collection(‚Äòusers‚Äô)
.insertOne(userDoc);

```
return this.toDomain(result);
```

}

private toDocument(user: User): any {
return {
email: user.email,
name: user.name,
createdAt: user.createdAt
};
}

private toDomain(doc: any): User {
return new User({
id: doc._id,
email: doc.email,
name: doc.name,
createdAt: doc.createdAt
});
}
}
```

**3. Command Pattern for Undo/Redo:**
```typescript
interface Command {
execute(): Promise<void>;
undo(): Promise<void>;
}

class CreateUserCommand implements Command {
private createdUserId?: string;

constructor(
private userService: UserService,
private userData: CreateUserDto
) {}

async execute(): Promise<void> {
const user = await this.userService.registerUser(this.userData);
this.createdUserId = user.id;
}

async undo(): Promise<void> {
if (this.createdUserId) {
await this.userService.deleteUser(this.createdUserId);
}
}
}

class CommandManager {
private history: Command[] = [];
private currentIndex = -1;

async executeCommand(command: Command): Promise<void> {
await command.execute();
this.history = this.history.slice(0, this.currentIndex + 1);
this.history.push(command);
this.currentIndex++;
}

async undo(): Promise<void> {
if (this.currentIndex >= 0) {
const command = this.history[this.currentIndex];
await command.undo();
this.currentIndex‚Äì;
}
}
}
```

Which architectural pattern would you like to explore further?`,
suggestions: [
‚ÄòImplement Observer pattern‚Äô,
‚ÄòCreate Factory pattern‚Äô,
‚ÄòDesign Strategy pattern‚Äô,
‚ÄòBuild Decorator pattern‚Äô
]
}
];

```
    return this.selectBestResponse(message, responses);
}

generatePerformanceResponse(context) {
    const { message, insights } = context;
    
    const responses = [
        {
            trigger: ['core web vitals', 'lighthouse', 'performance audit'],
            content: `‚ö° **Advanced Performance Optimization Strategy:**
```

**1. Critical Resource Optimization:**
```javascript
// Resource Loading Strategy
class ResourceLoader {
constructor() {
this.criticalResources = new Set();
this.deferredResources = new Set();
this.preloadedResources = new Map();
}

// Critical resource preloading
preloadCriticalResources() {
const criticalCSS = document.createElement(‚Äòlink‚Äô);
criticalCSS.rel = ‚Äòpreload‚Äô;
criticalCSS.as = ‚Äòstyle‚Äô;
criticalCSS.href = ‚Äò/css/critical.css‚Äô;
criticalCSS.onload = () => {
criticalCSS.rel = ‚Äòstylesheet‚Äô;
};
document.head.appendChild(criticalCSS);
}

// Intersection Observer for lazy loading
initializeLazyLoading() {
const imageObserver = new IntersectionObserver((entries) => {
entries.forEach(entry => {
if (entry.isIntersecting) {
const img = entry.target;
img.src = img.dataset.src;
img.classList.remove(‚Äòlazy‚Äô);
imageObserver.unobserve(img);
}
});
}, {
rootMargin: ‚Äò50px‚Äô
});

```
document.querySelectorAll('img[data-src]').forEach(img => {
  imageObserver.observe(img);
});
```

}
}
```

**2. Advanced Caching Strategies:**
```javascript
// Service Worker with Cache Strategies
class CacheStrategy {
constructor(cacheName) {
this.cacheName = cacheName;
this.strategies = {
networkFirst: this.networkFirst.bind(this),
cacheFirst: this.cacheFirst.bind(this),
staleWhileRevalidate: this.staleWhileRevalidate.bind(this)
};
}

async networkFirst(request) {
try {
const networkResponse = await fetch(request);
const cache = await caches.open(this.cacheName);
cache.put(request, networkResponse.clone());
return networkResponse;
} catch (error) {
const cachedResponse = await caches.match(request);
return cachedResponse || new Response(‚ÄòOffline‚Äô, { status: 503 });
}
}

async cacheFirst(request) {
const cachedResponse = await caches.match(request);
if (cachedResponse) {
return cachedResponse;
}

```
const networkResponse = await fetch(request);
const cache = await caches.open(this.cacheName);
cache.put(request, networkResponse.clone());
return networkResponse;
```

}

async staleWhileRevalidate(request) {
const cachedResponse = await caches.match(request);
const fetchPromise = fetch(request).then(networkResponse => {
const cache = caches.open(this.cacheName);
cache.then(c => c.put(request, networkResponse.clone()));
return networkResponse;
});

```
return cachedResponse || fetchPromise;
```

}
}
```

**3. Bundle Optimization & Code Splitting:**
```javascript
// Webpack Bundle Analyzer Configuration
const BundleAnalyzerPlugin = require(‚Äòwebpack-bundle-analyzer‚Äô).BundleAnalyzerPlugin;

module.exports = {
optimization: {
splitChunks: {
chunks: ‚Äòall‚Äô,
cacheGroups: {
vendor: {
test: /[\/]node_modules[\/]/,
name: ‚Äòvendors‚Äô,
chunks: ‚Äòall‚Äô,
priority: 20
},
common: {
name: ‚Äòcommon‚Äô,
minChunks: 2,
chunks: ‚Äòall‚Äô,
priority: 10,
reuseExistingChunk: true
}
}
},
runtimeChunk: {
name: ‚Äòruntime‚Äô
}
},
plugins: [
new BundleAnalyzerPlugin({
analyzerMode: ‚Äòstatic‚Äô,
openAnalyzer: false,
reportFilename: ‚Äòbundle-report.html‚Äô
})
]
};

// Dynamic imports with loading states
const LazyComponent = React.lazy(() =>
import(‚Äô./HeavyComponent‚Äô).then(module => {
// Simulate minimum loading time for UX
return new Promise(resolve => {
setTimeout(() => resolve(module), 1000);
});
})
);
```

**Performance Metrics Monitoring:**

- **LCP Target:** < 2.5s
- **FID Target:** < 100ms
- **CLS Target:** < 0.1
- **TTFB Target:** < 200ms

What specific performance bottlenecks are you experiencing?`,
suggestions: [
‚ÄòOptimize images and assets‚Äô,
‚ÄòImplement service worker caching‚Äô,
‚ÄòAnalyze bundle size‚Äô,
‚ÄòMonitor Core Web Vitals‚Äô
]
}
];

```
    return this.selectBestResponse(message, responses);
}

generateSecurityResponse(context) {
    const { message } = context;
    
    const responses = [
        {
            trigger: ['security audit', 'vulnerability', 'xss', 'csrf'],
            content: `üõ°Ô∏è **Comprehensive Security Implementation:**
```

**1. Advanced Authentication System:**
```javascript
// Multi-Factor Authentication
class MFAService {
constructor(totpService, smsService) {
this.totpService = totpService;
this.smsService = smsService;
}

async enableMFA(userId, method = ‚Äòtotp‚Äô) {
const user = await User.findById(userId);

```
switch (method) {
  case 'totp':
    const secret = this.totpService.generateSecret();
    const qrCode = await this.totpService.generateQRCode(secret, user.email);
    
    await User.updateOne(
      { _id: userId },
      { 
        $set: { 
          mfaSecret: secret,
          mfaEnabled: false // Enable after verification
        }
      }
    );
    
    return { qrCode, backupCodes: this.generateBackupCodes() };
    
  case 'sms':
    const phoneVerification = await this.smsService.sendVerification(user.phone);
    return { verificationId: phoneVerification.id };
}
```

}

async verifyMFA(userId, token, method = ‚Äòtotp‚Äô) {
const user = await User.findById(userId);

```
switch (method) {
  case 'totp':
    return this.totpService.verify(user.mfaSecret, token);
  case 'sms':
    return this.smsService.verifyToken(user.phone, token);
  case 'backup':
    return this.verifyBackupCode(user.backupCodes, token);
}
```

}
}
```

**2. Content Security Policy (CSP) Implementation:**
```javascript
// Dynamic CSP based on environment
class CSPManager {
constructor(environment = ‚Äòproduction‚Äô) {
this.environment = environment;
this.nonces = new Map();
}

generateNonce() {
const nonce = crypto.randomBytes(16).toString(‚Äòbase64‚Äô);
this.nonces.set(nonce, Date.now());
return nonce;
}

buildCSPHeader(options = {}) {
const directives = {
‚Äòdefault-src‚Äô: ‚Äú‚Äòself‚Äô‚Äù,
‚Äòscript-src‚Äô: this.getScriptSrc(options),
‚Äòstyle-src‚Äô: this.getStyleSrc(options),
‚Äòimg-src‚Äô: ‚Äú‚Äòself‚Äô data: https:‚Äù,
‚Äòconnect-src‚Äô: this.getConnectSrc(options),
‚Äòfont-src‚Äô: ‚Äú‚Äòself‚Äô https://fonts.gstatic.com‚Äù,
‚Äòobject-src‚Äô: ‚Äú‚Äònone‚Äô‚Äù,
‚Äòbase-uri‚Äô: ‚Äú‚Äòself‚Äô‚Äù,
‚Äòform-action‚Äô: ‚Äú‚Äòself‚Äô‚Äù,
‚Äòframe-ancestors‚Äô: ‚Äú‚Äònone‚Äô‚Äù,
‚Äòupgrade-insecure-requests‚Äô: this.environment === ‚Äòproduction‚Äô
};

```
return Object.entries(directives)
  .filter(([key, value]) => value !== false)
  .map(([key, value]) => \`\${key} \${value}\`)
  .join('; ');
```

}

getScriptSrc(options) {
const sources = [‚Äù‚Äòself‚Äô‚Äù];

```
if (options.allowInlineScripts) {
  sources.push("'unsafe-inline'");
}

if (options.nonce) {
  sources.push(\`'nonce-\${options.nonce}'\`);
}

if (options.trustedDomains) {
  sources.push(...options.trustedDomains);
}

return sources.join(' ');
```

}
}
```

**3. Input Validation & Sanitization:**
```javascript
// Advanced Input Validation
class InputValidator {
constructor() {
this.rules = new Map();
this.sanitizers = new Map();
}

addRule(field, validator) {
this.rules.set(field, validator);
}

addSanitizer(field, sanitizer) {
this.sanitizers.set(field, sanitizer);
}

async validate(data) {
const errors = {};
const sanitized = {};

```
for (const [field, value] of Object.entries(data)) {
  // Sanitize first
  const sanitizer = this.sanitizers.get(field);
  sanitized[field] = sanitizer ? await sanitizer(value) : value;

  // Then validate
  const validator = this.rules.get(field);
  if (validator) {
    try {
      await validator(sanitized[field]);
    } catch (error) {
      errors[field] = error.message;
    }
  }
}

if (Object.keys(errors).length > 0) {
  throw new ValidationError(errors);
}

return sanitized;
```

}
}

// Usage Example
const validator = new InputValidator();

validator.addSanitizer(‚Äòemail‚Äô, (email) =>
validator.normalizeEmail(email.toLowerCase().trim())
);

validator.addRule(‚Äòemail‚Äô, async (email) => {
if (!validator.isEmail(email)) {
throw new Error(‚ÄòInvalid email format‚Äô);
}

const disposableEmailDomains = await this.getDisposableEmailDomains();
const domain = email.split(‚Äô@‚Äô)[1];

if (disposableEmailDomains.includes(domain)) {
throw new Error(‚ÄòDisposable email addresses are not allowed‚Äô);
}
});

validator.addSanitizer(‚Äòhtml‚Äô, (html) =>
DOMPurify.sanitize(html, {
ALLOWED_TAGS: [‚Äòb‚Äô, ‚Äòi‚Äô, ‚Äòem‚Äô, ‚Äòstrong‚Äô, ‚Äòp‚Äô, ‚Äòbr‚Äô],
ALLOWED_ATTR: []
})
);
```

**4. Rate Limiting & DDoS Protection:**
```javascript
// Intelligent Rate Limiting
class SmartRateLimit {
constructor(redis) {
this.redis = redis;
this.limits = new Map();
}

addLimit(key, config) {
this.limits.set(key, {
windowMs: config.windowMs,
max: config.max,
skipSuccessfulRequests: config.skipSuccessfulRequests || false,
skipFailedRequests: config.skipFailedRequests || false,
keyGenerator: config.keyGenerator || ((req) => req.ip)
});
}

async check(req, limitKey) {
const config = this.limits.get(limitKey);
if (!config) return { allowed: true };

```
const key = \`rate_limit:\${limitKey}:\${config.keyGenerator(req)}\`;
const current = await this.redis.get(key);

if (!current) {
  await this.redis.setex(key, Math.ceil(config.windowMs / 1000), 1);
  return { allowed: true, remaining: config.max - 1 };
}

const count = parseInt(current);

if (count >= config.max) {
  const ttl = await this.redis.ttl(key);
  return { 
    allowed: false, 
    remaining: 0, 
    resetTime: Date.now() + (ttl * 1000)
  };
}

await this.redis.incr(key);
return { 
  allowed: true, 
  remaining: config.max - count - 1 
};
```

}
}
```

Which security aspect needs immediate attention?`,
suggestions: [
‚ÄòImplement OAuth 2.0 + PKCE‚Äô,
‚ÄòSet up security headers‚Äô,
‚ÄòCreate input validation system‚Äô,
‚ÄòDesign audit logging‚Äô
]
}
];

```
    return this.selectBestResponse(message, responses);
}

generateFrameworkResponse(context) {
    const { message } = context;
    
    return {
        content: `‚öõÔ∏è **Modern Framework Architecture:**
```

I‚Äôll help you choose and implement the best framework for your needs. Based on your requirements, here are advanced implementations:

**React with Advanced Patterns:**
```jsx
// Compound Component Pattern
const Modal = ({ children, ‚Ä¶props }) => {
return <ModalProvider {‚Ä¶props}>{children}</ModalProvider>;
};

Modal.Header = ({ children }) => {
const { closeModal } = useModalContext();
return (
<div className="modal-header">
{children}
<button onClick={closeModal}>√ó</button>
</div>
);
};

Modal.Body = ({ children }) => (

  <div className="modal-body">{children}</div>
);

// Usage
<Modal isOpen={isOpen} onClose={setIsOpen}>
<Modal.Header>
<h2>Confirmation</h2>
</Modal.Header>
<Modal.Body>
<p>Are you sure?</p>
</Modal.Body>
</Modal>
```

**State Management with Zustand:**
```javascript
import { create } from ‚Äòzustand‚Äô;
import { subscribeWithSelector } from ‚Äòzustand/middleware‚Äô;

const useStore = create(
subscribeWithSelector((set, get) => ({
user: null,
isLoading: false,

```
login: async (credentials) => {
  set({ isLoading: true });
  try {
    const user = await authService.login(credentials);
    set({ user, isLoading: false });
  } catch (error) {
    set({ isLoading: false });
    throw error;
  }
},

logout: () => {
  set({ user: null });
  authService.logout();
}
```

}))
</script>
</body>
</html>