<!DOCTYPE html>
<html lang="en" data-theme="neon">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Dante’s Fun Hub 4.0 — All-in-One</title>
<style>
  /* Reset & basics */
  * {
    margin: 0; padding: 0; box-sizing: border-box;
  }
  body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background: #0a0a1a;
    color: #0ff;
    min-height: 100vh;
    display: flex;
    flex-direction: column;
  }
  h1, h2 {
    text-align: center;
    text-shadow: 0 0 10px #0ff, 0 0 20px #0ff;
    margin-bottom: 1rem;
  }
  /* Navigation */
  nav {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    background: #002233;
    border-bottom: 3px solid #0ff;
  }
  nav button {
    background: transparent;
    border: 2px solid #0ff;
    color: #0ff;
    font-weight: 700;
    padding: 10px 15px;
    margin: 5px;
    cursor: pointer;
    border-radius: 8px;
    transition: background 0.3s, color 0.3s;
    min-width: 110px;
  }
  nav button:hover, nav button.active {
    background: #0ff;
    color: #002233;
    box-shadow: 0 0 10px #0ff;
  }
  /* Sections */
  section {
    display: none;
    max-width: 600px;
    margin: 20px auto;
    background: #001122;
    border-radius: 12px;
    padding: 20px;
    box-shadow: 0 0 20px #0ffaaaff inset;
  }
  section.active {
    display: block;
  }
  /* Content display */
  .content-box {
    font-size: 1.3rem;
    text-align: center;
    min-height: 80px;
    margin-bottom: 15px;
    user-select: none;
  }
  /* Prev/Next buttons */
  .nav-controls {
    display: flex;
    justify-content: center;
    gap: 15px;
  }
  .nav-controls button {
    background: #0ff;
    color: #002233;
    font-weight: 700;
    border-radius: 8px;
    padding: 8px 16px;
    border: none;
    cursor: pointer;
    box-shadow: 0 0 10px #0ff;
    transition: background 0.3s;
  }
  .nav-controls button:hover {
    background: #00bbcc;
  }
  /* Chat */
  #chat-section {
    max-width: 600px;
    margin: 20px auto 40px;
    background: #001122;
    border-radius: 12px;
    padding: 20px;
    box-shadow: 0 0 25px #0ffbbbaa inset;
    display: flex;
    flex-direction: column;
  }
  #chat-window {
    flex-grow: 1;
    min-height: 200px;
    background: #002233;
    border-radius: 10px;
    padding: 12px;
    overflow-y: auto;
    margin-bottom: 10px;
    color: #0ff;
    font-size: 1.1rem;
    box-shadow: inset 0 0 15px #0ff;
  }
  .chat-msg {
    margin-bottom: 10px;
    padding: 8px 14px;
    border-radius: 20px;
    max-width: 80%;
    word-wrap: break-word;
  }
  .chat-msg.user {
    background: #00bbcc;
    color: #001122;
    align-self: flex-end;
    box-shadow: 0 0 8px #00bbcc;
  }
  .chat-msg.bot {
    background: #004466;
    color: #0ff;
    align-self: flex-start;
    box-shadow: 0 0 8px #0ff;
  }
  #chat-form {
    display: flex;
    gap: 10px;
  }
  #chat-input {
    flex-grow: 1;
    padding: 10px 15px;
    font-size: 1.1rem;
    border-radius: 25px;
    border: 2px solid #0ff;
    background: #001122;
    color: #0ff;
  }
  #chat-input::placeholder {
    color: #33eeff99;
  }
  #chat-send-btn {
    background: #0ff;
    border: none;
    border-radius: 25px;
    padding: 10px 18px;
    color: #002233;
    font-weight: 700;
    cursor: pointer;
    box-shadow: 0 0 15px #0ff;
    transition: background 0.3s;
  }
  #chat-send-btn:hover {
    background: #00bbcc;
  }
  /* Games nav */
  #games-nav {
    display: flex;
    justify-content: center;
    gap: 15px;
    margin: 25px auto 10px;
  }
  #games-nav button {
    background: transparent;
    border: 2px solid #0ff;
    color: #0ff;
    font-weight: 700;
    padding: 10px 18px;
    border-radius: 12px;
    cursor: pointer;
    min-width: 130px;
    transition: background 0.3s;
  }
  #games-nav button.active, #games-nav button:hover {
    background: #0ff;
    color: #001122;
    box-shadow: 0 0 15px #0ff;
  }
  /* Game containers */
  #lobster-game, #rave-rhythm {
    max-width: 600px;
    margin: 0 auto 50px;
    background: #001122;
    border-radius: 15px;
    padding: 20px;
    box-shadow: 0 0 30px #0ffbbbaa inset;
  }
  /* Lobster game */
  #lobster-canvas {
    display: block;
    background: #001822;
    border-radius: 15px;
    margin: 0 auto 15px;
    box-shadow: 0 0 20px #00ffffaa;
  }
  #lobster-score {
    font-size: 1.4rem;
    font-weight: 700;
    color: #0ff;
    text-align: center;
    margin-bottom: 15px;
  }
  #lobster-restart-btn {
    display: block;
    margin: 0 auto;
    background: #0ff;
    color: #002233;
    font-weight: 700;
    border: none;
    padding: 10px 25px;
    border-radius: 12px;
    cursor: pointer;
    box-shadow: 0 0 20px #0ff;
    transition: background 0.3s;
  }
  #lobster-restart-btn:hover {
    background: #00bbcc;
  }
  /* Rave rhythm */
  #rave-score {
    font-size: 1.6rem;
    font-weight: 800;
    text-align: center;
    margin-bottom: 20px;
    color: #0ff;
    text-shadow: 0 0 12px #0ff;
  }
  .rave-arrows {
    display: flex;
    justify-content: center;
    gap: 18px;
  }
  .rave-arrow {
    width: 80px;
    height: 80px;
    background: #004466;
    border-radius: 50%;
    box-shadow: 0 0 10px #0ff;
    color: #0ff;
    font-size: 3.2rem;
    display: flex;
    justify-content: center;
    align-items: center;
    cursor: pointer;
    user-select: none;
    transition: background 0.3s, box-shadow 0.3s;
    font-weight: 900;
  }
  .rave-arrow:hover {
    background: #00bbcc;
    box-shadow: 0 0 20px #0ff;
  }
  .rave-arrow.highlight {
    background: #00ffff;
    box-shadow: 0 0 30px #00ffff;
    color: #001122;
  }
  #rave-restart-btn {
    margin: 20px auto 0;
    display: block;
    background: #0ff;
    color: #002233;
    font-weight: 700;
    border: none;
    padding: 10px 28px;
    border-radius: 15px;
    cursor: pointer;
    box-shadow: 0 0 25px #0ff;
    transition: background 0.3s;
  }
  #rave-restart-btn:hover {
    background: #00bbcc;
  }
  /* Responsive */
  @media (max-width: 640px) {
    nav button {
      min-width: 90px;
      font-size: 0.9rem;
      padding: 8px 10px;
    }
    .content-box {
      font-size: 1.1rem;
      min-height: 70px;
    }
    .rave-arrow {
      width: 60px;
      height: 60px;
      font-size: 2.5rem;
    }
  }
</style>
</head>
<body>

<h1>Dante’s Fun Hub 4.0</h1>

<nav id="main-nav" aria-label="Main content navigation">
  <button class="active" data-section="fun-facts">Fun Facts</button>
  <button data-section="dark-jokes">Dark Jokes</button>
  <button data-section="rave-facts">Rave Facts</button>
  <button data-section="memes">Memes</button>
  <button data-section="snack-ideas">Snack Ideas</button>
  <button data-section="zeus-corner">Zeus Corner</button>
</nav>

<!-- Content Sections -->
<section id="fun-facts" class="active" tabindex="0" aria-live="polite">
  <h2>Fun Facts</h2>
  <div class="content-box" id="fun-facts-content" aria-label="Fun fact content"></div>
  <div class="nav-controls">
    <button id="fun-facts-prev" aria-label="Previous fun fact">Prev</button>
    <button id="fun-facts-next" aria-label="Next fun fact">Next</button>
  </div>
</section>

<section id="dark-jokes" tabindex="0" aria-live="polite">
  <h2>Dark Jokes</h2>
  <div class="content-box" id="dark-jokes-content" aria-label="Dark joke content"></div>
  <div class="nav-controls">
    <button id="dark-jokes-prev" aria-label="Previous dark joke">Prev</button>
    <button id="dark-jokes-next" aria-label="Next dark joke">Next</button>
  </div>
</section>

<section id="rave-facts" tabindex="0" aria-live="polite">
  <h2>Rave Facts</h2>
  <div class="content-box" id="rave-facts-content" aria-label="Rave fact content"></div>
  <div class="nav-controls">
    <button id="rave-facts-prev" aria-label="Previous rave fact">Prev</button>
    <button id="rave-facts-next" aria-label="Next rave fact">Next</button>
  </div>
</section>

<section id="memes" tabindex="0" aria-live="polite">
  <h2>Memes</h2>
  <div class="content-box" id="memes-content" aria-label="Meme content"></div>
  <div class="nav-controls">
    <button id="memes-prev" aria-label="Previous meme">Prev</button>
    <button id="memes-next" aria-label="Next meme">Next</button>
  </div>
</section>

<section id="snack-ideas" tabindex="0" aria-live="polite">
  <h2>Snack Ideas</h2>
  <div class="content-box" id="snack-ideas-content" aria-label="Snack idea content"></div>
  <div class="nav-controls">
    <button id="snack-ideas-prev" aria-label="Previous snack idea">Prev</button>
    <button id="snack-ideas-next" aria-label="Next snack idea">Next</button>
  </div>
</section>

<section id="zeus-corner" tabindex="0" aria-live="polite">
  <h2>Zeus Corner</h2>
  <div class="content-box" id="zeus-corner-content" aria-label="Zeus fact content"></div>
  <div class="nav-controls">
    <button id="zeus-corner-prev" aria-label="Previous Zeus fact">Prev</button>
    <button id="zeus-corner-next" aria-label="Next Zeus fact">Next</button>
  </div>
</section>

<!-- Chat with DanteBot -->
<section id="chat-section" aria-label="Chat with DanteBot">
  <h2>DanteBot Chat 🤖</h2>
  <div id="chat-window" role="log" aria-live="polite" aria-relevant="additions"></div>
  <form id="chat-form" aria-label="Chat input form">
    <input id="chat-input" type="text" placeholder="Say something to DanteBot..." autocomplete="off" aria-required="true" />
    <button id="chat-send-btn" type="submit" aria-label="Send chat message">Send</button>
  </form>
</section>

<!-- Games Navigation -->
<div id="games-nav" role="tablist" aria-label="Game selection">
  <button id="lobster-game-btn" class="active" role="tab" aria-selected="true" aria-controls="lobster-game">Lobster Catch 🎣</button>
  <button id="rave-rhythm-btn" role="tab" aria-selected="false" aria-controls="rave-rhythm">Rave Rhythm 🕺</button>
</div>

<!-- Lobster Catch Game -->
<section id="lobster-game" class="active" role="tabpanel" tabindex="0" aria-label="Lobster Catch Game">
  <h2>Lobster Catch 🎣</h2>
  <canvas id="lobster-canvas" width="580" height="300" aria-label="Lobster catch game canvas"></canvas>
  <div id="lobster-score" aria-live="polite" aria-atomic="true" aria-label="Current lobster score">Score: 0</div>
  <button id="lobster-restart-btn" aria-label="Restart lobster game">Restart Game</button>
  <p style="text-align:center; margin-top:15px; font-size:1rem; color:#0ffcccee;">Use left/right arrow keys to move your catcher.</p>
</section>

<!-- Rave Rhythm Game -->
<section id="rave-rhythm" role="tabpanel" tabindex="0" aria-label="Rave Rhythm Game">
  <h2>Rave Rhythm 🕺</h2>
  <div id="rave-score" aria-live="polite" aria-atomic="true" aria-label="Current rave rhythm score">Score: 0</div>
  <div class="rave-arrows" role="list">
    <button class="rave-arrow" data-direction="left" role="listitem" aria-label="Left arrow">&#8592;</button>
    <button class="rave-arrow" data-direction="down" role="listitem" aria-label="Down arrow">&#8595;</button>
    <button class="rave-arrow" data-direction="up" role="listitem" aria-label="Up arrow">&#8593;</button>
    <button class="rave-arrow" data-direction="right" role="listitem" aria-label="Right arrow">&#8594;</button>
  </div>
  <button id="rave-restart-btn" aria-label="Restart rave rhythm game">Restart Game</button>
  <p style="text-align:center; margin-top:15px; font-size:1rem; color:#0ffcccee;">Click the arrows or use arrow keys to match the sequence!</p>
</section>

<script>
  // Content Arrays with expanded content

  const funFacts = [
    "Dante’s hometown is famous for epic raves and lobsters alike.",
    "Lobsters can live up to 100 years and keep growing their entire lives.",
    "Rave culture started in the 1980s in London underground clubs.",
    "Glow sticks were invented in 1962 and became rave essentials.",
    "Dogs like Zeus can recognize over 1000 words and commands.",
    "Electronic music festivals attract hundreds of thousands every year.",
    "The fastest recorded BPM at a rave is over 160 beats per minute!",
    "Lobsters have blue blood due to copper in their blood cells.",
    "The PLUR motto of raves stands for Peace, Love, Unity, Respect.",
    "Dante’s favorite snack might surprise you — it’s lobster rolls!",
    "Zeus loves belly rubs and can nap for hours without a care.",
    "Rave dance styles include shuffling, liquid dancing, and more."
  ];

  const darkJokes = [
    "Why don’t graveyards ever get overcrowded? Because people are dying to get in.",
    "I have a stepladder because my real ladder left when I was a kid.",
    "Why don't skeletons fight each other? They don't have the guts.",
    "They say laughter is the best medicine — until you have liver disease.",
    "What’s the difference between a snowman and a snowwoman? Snowballs.",
    "I told my therapist I have trouble opening up... she said 'Me too.'",
    "If at first you don’t succeed, then skydiving isn’t for you.",
    "I asked the librarian if the library had books on paranoia. She whispered, 'They're right behind you.'",
    "Why did the chicken cross the road? To get away from my bad jokes.",
    "I tried to write a joke about cirrhosis, but it didn’t age well."
  ];

  const raveFacts = [
    "The first rave was held in 1987 in the UK and lasted 24 hours.",
    "Neon colors became rave staples because of their glowing effect under blacklight.",
    "The iconic smiley face is a symbol of the rave movement.",
    "PLUR was popularized by DJ Frankie Bones in the early 90s.",
    "Rave music genres include techno, house, drum and bass, and trance.",
    "Many ravers use kandi bracelets as a sign of friendship and respect.",
    "Glow sticks in raves are a safer alternative to fire.",
    "The largest rave ever recorded had over 350,000 people.",
    "Rave fashion is all about self-expression and wild creativity.",
    "The ‘rave wave’ dance move is inspired by waving hands through light."
  ];

  const memes = [
    "When you catch a lobster but it's just a rock: 'I’m clawing for nothing!'",
    "Dante at a rave: 'I came for the music, stayed for the snacks.'",
    "When Zeus steals your spot on the couch: 'Who's the real boss here?'",
    "That feeling when the beat drops and you forget your problems.",
    "Me trying to adult but the rave keeps calling.",
    "Lobster: 'I’m just here to pinch some fun.'",
    "When your playlist goes from calm to full rave mode in 0.5 seconds.",
    "Me after one hit of the rave floor: 'Is it morning already?'",
    "When the DJ plays your song and you become a dance god.",
    "That awkward moment you bring snacks to a rave and everyone’s on glow sticks."
  ];

  const snackIdeas = [
    "Lobster rolls with extra butter — classic!",
    "Cheesy nachos with jalapeños for a spicy kick.",
    "Fresh fruit skewers for a sweet and healthy rave snack.",
    "Mini grilled cheese sandwiches — perfect finger food.",
    "Popcorn tossed in truffle oil and parmesan.",
    "Energy balls with oats, peanut butter, and honey.",
    "Chocolate-covered espresso beans for a caffeine boost.",
    "Veggie sticks with hummus dip — crunchy and clean.",
    "Pita chips with guacamole or salsa.",
    "Soft pretzels with mustard — rave staple!"
  ];

  const zeusCorner = [
    "Zeus is a 4-year-old border collie who loves fetch and naps.",
    "He’s known to howl perfectly to rap beats — a true canine DJ.",
    "Favorite toy: a neon green squeaky lobster.",
    "Zeus once photobombed a rave selfie and stole the show.",
    "He loves belly rubs more than anything — especially after a long day.",
    "Zeus’s guilty pleasure is sneaking snacks from the table.",
    "He’s surprisingly good at chilling during intense rave sessions.",
    "His motto: 'Stay cool, stay chill, stay funky.'",
    "Zeus loves meeting new people and is very friendly.",
    "He once tried to join the lobster catch game — no luck!"
  ];

  // Category content state indexes
  const contentIndexes = {
    'fun-facts': 0,
    'dark-jokes': 0,
    'rave-facts': 0,
    'memes': 0,
    'snack-ideas': 0,
    'zeus-corner': 0,
  };

  // Map category to content array and DOM elements
  const categories = {
    'fun-facts': { data: funFacts, container: null },
    'dark-jokes': { data: darkJokes, container: null },
    'rave-facts': { data: raveFacts, container: null },
    'memes': { data: memes, container: null },
    'snack-ideas': { data: snackIdeas, container: null },
    'zeus-corner': { data: zeusCorner, container: null },
  };

  // Initialize content containers
  for (const cat in categories) {
    categories[cat].container = document.getElementById(`${cat}-content`);
  }

  // Update content function
  function updateContent(cat) {
    const idx = contentIndexes[cat];
    const dataArr = categories[cat].data;
    categories[cat].container.textContent = dataArr[idx];
  }

  // Navigation buttons setup
  function setupNavButtons(cat) {
    const prevBtn = document.getElementById(`${cat}-prev`);
    const nextBtn = document.getElementById(`${cat}-next`);
    prevBtn.addEventListener('click', () => {
      contentIndexes[cat] = (contentIndexes[cat] - 1 + categories[cat].data.length) % categories[cat].data.length;
      updateContent(cat);
    });
    nextBtn.addEventListener('click', () => {
      contentIndexes[cat] = (contentIndexes[cat] + 1) % categories[cat].data.length;
      updateContent(cat);
    });
  }

  // Initialize all content and nav buttons
  Object.keys(categories).forEach(cat => {
    updateContent(cat);
    setupNavButtons(cat);
  });

  // Navigation tab switching
  const navButtons = document.querySelectorAll('nav button');
  const sections = document.querySelectorAll('section');

  navButtons.forEach(btn => {
    btn.addEventListener('click', () => {
      const target = btn.getAttribute('data-section');

      // Set active button
      navButtons.forEach(b => b.classList.remove('active'));
      btn.classList.add('active');

      // Show corresponding section
      sections.forEach(sec => {
        if (sec.id === target) {
          sec.classList.add('active');
          sec.focus();
        } else if (!sec.id.startsWith('lobster-game') && !sec.id.startsWith('rave-rhythm')) {
          sec.classList.remove('active');
        }
      });

      // Hide games when content section active
      document.getElementById('lobster-game').classList.remove('active');
      document.getElementById('rave-rhythm').classList.remove('active');
      document.getElementById('lobster-game-btn').classList.remove('active');
      document.getElementById('rave-rhythm-btn').classList.remove('active');
    });
  });

  // DanteBot Chat logic
  const chatWindow = document.getElementById('chat-window');
  const chatForm = document.getElementById('chat-form');
  const chatInput = document.getElementById('chat-input');

  const botReplies = [
    "Yo Dante, what's good?",
    "Keep that rave energy alive!",
    "Lobster catch looks lit today 🔥",
    "Zeus says hi! 🐶",
    "Did you try the new snack idea yet?",
    "Let's keep the good vibes flowing.",
    "Remember: PLUR - Peace, Love, Unity, Respect!",
    "You got this, keep dancing!",
    "That’s a killer joke, Dante!",
    "Need some more fun facts? Just ask!",
    "I'm here whenever you need a hype buddy.",
    "How about a mini-game break?"
  ];

  function addMessage(text, sender='bot') {
    const msg = document.createElement('div');
    msg.classList.add('chat-msg', sender);
    msg.textContent = text;
    chatWindow.appendChild(msg);
    chatWindow.scrollTop = chatWindow.scrollHeight;
  }

  chatForm.addEventListener('submit', e => {
    e.preventDefault();
    const userText = chatInput.value.trim();
    if (!userText) return;
    addMessage(userText, 'user');
    chatInput.value = '';
    setTimeout(() => {
      const reply = botReplies[Math.floor(Math.random() * botReplies.length)];
      addMessage(reply, 'bot');
    }, 900);
  });

  // Games navigation
  const lobsterBtn = document.getElementById('lobster-game-btn');
  const raveBtn = document.getElementById('rave-rhythm-btn');
  const lobsterSection = document.getElementById('lobster-game');
  const raveSection = document.getElementById('rave-rhythm');

  lobsterBtn.addEventListener('click', () => {
    lobsterBtn.classList.add('active');
    raveBtn.classList.remove('active');
    lobsterSection.classList.add('active');
    raveSection.classList.remove('active');
    lobsterSection.focus();
  });
  raveBtn.addEventListener('click', () => {
    raveBtn.classList.add('active');
    lobsterBtn.classList.remove('active');
    raveSection.classList.add('active');
    lobsterSection.classList.remove('active');
    raveSection.focus();
  });

  // Lobster Catch Game
  const canvas = document.getElementById('lobster-canvas');
  const ctx = canvas.getContext('2d');
  const scoreDisplay = document.getElementById('lobster-score');
  const restartBtn = document.getElementById('lobster-restart-btn');

  const catcherWidth = 80;
  const catcherHeight = 20;
  const lobsterSize = 30;

  let catcherX = canvas.width / 2 - catcherWidth / 2;
  const catcherY = canvas.height - catcherHeight - 10;

  let lobsters = [];
  let score = 0;
  let gameOver = false;
  let lobsterSpeed = 2;
  let lobsterInterval;
  let lobsterSpawnRate = 1500; // ms

  function drawCatcher() {
    ctx.fillStyle = '#0ff';
    ctx.shadowColor = '#0ff';
    ctx.shadowBlur = 12;
    ctx.fillRect(catcherX, catcherY, catcherWidth, catcherHeight);
    // Claw detail
    ctx.fillStyle = '#00ccff';
    ctx.fillRect(catcherX + 10, catcherY - 8, 15, 8);
    ctx.fillRect(catcherX + catcherWidth - 25, catcherY - 8, 15, 8);
  }

  function drawLobster(lobster) {
    ctx.fillStyle = '#cc3300';
    ctx.shadowColor = '#ff2200';
    ctx.shadowBlur = 15;
    ctx.beginPath();
    ctx.ellipse(lobster.x, lobster.y, lobsterSize / 2, lobsterSize / 3, 0, 0, Math.PI * 2);
    ctx.fill();
    // claws
    ctx.strokeStyle = '#ff5500';
    ctx.lineWidth = 3;
    ctx.beginPath();
    ctx.moveTo(lobster.x - 10, lobster.y);
    ctx.lineTo(lobster.x - 20, lobster.y - 15);
    ctx.moveTo(lobster.x + 10, lobster.y);
    ctx.lineTo(lobster.x + 20, lobster.y - 15);
    ctx.stroke();
  }

  function spawnLobster() {
    const x = Math.random() * (canvas.width - lobsterSize) + lobsterSize / 2;
    lobsters.push({ x, y: -lobsterSize });
  }

  function updateLobsters() {
    lobsters.forEach((lobster, i) => {
      lobster.y += lobsterSpeed;
      // Check catch
      if (
        lobster.y + lobsterSize / 3 >= catcherY &&
        lobster.x >= catcherX &&
        lobster.x <= catcherX + catcherWidth
      ) {
        lobsters.splice(i, 1);
        score++;
        scoreDisplay.textContent = `Score: ${score}`;
        // Speed up every 5 points
        if (score % 5 === 0) lobsterSpeed += 0.5;
      }
      // Remove off screen
      else if (lobster.y > canvas.height + lobsterSize) {
        lobsters.splice(i, 1);
        // Missed lobster: game over
        gameOver = true;
      }
    });
  }

  function clearCanvas() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
  }

  function draw() {
    clearCanvas();
    drawCatcher();
    lobsters.forEach(drawLobster);
  }

  function gameLoop() {
    if (gameOver) {
      scoreDisplay.textContent = `Game Over! Final Score: ${score}`;
      clearInterval(lobsterInterval);
      return;
    }
    updateLobsters();
    draw();
    requestAnimationFrame(gameLoop);
  }

  function startGame() {
    score = 0;
    lobsterSpeed = 2;
    lobsters = [];
    gameOver = false;
    scoreDisplay.textContent = `Score: 0`;
    clearCanvas();
    drawCatcher();
    if (lobsterInterval) clearInterval(lobsterInterval);
    lobsterInterval = setInterval(spawnLobster, lobsterSpawnRate);
    gameLoop();
  }

  restartBtn.addEventListener('click', () => {
    startGame();
    canvas.focus();
  });

  // Move catcher with arrow keys
  window.addEventListener('keydown', (e) => {
    if (!lobsterSection.classList.contains('active')) return;
    if (gameOver) return;
    const step = 20;
    if (e.key === 'ArrowLeft' || e.key === 'a' || e.key === 'A') {
      catcherX = Math.max(0, catcherX - step);
      e.preventDefault();
    } else if (e.key === 'ArrowRight' || e.key === 'd' || e.key === 'D') {
      catcherX = Math.min(canvas.width - catcherWidth, catcherX + step);
      e.preventDefault();
    }
  });

  // Initial start of lobster game
  startGame();

  // Rave Rhythm Game

  const raveArrows = Array.from(document.querySelectorAll('.rave-arrow'));
  const raveScoreDisplay = document.getElementById('rave-score');
  const raveRestartBtn = document.getElementById('rave-restart-btn');

  const directions = ['left', 'down', 'up', 'right'];

  let sequence = [];
  let playerSequence = [];
  let currentStep = 0;
  let raveScore = 0;
  let waitingForInput = false;

  function lightArrow(direction) {
    const btn = raveArrows.find(b => b.dataset.direction === direction);
    if (!btn) return;
    btn.classList.add('highlight');
    setTimeout(() => btn.classList.remove('highlight'), 600);
  }

  function playSequence() {
    waitingForInput = false;
    let i = 0;
    const interval = setInterval(() => {
      lightArrow(sequence[i]);
      i++;
      if (i >= sequence.length) {
        clearInterval(interval);
        waitingForInput = true;
        currentStep = 0;
        playerSequence = [];
      }
    }, 900);
  }

  function addToSequence() {
    const next = directions[Math.floor(Math.random() * directions.length)];
    sequence.push(next);
  }

  function startRaveGame() {
    sequence = [];
    playerSequence = [];
    raveScore = 0;
    raveScoreDisplay.textContent = `Score: 0`;
    addToSequence();
    playSequence();
  }

  function handlePlayerInput(direction) {
    if (!waitingForInput) return;
    if (direction === sequence[currentStep]) {
      currentStep++;
      raveScore++;
      raveScoreDisplay.textContent = `Score: ${raveScore}`;
      if (currentStep === sequence.length) {
        waitingForInput = false;
        setTimeout(() => {
          addToSequence();
          playSequence();
        }, 800);
      }
    } else {
      // Game over
      raveScoreDisplay.textContent = `Game Over! Final Score: ${raveScore}`;
      waitingForInput = false;
    }
  }

  raveArrows.forEach(btn => {
    btn.addEventListener('click', () => {
      const dir = btn.dataset.direction;
      lightArrow(dir);
      handlePlayerInput(dir);
    });
  });

  raveRestartBtn.addEventListener('click', startRaveGame);

  // Keyboard support for rave rhythm game
  window.addEventListener('keydown', (e) => {
    if (!raveSection.classList.contains('active')) return;
    if (!waitingForInput) return;

    let keyDir = null;
    switch (e.key) {
      case 'ArrowLeft': keyDir = 'left'; break;
      case 'ArrowDown': keyDir = 'down'; break;
      case 'ArrowUp': keyDir = 'up'; break;
      case 'ArrowRight': keyDir = 'right'; break;
    }
    if (keyDir) {
      const btn = raveArrows.find(b => b.dataset.direction === keyDir);
      if (btn) {
        btn.classList.add('highlight');
        setTimeout(() => btn.classList.remove('highlight'), 400);
      }
      handlePlayerInput(keyDir);
      e.preventDefault();
    }
  });

  // Start rave rhythm game initially when game tab clicked
  raveBtn.addEventListener('click', startRaveGame);

</script>

</body>
</html>